define("text",["module"],function(e){"use strict";var t,n,a,r,i,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,u=c&&location.protocol&&location.protocol.replace(/\:/,""),d=c&&location.hostname,p=c&&(location.port||void 0),f={},g=e.config&&e.config()||{};return t={version:"2.0.10",strip:function(e){if(e){e=e.replace(o,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:g.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){n=s[t];try{e=new ActiveXObject(n)}catch(e){}if(e){s=[n];break}}return e},parseName:function(e){var t,n,a,r=!1,i=e.indexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return-1!==i&&(!s||i>1)?(t=e.substring(0,i),n=e.substring(i+1,e.length)):t=e,a=n||t,i=a.indexOf("!"),-1!==i&&(r="strip"===a.substring(i+1),a=a.substring(0,i),n?n=a:t=a),{moduleName:t,ext:n,strip:r}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,a,r){var i,s,o,l=t.xdRegExp.exec(e);return!l||(i=l[2],s=l[3],s=s.split(":"),o=s[1],s=s[0],!(i&&i!==n||s&&s.toLowerCase()!==a.toLowerCase()||(o||s)&&o!==r))},finishLoad:function(e,n,a,r){a=n?t.strip(a):a,g.isBuild&&(f[e]=a),r(a)},load:function(e,n,a,r){if(r.isBuild&&!r.inlineText)return void a();g.isBuild=r.isBuild;var i=t.parseName(e),s=i.moduleName+(i.ext?"."+i.ext:""),o=n.toUrl(s),l=g.useXhr||t.useXhr;if(0===o.indexOf("empty:"))return void a();!c||l(o,u,d,p)?t.get(o,function(n){t.finishLoad(e,i.strip,n,a)},function(e){a.error&&a.error(e)}):n([s],function(e){t.finishLoad(i.moduleName+"."+i.ext,i.strip,e,a)})},write:function(e,n,a,r){if(f.hasOwnProperty(n)){var i=t.jsEscape(f[n]);a.asModule(e+"!"+n,"define(function () { return '"+i+"';});\n")}},writeFile:function(e,n,a,r,i){var s=t.parseName(n),o=s.ext?"."+s.ext:"",l=s.moduleName+o,c=a.toUrl(s.moduleName+o)+".js";t.load(l,a,function(n){var a=function(e){return r(c,e)};a.asModule=function(e,t){return r.asModule(e,c,t)},t.write(e,l,a,i)},i)}},"node"===g.env||!g.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,a){try{var r=n.readFileSync(e,"utf8");0===r.indexOf("\ufeff")&&(r=r.substring(1)),t(r)}catch(e){a(e)}}):"xhr"===g.env||!g.env&&t.createXhr()?t.get=function(e,n,a,r){var i,s=t.createXhr();if(s.open("GET",e,!0),r)for(i in r)r.hasOwnProperty(i)&&s.setRequestHeader(i.toLowerCase(),r[i]);g.onXhr&&g.onXhr(s,e),s.onreadystatechange=function(t){var r,i;4===s.readyState&&(r=s.status,r>399&&r<600?(i=new Error(e+" HTTP status: "+r),i.xhr=s,a(i)):n(s.responseText),g.onXhrComplete&&g.onXhrComplete(s,e))},s.send(null)}:"rhino"===g.env||!g.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,a,r=new java.io.File(e),i=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),"utf-8")),o="";try{for(n=new java.lang.StringBuffer,a=s.readLine(),a&&a.length()&&65279===a.charAt(0)&&(a=a.substring(1)),null!==a&&n.append(a);null!==(a=s.readLine());)n.append(i),n.append(a);o=String(n.toString())}finally{s.close()}t(o)}:("xpconnect"===g.env||!g.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(a=Components.classes,r=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),i="@mozilla.org/windows-registry-key;1"in a,t.get=function(e,t){var n,s,o,l={};i&&(e=e.replace(/\//g,"\\")),o=new FileUtils.File(e);try{n=a["@mozilla.org/network/file-input-stream;1"].createInstance(r.nsIFileInputStream),n.init(o,1,0,!1),s=a["@mozilla.org/intl/converter-input-stream;1"].createInstance(r.nsIConverterInputStream),s.init(n,"utf-8",n.available(),r.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(n.available(),l),s.close(),n.close(),t(l.value)}catch(e){throw new Error((o&&o.path||"")+": "+e)}}),t}),define("text!CustomSpace/Scripts/grids/tasks/view.html",[],function(){return'<div class="ra-grid-task-container" style="<%= _style().replace(/ {4}/g,"") %>">\r\n    <ul class="ra-grid-task-menu">\r\n        <% _.forEach(_tasks, function (task) { %>\r\n            <%= task.template(obj, task).replace(/ {4}/g,"") %>\r\n        <% }) %>\r\n    </ul>\r\n    <span class="ra-grid-task-content">#: <%= field %> #</span>\r\n</div>'}),define("text!CustomSpace/Scripts/grids/tasks/listItemTask.html",[],function(){return'<li class="ra-grid-task-item" data-task="<%= task %>" data-field="<%= field %>" onclick="app.custom.gridTasks.callback(event, this, <%= bClickPropagation %>);">\r\n    <a class="ra-icon ra-grid-task-icon">\r\n        <i class="fa <%= icon %>"></i>\r\n    </a>\r\n</li>'}),define("text!CustomSpace/Scripts/grids/tasks/listItemLink.html",[],function(){return'<li class="ra-grid-task-item <%= className %>" data-task="<%= task %>" data-field="<%= field %>" onclick="app.custom.gridTasks.callback(event, this, <%= bClickPropagation %>);">\r\n    <a class="ra-icon ra-grid-task-icon" href="<%= href %>" target="<%= target %>" >\r\n        <i class="fa <%= icon %>"></i>\r\n    </a>\r\n</li>'}),define("CustomSpace/Scripts/grids/gridTaskBuilder",["text!CustomSpace/Scripts/grids/tasks/view.html","text!CustomSpace/Scripts/grids/tasks/listItemTask.html","text!CustomSpace/Scripts/grids/tasks/listItemLink.html"],function(e,t,n){return!_.isUndefined(app.storage.custom)&&app.storage.custom.get("debug")&&console.log("gridTaskBuilder:define",{cellTemplate:e,listItemTaskTemplate:t,listItemLinkTemplate:n}),{built:!1,build:function(a){function r(){return new kendo.observable({add:function(e,t,n,a,r,i){var s=this,o=$.grep(e.columns,function(e,n){return e.field===t})[0];if(_.isUndefined(o))console.log("gridTasks:add","Warning! Unable to find field '"+t+"'.");else switch(_.isUndefined(o._style)&&Object.defineProperty(o,"_style",{enumerable:!1,writable:!0,value:function(e){return""}}),_.isUndefined(o._tasks)&&Object.defineProperty(o,"_tasks",{enumerable:!1,writable:!0,value:[]}),n){case"style":o._style=r;break;case"task":var l=s.get(e,t,a);l?$.extend(l,{name:a,template:r,callback:i}):o._tasks.push({name:a,template:r,callback:i})}},get:function(e,t,n){var a=$.grep(e.columns,function(e,n){return e.field===t})[0];if(_.isUndefined(a))return console.log("gridTasks:get","Warning! Unable to find field '"+t+"'."),null;if(_.isUndefined(n))return a._tasks;var r=$.grep(a._tasks,function(e,t){return e.name===n})[0];return _.isUndefined(r)?(console.log("gridTasks:get","Warning! Unable to find task '"+n+"' in field '"+t+"'."),null):r},callback:function(e,t,n){var a=this,r=$(t),i=r.closest("div[data-role='grid']").data("kendoGrid"),s=r.data(),o=r.closest("tr").get(0),l=i.dataItem(o),c={event:e,gridData:i,itemRowEle:o,dataItem:l,itemData:s};console.log("gridTasks:callback",c);var u=a.get(i,s.field,s.task);u?(n||e.stopPropagation(),"function"==typeof u.callback&&u.callback(c)):console.log("gridTasks:callback","Unable to find task for callback.")},updateGrid:function(e){var t=this,n=!1;$.each(e.columns,function(e,a){_.isUndefined(a._style)||(a.template=t.template.cell(a),n=!0)}),n&&(e.rowTemplate=e._tmpl(e.options.rowTemplate,e.columns),e.altRowTemplate=e._tmpl(e.options.rowTemplate,e.columns),e.refresh(),app.custom.gridTasks.built=!0)},template:{cell:function(e){return i.cell(e)},listItem:{link:function(e,t,n){return i.link(e,t,n)},task:function(e,t,n){return i.task(e,t,n)}}}})}!_.isUndefined(app.storage.custom)&&app.storage.custom.get("debug")&&console.log("gridTaskBuilder:build");var i={cell:function(t){return _.template(e)(t)},link:function(e,t,a){var r={field:e,task:t,icon:"fa-external-link",bClickPropagation:!1,className:"",href:"/",target:"_blank"},i=_.template(n);return $.extend(r,a),i(r)},task:function(e,n,a){var r={field:e,task:n,icon:"fa-pencil",bClickPropagation:!0},i=_.template(t);return $.extend(r,a),i(r)}};!function(){var e=r();app.custom.gridTasks=e,"function"==typeof a&&a(e)}()}}}),require.config({waitSeconds:0,urlArgs:"v="+session.staticFileVersion,baseUrl:"/Scripts/",paths:{text:"require/text",CustomSpace:"../CustomSpace"}}),require(["CustomSpace/Scripts/grids/gridTaskBuilder"],function(e){"use strict";!_.isUndefined(app.storage.custom)&&app.storage.custom.get("debug")&&console.log("gridTaskMain:define",performance.now()),function(){!_.isUndefined(app.storage.custom)&&app.storage.custom.get("debug")&&console.log("gridTaskMain:initGridTasks",performance.now()),e.build(function(e){app.events.subscribe("dynamicPageReady",function(){app.events.publish("gridTasksReady")})})}()}),define("CustomSpace/Scripts/grids/gridTaskMain",function(){});
//# sourceMappingURL=gridTaskMain-built.min.js.map