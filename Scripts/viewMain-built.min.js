function updateModel(e){if(e.sender){var t=e.sender;setTimeout(function(){$(t.element.parent()).hide(0,function(){$(this).show()}),$(".rule-container").hide(0,function(){$(this).show()})},1e3)}}define("text",["module"],function(e){"use strict";var t,a,n,i,r,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d="undefined"!=typeof location&&location.href,c=d&&location.protocol&&location.protocol.replace(/\:/,""),u=d&&location.hostname,p=d&&(location.port||void 0),m={},f=e.config&&e.config()||{};return t={version:"2.0.10",strip:function(e){if(e){e=e.replace(s,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var e,t,a;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){a=o[t];try{e=new ActiveXObject(a)}catch(e){}if(e){o=[a];break}}return e},parseName:function(e){var t,a,n,i=!1,r=e.indexOf("."),o=0===e.indexOf("./")||0===e.indexOf("../");return-1!==r&&(!o||r>1)?(t=e.substring(0,r),a=e.substring(r+1,e.length)):t=e,n=a||t,r=n.indexOf("!"),-1!==r&&(i="strip"===n.substring(r+1),n=n.substring(0,r),a?a=n:t=n),{moduleName:t,ext:a,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,a,n,i){var r,o,s,l=t.xdRegExp.exec(e);return!l||(r=l[2],o=l[3],o=o.split(":"),s=o[1],o=o[0],!(r&&r!==a||o&&o.toLowerCase()!==n.toLowerCase()||(s||o)&&s!==i))},finishLoad:function(e,a,n,i){n=a?t.strip(n):n,f.isBuild&&(m[e]=n),i(n)},load:function(e,a,n,i){if(i.isBuild&&!i.inlineText)return void n();f.isBuild=i.isBuild;var r=t.parseName(e),o=r.moduleName+(r.ext?"."+r.ext:""),s=a.toUrl(o),l=f.useXhr||t.useXhr;if(0===s.indexOf("empty:"))return void n();!d||l(s,c,u,p)?t.get(s,function(a){t.finishLoad(e,r.strip,a,n)},function(e){n.error&&n.error(e)}):a([o],function(e){t.finishLoad(r.moduleName+"."+r.ext,r.strip,e,n)})},write:function(e,a,n,i){if(m.hasOwnProperty(a)){var r=t.jsEscape(m[a]);n.asModule(e+"!"+a,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,a,n,i,r){var o=t.parseName(a),s=o.ext?"."+o.ext:"",l=o.moduleName+s,d=n.toUrl(o.moduleName+s)+".js";t.load(l,n,function(a){var n=function(e){return i(d,e)};n.asModule=function(e,t){return i.asModule(e,d,t)},t.write(e,l,n,r)},r)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(a=require.nodeRequire("fs"),t.get=function(e,t,n){try{var i=a.readFileSync(e,"utf8");0===i.indexOf("\ufeff")&&(i=i.substring(1)),t(i)}catch(e){n(e)}}):"xhr"===f.env||!f.env&&t.createXhr()?t.get=function(e,a,n,i){var r,o=t.createXhr();if(o.open("GET",e,!0),i)for(r in i)i.hasOwnProperty(r)&&o.setRequestHeader(r.toLowerCase(),i[r]);f.onXhr&&f.onXhr(o,e),o.onreadystatechange=function(t){var i,r;4===o.readyState&&(i=o.status,i>399&&i<600?(r=new Error(e+" HTTP status: "+i),r.xhr=o,n(r)):a(o.responseText),f.onXhrComplete&&f.onXhrComplete(o,e))},o.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var a,n,i=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),o=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(i),"utf-8")),s="";try{for(a=new java.lang.StringBuffer,n=o.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&a.append(n);null!==(n=o.readLine());)a.append(r),a.append(n);s=String(a.toString())}finally{o.close()}t(s)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(n=Components.classes,i=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in n,t.get=function(e,t){var a,o,s,l={};r&&(e=e.replace(/\//g,"\\")),s=new FileUtils.File(e);try{a=n["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),a.init(s,1,0,!1),o=n["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(a,"utf-8",a.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(a.available(),l),o.close(),a.close(),t(l.value)}catch(e){throw new Error((s&&s.path||"")+": "+e)}}),t}),define("text!structure/header/view.html",[],function(){return'<div class="col-md-12">\r\n    <h1 data-bind="text: view.title" class="page_title"></h1>\r\n    <p data-bind="text: view.subTitle" class="text-muted"></p>\r\n</div>\r\n<div data-bind="visible: view.hasRight" class="col-md-4 text-right">\r\n    <span data-bind="html: view.right.value"></span>\r\n</div>\r\n'}),define("structure/header/controller",["require","text!structure/header/view.html"],function(e){var t=e("text!structure/header/view.html");return{template:t,build:function(e,a,n){var i=_.template(t);a.view={},_.isUndefined(a.title)||(a.view.title=_.isUndefined(localization[a.title])?a.title:localization[a.title],document.title=a.view.title),_.isUndefined(a.subTitle)||(a.view.subTitle=_.isUndefined(localization[a.subTitle])?a.subTitle:localization[a.subTitle]),_.isUndefined(a.right)?a.view.hasRight=!1:(a.view.hasRight=!0,a.view.right={value:a.right.someVal}),n(new kendo.View(i(),{wrap:!1,model:a}).render())}}}),define("text!structure/tab/tabNavigation/view.html",[],function(){return'<ul class="nav nav-pills" id="<%= app.lib.newGUID() %>"></ul>'}),define("structure/tab/tabNavigation/controller",["require","text!structure/tab/tabNavigation/view.html"],function(e){var t=e("text!structure/tab/tabNavigation/view.html");return{template:t,build:function(e,a,n){n(_.template(t)())}}}),define("text!structure/tab/tabPane/view.html",[],function(){return'<div class="tab-pane <%= active %>" id="<%= tabId %>"></div>   '}),define("structure/tab/tabPane/controller",["require","text!structure/tab/tabPane/view.html"],function(e){var t=e("text!structure/tab/tabPane/view.html");return{template:t,build:function(e,a,n){n(_.template(t)(a))}}}),define("text!structure/tab/tabContent/view.html",[],function(){return'<div class="tab-content"></div>'}),define("structure/tab/tabContent/controller",["require","text!structure/tab/tabContent/view.html"],function(e){var t=e("text!structure/tab/tabContent/view.html");return{template:t,build:function(e,a,n){n(_.template(t)(a))}}}),define("text!structure/tab/tabData/view.html",[],function(){return'<li class="<%= active %>"><a href="#<%= tabId %>" data-toggle="tab"><%= name %></a></li>'}),define("structure/tab/tabData/controller",["require","text!structure/tab/tabData/view.html"],function(e){var t=e("text!structure/tab/tabData/view.html");return{template:t,build:function(e,a,n){var i=_.template(t);!_.isUndefined(localization[a.name])&&[a.name].length>0&&(a.name=localization[a.name]),n(i(a))}}}),define("text!structure/column/view.html",[],function(){return'<div data-bind="class: view.controller.colSize">\r\n    <div data-bind="class: view.controller.containerClass">\r\n        <div data-bind="visible: view.controller.hasTitle, text: view.controller.title, class: view.controller.titleClass"></div>\r\n        <div class="append-here" data-bind="class: view.controller.contentClass">\r\n\r\n        </div>\r\n    </div>\r\n</div>'}),define("structure/column/controller",["require","text!structure/column/view.html"],function(e){var t=e("text!structure/column/view.html");return{template:t,build:function(e,a,n){var i=new kendo.View;a.view={controller:{colSize:"col-md-"+a.ColSize,title:_.isUndefined(localization[a.title])?a.title:localization[a.title],hasTitle:!_.isUndefined(a.title)},buildView:function(){var e=_.isUndefined(a.customCls)?"":" "+a.customCls,r=_.isUndefined(a.containerCls)?"":" "+a.containerCls;_.isUndefined(a.type)||"panel"!=a.type?(a.view.controller.contentClass=e,a.view.controller.containerClass=r):(a.view.controller.contentClass="panel-body"+e,a.view.controller.containerClass="panel panel-widget",a.view.controller.titleClass="panel-heading");var o=_.template(t);i.destroy(),i=new kendo.View(o(),{wrap:!1,model:a}),n(i.render())}},a.view.buildView()}}}),define("text!structure/content/view.html",[],function(){return'<div data-bind="attr: {class: cssClass}">\r\n\r\n</div>'}),define("structure/content/controller",["require","text!structure/content/view.html"],function(e){var t=e("text!structure/content/view.html");return{template:t,build:function(e,a,n){var i=_.template(t),r={cssClass:a.cssClass};n(new kendo.View(i(),{wrap:!1,model:kendo.observable(r)}).render())}}}),define("text!viewPanels/facetedSearch/view.html",[],function(){return'\x3c!-- facetedSearch--\x3e\r\n<div data-bind="templateResources:\'resources\'">\r\n\r\n    <ul data-template-name="searchResultsTemplate" data-type="#: data.type #" class="faceted-search-list type-#: data.type #">\r\n        #if(data.type == "NoResults"){#\r\n        <li class="faceted-search-item">\r\n            <div>\r\n                <span>\r\n                    #: data.Title #\r\n                </span>\r\n            </div>\r\n        </li>\r\n        #} else {#\r\n        #if(data.type == "RequestOffering"){#\r\n        <li class="faceted-search-item no-hover">\r\n            <div>\r\n                <span class="column-title">#: localization.Requests #</span>\r\n            </div>\r\n        </li>\r\n        #} else if(data.type == "Favorite"){#\r\n        <li class="faceted-search-item no-hover">\r\n            <div>\r\n                <span class="column-title">#: localization.Favorites #</span>\r\n            </div>\r\n        </li>\r\n        #} else if(data.type == "KnowledgeArticle"){#\r\n        <li class="faceted-search-item no-hover">\r\n            <div>\r\n                <span class="column-title">#: localization.KnowledgeArticles #</span>\r\n            </div>\r\n        </li>\r\n        # } #\r\n        #if(data.type != "NoResults"){#\r\n        # for (var i = 0; i < data.results.length ; i++) { #\r\n        #var current = data.results[i];#\r\n        #current.Description = current.Description.replace(/["]/g,\'\\\'\')#\r\n        #if(data.type == "RequestOffering" || data.type == "Favorite"){#\r\n        <li class="faceted-search-item" data-tooltip="#:current.Description#">\r\n            <div>\r\n                <span>\r\n                    #if(!_.isNull(current.RequestOfferingLinkUrl)){#\r\n                    <a class="link" href="#:current.RequestOfferingLinkUrl#">\r\n                        <img class="hidden-xs hidden-sm" src="/ServiceCatalog/GetRequestOfferingImg/#:current.Id#" onerror="this.onerror = null; this.src = \'/Content/Images/Icons/RequestOffering/RO_Default.png\';" />\r\n                        <span class="list-title">#: current.Title #</span>\r\n                    </a>\r\n                    #} else {#\r\n                    <a class="link" href="/SC/ServiceCatalog/RequestOffering/#:current.Id#,#:current.ServiceOfferingId#">\r\n                        <img class="hidden-xs hidden-sm" src="/ServiceCatalog/GetRequestOfferingImg/#:current.Id#" onerror="this.onerror = null; this.src = \'/Content/Images/Icons/RequestOffering/RO_Default.png\';" />\r\n                        <span class="list-title">#: current.Title #</span>\r\n                    </a>\r\n                    # } #\r\n                </span>\r\n            </div>\r\n        </li>\r\n        #} else {#\r\n        <li class="faceted-search-item" data-tooltip="#:current.Description#">\r\n            <div>\r\n                <span>\r\n                    <a class="link" href="/KnowledgeBase/View/#:current.Id#">\r\n                        <img alt="image" class="hidden-xs hidden-sm ka-icon" src="/Content/Images/Icons/Drawer/kb-white.svg">\r\n                        <span class="list-title">#: current.Title #</span>\r\n                    </a>\r\n                </span>\r\n            </div>\r\n        </li>\r\n        # } #\r\n        # } #\r\n        # } #\r\n        #if(data.type == "RequestOffering" && data.showAllLink){#\r\n        <li class="faceted-search-item no-hover hidden-xs">\r\n            <br/>\r\n        </li>\r\n        <li class="faceted-search-item last-item cursor-pointer hidden-xs" data-click-location="#: data.type #">\r\n            <a class="cursor-pointer">#: localization.ViewAllRequests #</a>\r\n        </li>\r\n        <li class="faceted-search-item last-item cursor-pointer visible-xs" data-click-location="#: data.type #">\r\n            <a class="cursor-pointer">#: localization.ViewAll #</a>\r\n        </li>\r\n        #} else if(data.type == "Favorite" && data.showAllLink){#\r\n        <li class="faceted-search-item no-hover hidden-xs">\r\n            <br/>\r\n        </li>\r\n        <li class="faceted-search-item last-item cursor-pointer hidden-xs" data-click-location="#: data.type #">\r\n            <a class="cursor-pointer">#: localization.ViewAllFavorites #</a>\r\n        </li>\r\n        <li class="faceted-search-item last-item cursor-pointer visible-xs" data-click-location="#: data.type #">\r\n            <a class="cursor-pointer">#: localization.ViewAll #</a>\r\n        </li>\r\n        #} else if(data.type == "KnowledgeArticle" && data.showAllLink){#\r\n        <li class="faceted-search-item no-hover hidden-xs">\r\n            <br/>\r\n        </li>\r\n        <li class="faceted-search-item last-item cursor-pointer hidden-xs" data-click-location="#: data.type #">\r\n            <a class="cursor-pointer">#: localization.ViewAllKA #</a>\r\n        </li>\r\n        <li class="faceted-search-item last-item cursor-pointer visible-xs" data-click-location="#: data.type #">\r\n            <a class="cursor-pointer">#: localization.ViewAll #</a>\r\n        </li>\r\n        # } #\r\n        # } #\r\n    </ul>\r\n</div>\r\n\r\n<div class="row search-row">\r\n\r\n    <div class="service-request-body">\r\n        <h3 class="search-title" data-bind="localize: FacetedSearchLabel"></h3>\r\n        <div class="search-wrapper">\r\n            <div class="input-group" data-bind="ciresonFacetedSearchBehavior: selectedSearchResult">\r\n                <input type="text" class="form-control" data-template-part="autoCompleteInputPart" data-value-primitive="false" data-bind="value: selectedSearchResult" id="facetedSearch" />\r\n                <div class="input-group-btn" data-template-part="filterSelectPart">\r\n                    <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">\r\n                        <span data-bind="text: currentSearchScopeText">Search All</span> <span class="caret"></span>\r\n                    </button>\r\n                    <ul class="dropdown-menu pull-right" role="menu">\r\n                        <li data-searchtype="IWantToReportAnIssue"><a data-bind="localize: IWantToReportAnIssue"></a></li>\r\n                        <li data-searchtype="IWantToRequestSomething"><a data-bind="localize: IWantToRequestSomething"></a></li>\r\n                        <li data-searchtype="ChooseAFavoriteRequest"><a data-bind="localize: ChooseAFavoriteRequest"></a></li>\r\n                        <li class="divider"></li>\r\n                        <li data-searchtype="SearchAll"><a data-bind="localize: SearchAll"></a></li>\r\n                    </ul>\r\n                </div>\r\n                <span class="input-group-btn" data-template-part="searchButtonPart">\r\n                    <button class="btn btn-primary btn-search" type="button"><span class="fa fa-search"></span></button>\r\n                </span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("viewPanels/facetedSearch/controller",["require","text!viewPanels/facetedSearch/view.html"],function(e){var t=e("text!viewPanels/facetedSearch/view.html");return{template:t,build:function(e,a,n){var i=_.template(t),r={SearchPlaceholder:a.Definition.SearchPlaceholder,textField:a.Definition.TextField,selectedSearchResult:null};n(new kendo.View(i(),{wrap:!1,model:kendo.observable(r)}).render())}}}),define("text!viewPanels/html/view.html",[],function(){return'<div data-bind="html: view.controller.content">\r\n</div>\r\n\r\n'}),define("viewPanels/html/controller",["require","text!viewPanels/html/view.html"],function(e){var t=e("text!viewPanels/html/view.html");return{template:t,build:function(e,a,n){var i=new kendo.View,r={view:{controller:{content:_.isUndefined(a.Definition.content.content)?a.Definition.content:a.Definition.content.content},buildView:function(){var e=_.template(t);i.destroy(),i=new kendo.View(e(),{wrap:!1,model:r}),n(i.render())}}};r.view.buildView()}}}),define("text!CustomSpace/Scripts/viewPanels/serviceCatalog/view.html",[],function(){
return'<div id="service-catalog"></div>\r\n\r\n<div class="service-catalog-content">\r\n    <div class="row">\r\n        <div id="servicecat-content" class="col-lg-10 col-md-9 service-request-body">\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\x3c!-- BASE STRUCTURE TEMPLATE --\x3e\r\n<script type="text/x-kendo-template" id="servicecatalog-template">\r\n    <div class="service-catalog-content">\r\n        <div class="row">\r\n            <div id="servicecat-nav" data-bind="affix:{top: 200}, yScrollOnResize:{top: auto, bottom: 50}" class="col-lg-2 col-md-3 service-request-nav hidden-xs hidden-sm">\r\n                \r\n            </div>\r\n            <div class="col-lg-10 col-md-9 service-request-body">\r\n                <div id="servicecat-content"></div>\r\n                \x3c!-- OVERLAY TEMPLATE --\x3e\r\n                <div class="overlay">\r\n                    <div class="row search-results-container">\r\n                        <div class="col-md-12" id="breadcrumb-results-wrapper"></div>\r\n                        <div class="col-md-12" id="ka-results-wrapper"></div>\r\n                        <div class="col-md-12" id="fav-results-wrapper"></div>\r\n                        <div class="col-md-12" id="ro-results-wrapper"></div>\r\n                        <div class="col-md-12" id="footer-results-wrapper"></div>\r\n                        <div class="col-md-12" id="catalog-area-overlay"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n<\/script>\r\n\r\n\x3c!-- NAV TEMPLATES--\x3e\r\n<script type="text/x-kendo-template" id="base-nav-template">\r\n    <div data-bind ="visible: taxonomyVisible">\r\n        <h4 data-bind="localize: BrowseByCategory, visible: taxonomyVisible"></h4>\r\n        <ul class="list-unstyled sc-nav-list" data-template="category-nav-template" data-bind="source: navs"></ul>\r\n    </div>\r\n<\/script>\r\n\r\n<script type="text/x-kendo-template" id="category-nav-template">\r\n    <li class="nav-header">\r\n        <a class="link cat-link" data-toggle="collapse" data-target="\\\\##:CategoryId#" data-category="#:CategoryId#" data-bind="text: Category, click: showSingleCategory"></a>\r\n        <ul class="list-unstyled collapse" id="#:CategoryId#" data-template="service-nav-template" data-bind="source: services"></ul>\r\n    </li>\r\n<\/script>\r\n\r\n<script type="text/x-kendo-template" id="service-nav-template">\r\n    <li><a class="link so-link" data-service="#:ServiceOfferingId#" data-bind="text: Service, click: showSingleService"></a></li>\r\n<\/script>\r\n\r\n\x3c!-- MAIN CATALOG TEMPLATE--\x3e\r\n<script type="text/x-kendo-tmpl" id="catalog-template">\r\n    <h4 data-bind="visible: loadingVisible, localize: Loading"></h4>\r\n    <div class="catalog-content">\r\n        \x3c!-- FAVORITES/TOP LISTS--\x3e\r\n        <div class="clearfix" data-bind="visible:topsVisible">\r\n            <div class="topfav-row" data-bind="visible: favRO">\r\n                <h4 data-bind="localize: FavoriteRequests"></h4>\r\n\r\n                <div class="list-wrapper" data-template="topfav-request-offerings" data-bind="source: favROs"></div>\r\n            </div>\r\n            <div class="topfav-row" data-bind="visible: topRO">\r\n                <h4 data-bind="localize: TopRequests"></h4>\r\n\r\n                <div class="list-wrapper" data-template="topfav-request-offerings" data-bind="source: topROs"></div>\r\n            </div>\r\n            <div class="topfav-row" data-bind="visible: topKA">\r\n                <h4 data-bind="localize: TopKnowledgeArticles"></h4>\r\n\r\n                <div class="list-wrapper" data-template="top-ka" data-bind="source: topKAs"></div>\r\n            </div>\r\n        </div>\r\n        \x3c!-- MAIN PAGE CATALOG--\x3e\r\n        <div data-bind="visible: catalogVisible">\r\n            <h4>\r\n                <span data-bind="visible: homeBC">\r\n                    <a class="cursor-pointer fa fa-home" data-bind="click: showHome"></a>\r\n                    /\r\n                </span>\r\n                <span data-bind="text: scLabel"></span>\r\n\r\n            </h4>\r\n            <div id="catalog-area"></div>\r\n        </div>\r\n    </div>\r\n<\/script>\r\n\r\n\x3c!-- TOP/FAV RO TEMPLATES--\x3e\r\n<script type="text/x-kendo-template" id="topfav-request-offerings">\r\n    <div class="thumbnail">\r\n        <div class="mid-thumb top-#:Title.replace(/ /g,\'-\').toLowerCase() #">\r\n            <a class="cursor-pointer" href="/SC/ServiceCatalog/RequestOffering/#:Id#,#:ServiceInfo.Id#">\r\n                <img src="/ServiceCatalog/GetRequestOfferingImg/#:Id#" onerror="this.onerror=null; this.src=\'/Content/Images/Icons/RequestOffering/RO_Default.png\';">\r\n                <div class=" favorite">\r\n                    <div class="inner"\r\n                         data-request-url="#:LinkUrl#"\r\n                         data-request-target-type="#:LinkTargetType#"\r\n                         data-request="#:Id#"\r\n                         data-service="#:ServiceInfo.Id#"\r\n                         data-bind="click: openRequestOffering">\r\n                        <i class="fa #= IsFavorite ? \'fa-star\' :\'fa-star-o\' # link" data-request="#:Id#" data-bind="click: toggleFavorite"></i>\r\n                        <p data-request-url="#:LinkUrl#"\r\n                           data-request-target-type="#:LinkTargetType#"\r\n                           data-request="#:Id#"\r\n                           data-service="#:ServiceInfo.Id#"\r\n                           data-bind="click: openRequestOffering">#= BriefDescription != null ? BriefDescription :\'\' #</p>\r\n                    </div>\r\n                </div>\r\n            </a>\r\n        </div>\r\n        <div class="caption">\r\n            <a class="link" data-request-url="#:LinkUrl#" data-request-target-type="#:LinkTargetType#" data-service="#:ServiceInfo.Id#" data-request="#:Id#" data-bind="text: Title, click: openRequestOffering"></a>\r\n        </div>\r\n    </div>\r\n<\/script>\r\n\r\n\x3c!-- TOP KA TEMPLATES--\x3e\r\n<script type="text/x-kendo-template" id="top-ka">\r\n    <div class="thumbnail">\r\n        <div class="mid-thumb ka-thumb ka-#:Title.replace(/ /g,\'-\').toLowerCase() #">\r\n            <a class="cursor-pointer" href="/KnowledgeBase/View/#:ArticleId#">\r\n                <img alt="image" class="ka-icon" src="/Content/Images/Icons/Drawer/kb-white.svg">\r\n                <div class="favorite">\r\n                    <div class="inner">\r\n                        <p>#= Abstract != null ? Abstract :\'\' #</p>\r\n                    </div>\r\n                </div>\r\n            </a>\r\n        </div>\r\n        <div class="caption">\r\n            <a class="link" href="/KnowledgeBase/View/#:ArticleId#" data-bind="text: Title"></a>\r\n        </div>\r\n    </div>\r\n<\/script>\r\n\r\n\x3c!-- CATEGORY WITH CHILD SOs TEMPLATE--\x3e\r\n<script type="text/x-kendo-tmpl" id="cat-template">\r\n    <div class="cat #:CategoryId#">\r\n        <div data-template="so-template" data-bind="source: dataSource"></div>\r\n    </div>\r\n<\/script>\r\n\r\n\x3c!-- LIST OF SOs TEMPLATE--\x3e\r\n<script type="text/x-kendo-tmpl" id="so-template">\r\n    <div class="service-offerings" data-service="#:ServiceOfferingId#">\r\n        <h4>\r\n            <a class="cursor-pointer fa fa-home" data-bind="click: showHome"></a>\r\n            /\r\n            <a class="cursor-pointer" data-bind="localize: ServiceCatalog, click: showFullCatalog"></a>\r\n            /\r\n            <a class="cursor-pointer" data-category="#:CategoryId#" data-bind="text: Category, click: showSingleCategory"></a>\r\n            /\r\n            <span data-bind="text: Service"></span>\r\n        </h4>\r\n        \x3c!--<div class="row" data-template="ro-template" data-bind="source: requestofferings"></div>--\x3e\r\n        <div class="row">\r\n            # for (var i = 0; i < requestofferings.length; i++) { #\r\n            <div class="col-sm-6 col-md-4 col-lg-3">\r\n                <div class="thumbnail-lg">\r\n                    <div class="cursor-pointer lg-thumb ro-#:requestofferings[i].RequestOfferingTitle.replace(/ /g,\'-\').toLowerCase() #">\r\n                        <img src="/ServiceCatalog/GetRequestOfferingImg/#:requestofferings[i].RequestOfferingId#" onerror="this.onerror=null; this.src=\'/Content/Images/Icons/RequestOffering/RO_Default.png\';">\r\n                        <div class="favorite">\r\n                            <div class="inner"\r\n                                 data-request-url="#:requestofferings[i].RequestOfferingLinkUrl#"\r\n                                 data-request-target-type="#:requestofferings[i].RequestOfferingLinkTargetType#"\r\n                                 data-request="#:requestofferings[i].RequestOfferingId#"\r\n                                 data-service="#:requestofferings[i].ServiceOfferingId#"\r\n                                 data-bind="click: openRequestOffering">\r\n                                <i class="fa #= requestofferings[i].IsFavorite ? \'fa-star\' :\'fa-star-o\' # link" data-request="#:requestofferings[i].RequestOfferingId#" data-bind="click: toggleFavorite"></i>\r\n                                <p data-request="#:requestofferings[i].RequestOfferingId#">#: requestofferings[i].RequestOfferingDescription #</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="caption">\r\n                        <a class="link" data-service="#:requestofferings[i].ServiceOfferingId#" data-request-url="#:requestofferings[i].RequestOfferingLinkUrl#" data-request-target-type="#:requestofferings[i].RequestOfferingLinkTargetType#" data-request="#:requestofferings[i].RequestOfferingId#" data-bind="click: openRequestOffering">#:requestofferings[i].RequestOfferingTitle#</a>\r\n                        <p class="hidden-xs">#: requestofferings[i].RequestOfferingDescription #</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            # } #\r\n        </div>\r\n    </div>\r\n<\/script>\r\n\x3c!-- LIST OF ROs TEMPLATE--\x3e\r\n<script type="text/x-kendo-tmpl" id="ro-template">\r\n    <div class="col-sm-6 col-md-4 col-lg-3">\r\n        <div class="thumbnail-lg">\r\n            <div class="cursor-pointer lg-thumb ro-#:RequestOfferingTitle.replace(/ /g,\'-\').toLowerCase() #">\r\n                <img src="/ServiceCatalog/GetRequestOfferingImg/#:RequestOfferingId#" onerror="this.onerror=null; this.src=\'/Content/Images/Icons/RequestOffering/RO_Default.png\';">\r\n                <div class="favorite">\r\n                    <div class="inner"\r\n                         data-request-url="#:RequestOfferingLinkUrl#"\r\n                         data-request-target-type="#:RequestOfferingLinkTargetType#"\r\n                         data-request="#:RequestOfferingId#"\r\n                         data-service="#:ServiceOfferingId#"\r\n                         data-bind="click: openRequestOffering">\r\n                        <i class="fa #= IsFavorite ? \'fa-star\' :\'fa-star-o\' # link" data-request="#:RequestOfferingId#" data-bind="click: toggleFavorite"></i>\r\n                        <p data-request="#:RequestOfferingId#">#= RequestOfferingDescription != null ? RequestOfferingDescription :\'\' #</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="caption">\r\n                <a class="link" data-service="#:ServiceOfferingId#" data-request-url="#:RequestOfferingLinkUrl#" data-request-target-type="#:RequestOfferingLinkTargetType#" data-request="#:RequestOfferingId#" data-bind="text: RequestOfferingTitle, click: openRequestOffering"></a>\r\n                <p class="hidden-xs" data-bind="text: RequestOfferingDescription"></p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n<\/script>\r\n\x3c!-- MINI CAT TEMPLATE - All Categories --\x3e\r\n<script type="text/x-kendo-tmpl" id="cat-mini-template-all">\r\n    <div class="cat-#:Category.replace(/ /g,\'-\').toLowerCase() #">\r\n        <h4>\r\n            <span data-bind="text: Category"></span>\r\n        </h4>\r\n        <div class="mini-template-body">\r\n            \x3c!--<div class="row" data-template="so-mini-template" data-bind="source: services"></div>--\x3e\r\n            <div class="row">\r\n                # for (var x = 0; x < services.length  ; x++) { #\r\n                <div class="mini-services col-sm-5 col-md-4 col-lg-3">\r\n                    <div class="clearfix">\r\n                        <div class="so-blocks" data-service="#:services[x].ServiceOfferingId#">\r\n                            # var totalROs = !_.isUndefined(services[x].requestofferings) ? services[x].requestofferings.length : 0 #\r\n                            # var requestofferings = services[x].requestofferings; #\r\n                            <section data-service="#:services[x].ServiceOfferingId#">\r\n                                # for (var i = 0; i < totalROs && i < 4  ; i++) { #\r\n                                <div class="ro-#:requestofferings[i].RequestOfferingTitle.replace(/ /g,\'-\').toLowerCase() #" title="#:requestofferings[i].RequestOfferingTitle#"\r\n                                     data-title="#:requestofferings[i].RequestOfferingTitle#"\r\n                                     data-role="tooltip"\r\n                                     data-auto-hide="true"\r\n                                     data-position="top">\r\n                                    <img class="cursor-pointer" data-request-url="#:requestofferings[i].RequestOfferingLinkUrl#" data-request-target-type="#:requestofferings[i].RequestOfferingLinkTargetType#" data-request="#:requestofferings[i].RequestOfferingId#" data-bind="click: openRequestOffering" src="/ServiceCatalog/GetRequestOfferingImg/#:requestofferings[i].RequestOfferingId#" onerror="this.onerror=null; this.src=\'/Content/Images/Icons/RequestOffering/RO_Default.png\';">\r\n                                </div>\r\n                                # } #\r\n                            </section>\r\n                            # if(totalROs > 4) { #\r\n                            <section data-service="#:services[x].ServiceOfferingId#">\r\n                                # for (var i = 4; i < totalROs && i < 9  ; i++) { #\r\n                                <div class="ro-#:requestofferings[i].RequestOfferingTitle.replace(/ /g,\'-\').toLowerCase() #" title="#:requestofferings[i].RequestOfferingTitle#"\r\n                                     data-title="#:requestofferings[i].RequestOfferingTitle#"\r\n                                     data-role="tooltip"\r\n                                     data-auto-hide="true"\r\n                                     data-position="top">\r\n                                    <img class="cursor-pointer" data-request-url="#:requestofferings[i].RequestOfferingLinkUrl#" data-request-target-type="#:requestofferings[i].RequestOfferingLinkTargetType#" data-request="#:requestofferings[i].RequestOfferingId#" data-bind="click: openRequestOffering" src="/ServiceCatalog/GetRequestOfferingImg/#:requestofferings[i].RequestOfferingId#" onerror="this.onerror=null; this.src=\'/Content/Images/Icons/RequestOffering/RO_Default.png\';">\r\n                                </div>\r\n                                # } #\r\n                            </section>\r\n                            # } #\r\n                        </div>\r\n                    </div>\r\n                    <span class="link" data-service="#:services[x].ServiceOfferingId#" data-bind="click: showSingleService">#:services[x].Service#</span>\r\n                </div>\r\n                # } #\r\n            </div>\r\n        </div>\r\n    </div>\r\n<\/script>\r\n\x3c!-- MINI CAT TEMPLATE - Single Category --\x3e\r\n<script type="text/x-kendo-tmpl" id="cat-mini-template-single">\r\n    <div class="cat-#:Category.replace(/ /g,\'-\').toLowerCase() #">\r\n        <h4>\r\n            <a class="cursor-pointer fa fa-home" data-bind="click: showHome"></a>\r\n            /\r\n            <a class="cursor-pointer" data-bind="localize: ServiceCatalog, click: showFullCatalog"></a>\r\n            /\r\n            <span data-bind="text: Category"></span>\r\n        </h4>\r\n        <div class="mini-template-body">\r\n            <div class="row" data-template="so-mini-template" data-bind="source: services"></div>\r\n        </div>\r\n    </div>\r\n<\/script>\r\n\x3c!-- MINI SO TEMPLATE--\x3e\r\n<script type="text/x-kendo-tmpl" id="so-mini-template">\r\n    <div class="mini-services col-sm-5 col-md-4 col-lg-3">\r\n        <div class="clearfix">\r\n            <div class="so-blocks" data-service="#:ServiceOfferingId#">\r\n                # var totalROs = !_.isUndefined(data.requestofferings) ? data.requestofferings.length : 0 #\r\n                <section data-service="#:ServiceOfferingId#">\r\n                    # for (var i = 0; i < totalROs && i < 4  ; i++) { #\r\n                    <div class="ro-#:requestofferings[i].RequestOfferingTitle.replace(/ /g,\'-\').toLowerCase() #" title="#:requestofferings[i].RequestOfferingTitle#"\r\n                         data-title="#:requestofferings[i].RequestOfferingTitle#"\r\n                         data-role="tooltip"\r\n                         data-auto-hide="true"\r\n                         data-position="top">\r\n                        <img class="cursor-pointer" data-request-url="#:requestofferings[i].RequestOfferingLinkUrl#" data-request-target-type="#:requestofferings[i].RequestOfferingLinkTargetType#" data-request="#:requestofferings[i].RequestOfferingId#" data-bind="click: openRequestOffering" src="/ServiceCatalog/GetRequestOfferingImg/#:requestofferings[i].RequestOfferingId#" onerror="this.onerror=null; this.src=\'/Content/Images/Icons/RequestOffering/RO_Default.png\';">\r\n                    </div>\r\n                    # } #\r\n                </section>\r\n                # if(totalROs > 4) { #\r\n                <section data-service="#:ServiceOfferingId#">\r\n                    # for (var i = 4; i < totalROs && i < 9  ; i++) { #\r\n                    <div class="ro-#:requestofferings[i].RequestOfferingTitle.replace(/ /g,\'-\').toLowerCase() #" title="#:requestofferings[i].RequestOfferingTitle#"\r\n                         data-title="#:requestofferings[i].RequestOfferingTitle#"\r\n                         data-role="tooltip"\r\n                         data-auto-hide="true"\r\n                         data-position="top">\r\n                        <img class="cursor-pointer" data-request-url="#:requestofferings[i].RequestOfferingLinkUrl#" data-request-target-type="#:requestofferings[i].RequestOfferingLinkTargetType#" data-request="#:requestofferings[i].RequestOfferingId#" data-bind="click: openRequestOffering" src="/ServiceCatalog/GetRequestOfferingImg/#:requestofferings[i].RequestOfferingId#" onerror="this.onerror=null; this.src=\'/Content/Images/Icons/RequestOffering/RO_Default.png\';">\r\n                    </div>\r\n                    # } #\r\n                </section>\r\n                # } #\r\n            </div>\r\n            \x3c!--<ul class="so-blocks">\r\n                <li class="more-ros fa fa-ellipsis-h" title="View All #:Service#"\r\n                    data-role="tooltip"\r\n                    data-auto-hide="true"\r\n                    data-position="top"\r\n                    data-bind="click: showSingleService">\r\n                </li>\r\n            </ul>--\x3e\r\n        </div>\r\n        <span class="link" data-service="#:ServiceOfferingId#" data-bind="click: showSingleService, text: Service"></span>\r\n    </div>\r\n<\/script>\r\n\x3c!-- MINI RO TEMPLATE--\x3e\r\n<script type="text/x-kendo-tmpl" id="ro-mini-template">\r\n    <div class="ro-#:RequestOfferingTitle.replace(/ /g,\'-\').toLowerCase() #" title="#:RequestOfferingTitle#"\r\n         data-title="#:RequestOfferingTitle#"\r\n         data-role="tooltip"\r\n         data-auto-hide="true"\r\n         data-position="top">\r\n        <img class="cursor-pointer" data-request-url="#:RequestOfferingLinkUrl#" data-request="#:RequestOfferingId#" data-request-target-type="#:RequestOfferingLinkTargetType#" data-bind="click: openRequestOffering" src="/ServiceCatalog/GetRequestOfferingImg/#:RequestOfferingId#" onerror="this.onerror=null; this.src=\'/Content/Images/Icons/RequestOffering/RO_Default.png\';">\r\n    </div>\r\n<\/script>\r\n\r\n\r\n\x3c!-- OVERLAY TEMPLATES --\x3e\r\n\x3c!-- KA OVERLAY TEMPLATE --\x3e\r\n<script type="text/x-kendo-tmpl" id="ka-results-template">\r\n    <div class="col-sm-6 col-md-4 col-lg-3">\r\n        <div class="thumbnail-lg">\r\n            <div class="lg-thumb ka-result-thumb">\r\n                <a href="/KnowledgeBase/View/#:Id#" class="link">\r\n                    <img alt="image" class="ka-icon" src="/Content/Images/Icons/Drawer/kb-white.svg">\r\n                </a>\r\n            </div>\r\n            <div class="caption">\r\n                <a class="link" href="/KnowledgeBase/View/#:Id#">#: Title #</a>\r\n                <p class="hidden-xs">#: Description #</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n<\/script>'}),define("CustomSpace/Scripts/viewPanels/serviceCatalog/controller",["require","text!CustomSpace/Scripts/viewPanels/serviceCatalog/view.html"],function(e){var t=e("text!CustomSpace/Scripts/viewPanels/serviceCatalog/view.html");return{template:t,build:function(e,a,n){var i=_.template(t);n($(i(a))),layout=new kendo.Layout("servicecatalog-template"),layout.render($("#service-catalog"));var r=new kendo.data.DataSource({schema:{data:"Data",model:{id:"CategoryId"}},transport:{read:{url:"/ServiceCatalog/GetServiceCatalogWithSOGroup",dataType:"json"}}}),o=kendo.observable({homeBC:!1,scLabel:localization.AllRequests,favRO:!1,topRO:!1,topKA:!1,favROLoaded:!1,topROLoaded:!1,topKALoaded:!1,topsVisible:!1,catalogVisible:!1,taxonomyVisible:!session.forceSearch,loadingVisible:!session.forceSearch,forceSearch:session.forceSearch,dataSource:r,currentView:"page",navs:new kendo.data.DataSource({schema:{data:"Data",model:{id:"CategoryId"}},transport:{read:{url:"/ServiceCatalog/GetServiceCatalogWithCatGroup",dataType:"json",cache:!1}}}),folded:new kendo.data.DataSource({schema:{data:"Data",model:{id:"CategoryId"}},transport:{read:{url:"/ServiceCatalog/GetServiceCatalogWithCatGroup",dataType:"json",cache:!1}}}),favROs:new kendo.data.DataSource({schema:{data:"Data",model:{id:"Id"}},transport:{read:{url:"/ServiceCatalog/GetFavoriteRequestOffering",dataType:"json",cache:!1}}}),topROs:new kendo.data.DataSource({schema:{data:"Data",model:{id:"Id"}},transport:{read:{url:"/ServiceCatalog/GetTopRequestOffering",dataType:"json",cache:!1}}}),topKAs:new kendo.data.DataSource({schema:{model:{id:"ArticleId"}},transport:{read:{url:"/api/v3/Article/GetTopArticlesByPopularity",data:{count:10},dataType:"json",cache:!1}}}),openRequestOffering:function(e){e.preventDefault();var t,a=$(e.target),n=a.data("request");t=a.is("[data-service]")?a.data("service"):a.closest("[data-service]").data("service");var i=a.data("request-url"),r=a.data("request-target-type");_.isUndefined(i)||_.isNull(i)||""==i?window.location="/SC/ServiceCatalog/RequestOffering/"+n+","+t:window.open(i,r)},showCatalog:function(){if(this.get("topKALoaded")&&this.get("topROLoaded")&&this.get("favROLoaded")&&(this.set("topsVisible",!0),this.set("catalogVisible",!0),this.set("loadingVisible",!1),app.lib.getQueryParams()&&!session.forceSearch)){var e=app.lib.getQueryParams();_.isString(e.so)&&o.showSingleService(e.so),_.isString(e.cat)&&(o.showSingleCategory(e.cat),$('a[data-category="'+e.cat+'"]').click())}},forceSearchViewSC:function(){o.hideOverlay(),o.set("taxonomyVisible",!0),o.showCatalog()},toggleFavorite:function(e){function t(){n=a.data("request"),_.each(o.dataSource.data(),function(e){_.each(e.requestofferings,function(e){e.RequestOfferingId==n&&(e.IsFavorite=!e.IsFavorite,o.dataSource.sync())})}),_.each(o.topROs.data(),function(e){e.Id==n&&(e.IsFavorite=!e.IsFavorite,o.topROs.sync())})}e.stopPropagation(),e.preventDefault();var a=$(e.target),n=a.data("request");$.ajax({type:"POST",cache:!1,url:"/SC/ServiceCatalog/ToggleFavorite",data:{requestOfferingId:n,imageElementId:""}}).done(function(e){"True"===e[0]&&(t(),a.toggleClass("fa-star-o"),a.toggleClass("fa-star")),o.favROs.read()})},showSingleService:function(e){o.emptyOverlay();var t=e;_.isObject(e)&&(t=$(e.target).data("service"));var a=$(e.target).closest("ul").siblings("a").data("category");o.setNavFocus(a,t),r.filter({field:"ServiceOfferingId",operator:"equals",value:t});var n=new kendo.View("cat-template",{model:o});layout.showIn("#catalog-area-overlay",n),o.showOverlay()},removeNavFocus:function(){_.each($(".so-link"),function(e){$(e).removeClass("text-black")}),_.each($(".cat-link"),function(e){$(e).removeClass("text-black")})},setNavFocus:function(e,t){o.removeNavFocus(),_.isNull(e)||$(".sc-nav-list").find('a[data-category="'+e+'"]').addClass("text-black"),_.isNull(t)||$(".sc-nav-list").find('a[data-service="'+t+'"]').addClass("text-black")},showSingleCategory:function(e){var t=e;_.isObject(e)&&(t=$(e.target).data("category")),o.setNavFocus(t,null),o.folded.filter({field:"CategoryId",operator:"equals",value:t});var a=new kendo.View('<div data-template="cat-mini-template-single" data-bind="source: folded"></div>',{model:o});o.emptyOverlay(),layout.showIn("#catalog-area-overlay",a),o.showOverlay()},showSearchResultsInOverlay:function(e){function t(){if(i.roResults.length>0){i.totalResults+=i.roResults.length,i.sectionTitle=localizationHelper.localize("MatchingRequestOfferings");var e=new kendo.View('<h4 data-bind="text: sectionTitle"></h4><div data-template="ro-template" data-bind="source: roResults"></div>',{model:i});layout.showIn("#ro-results-wrapper",e)}}function a(){if(i.favResults.length>0){i.totalResults+=i.favResults.length,i.sectionTitle=localizationHelper.localize("MatchingFavorites");var e=new kendo.View('<h4 data-bind="text: sectionTitle"></h4><div data-template="ro-template" data-bind="source: favResults"></div>',{model:i});layout.showIn("#fav-results-wrapper",e)}}function n(){if(i.kaResults.length>0){i.totalResults+=i.kaResults.length,i.sectionTitle=localizationHelper.localize("RelatedKnowledgeArticles");var e=new kendo.View('<h4 data-bind="text: sectionTitle"></h4><div data-template="ka-results-template" data-bind="source: kaResults"></div>',{model:i});layout.showIn("#ka-results-wrapper",e)}}o.emptyOverlay();var i=kendo.observable({roResults:[],favResults:[],kaResults:[],searchText:e.searchString||"",totalResults:0,sectionTitle:"",scope:e.scope,rawResults:e.results,returnToPage:function(){o.hideOverlay(),app.events.publish("serviceCatalogBackToSearch")},openRequestOffering:o.openRequestOffering,toggleFavorite:o.toggleFavorite,forceSearch:o.forceSearch,forceSearchViewSC:o.forceSearchViewSC});switch(i.hasSearchText=!!e.searchString,_.each(i.rawResults,function(e){var t;"Favorite"!=e.Type&&"RequestOffering"!=e.Type||(t={RequestOfferingTitle:e.Title,RequestOfferingId:e.Id,ServiceOfferingId:e.ServiceOfferingId,IsFavorite:e.IsFavorite,RequestOfferingDescription:e.Description,RequestOfferingLinkUrl:e.RequestOfferingLinkUrl,RequestOfferingLinkTargetType:e.RequestOfferingLinkTargetType},"Favorite"==e.Type&&i.favResults.push(t),"RequestOffering"==e.Type&&i.roResults.push(t)),"KnowledgeArticle"==e.Type&&(t={Id:e.Id,Title:e.Title,Description:e.Description},i.kaResults.push(t))}),i.scope){case"AllResults":t(),a(),n();break;case"RequestOffering":t();break;case"Favorite":a();break;case"KnowledgeArticle":n();break;default:return}var r=new kendo.View('<h4 class="strong"><a class="cursor-pointer" data-bind="click: returnToPage"><i class="fa fa-chevron-left"></i> <span data-bind="localize: SearchButton"></span></a> / <span data-bind="text: searchText"></span> <span class="normal">(<span data-bind="text: totalResults"></span>)</span></h4>',{model:i});layout.showIn("#breadcrumb-results-wrapper",r);var s=new kendo.View('<button class="btn btn-primary k-button" data-bind="localize: BrowseServiceCatalogButton, visible: forceSearch, click: forceSearchViewSC"></button>',{model:i});layout.showIn("#footer-results-wrapper",s),o.showOverlay()},showHome:function(e){o.removeNavFocus(),o.hideOverlay(),e.preventDefault(),o.folded.filter({}),r.filter({});var t=new kendo.View('<div data-template="cat-mini-template-all" data-bind="source: folded"></div>',{model:o});o.set("topsVisible",!0),o.set("homeBC",!1),o.set("scLabel",localization.AllRequests),layout.showIn("#catalog-area",t)},showFullCatalog:function(e){o.removeNavFocus(),o.hideOverlay(),e.preventDefault(),o.folded.filter({}),r.filter({});var t=new kendo.View('<div data-template="cat-mini-template-all" data-bind="source: folded"></div>',{model:o});o.set("topsVisible",!1),o.set("homeBC",!0),o.set("scLabel",localization.ServiceCatalog),layout.showIn("#catalog-area",t)},hideOverlay:function(){o.currentView="page",$(".overlay").hide({easing:"easeInOutExpo",duration:500}),$("#servicecat-content").show({easing:"easeInOutExpo",duration:750})},showOverlay:function(){$("#servicecat-content").hide({easing:"easeInOutExpo",duration:500}),$(".overlay").show({easing:"linear",duration:750})},emptyOverlay:function(){o.currentView="overlay",_.each($(".search-results-container").find("div"),function(e){$(e).empty()})}});app.events.subscribe("serviceCatalogFilterFromSearch",function(e,t){o.showSearchResultsInOverlay(t)}),app.events.subscribe("serviceCatalogShowCatalog",function(e,t){o.forceSearchViewSC()});var s=new kendo.View("base-nav-template",{model:o});layout.showIn("#servicecat-nav",s);var l=new kendo.View("catalog-template",{model:o});layout.showIn("#servicecat-content",l);var l=new kendo.View('<div data-template="cat-mini-template-all" data-bind="source: folded"></div>',{model:o});layout.showIn("#catalog-area",l),o.favROs.bind("change",function(e){this.data().length>0&&o.set("favRO",!0),o.set("favROLoaded",!0),session.forceSearch||o.showCatalog()}),o.topROs.bind("change",function(e){this.data().length>0&&o.set("topRO",!0),o.set("topROLoaded",!0),session.forceSearch||o.showCatalog()}),o.topKAs.bind("change",function(e){this.data().length>0&&o.set("topKA",!0),o.set("topKALoaded",!0),session.forceSearch||o.showCatalog()})}}}),define("text!viewPanels/alternateSC/view.html",[],function(){
return'<div id="service-catalog"></div>\r\n\r\n\r\n\x3c!-- BASE STRUCTURE TEMPLATE --\x3e\r\n<script type="text/x-kendo-template" id="servicecatalog-template">\r\n    <div class="service-catalog-content">\r\n        <div class="row">\r\n            <div class="col-md-12 service-request-body alt">\r\n                <div id="servicecat-content"></div>\r\n                \x3c!-- OVERLAY TEMPLATE --\x3e\r\n                <div class="overlay">\r\n                    <div class="search-results-container">\r\n                        <div class="row" id="breadcrumb-results-wrapper"></div>\r\n                        <div class="row sc-item-list" id="ka-results-wrapper"></div>\r\n                        <div class="row sc-item-list" id="fav-results-wrapper"></div>\r\n                        <div class="row sc-item-list" id="ro-results-wrapper"></div>\r\n                        <div class="row sc-item-list" id="footer-results-wrapper"></div>\r\n                        <div class="row" id="catalog-area-overlay"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n<\/script>\r\n\r\n\x3c!-- MAIN CATALOG TEMPLATE--\x3e\r\n<script type="text/x-kendo-tmpl" id="catalog-template">\r\n    <h3 data-bind="visible: loadingVisible, localize: Loading"></h3>\r\n    <div class="catalog-content">\r\n\r\n        \x3c!-- FAVORITES/TOP LISTS--\x3e\r\n        <div class="row blocks" data-bind="visible:topsVisible">\r\n            <div class="col-sm-4">\r\n                <div class="block sc-item-list alt-top-list" data-bind="visible: topKA">\r\n                    <h4 class="block-title" data-bind="localize: TopKnowledgeArticles"></h4>\r\n\r\n                    <div data-template="top-ka" data-bind="source: topKAs"></div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="col-sm-4">\r\n                <div class="block sc-item-list alt-top-list" data-bind="visible: favRO">\r\n                    <h4 class="block-title" data-bind="localize: FavoriteRequests"></h4>\r\n\r\n                    <div data-template="topfav-request-offerings" data-bind="source: favROs"></div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="col-sm-4">\r\n                <div class="block sc-item-list alt-top-list" data-bind="visible: topRO">\r\n                    <h4 class="block-title" data-bind="localize: TopRequests"></h4>\r\n\r\n                    <div data-template="topfav-request-offerings" data-bind="source: topROs"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        \x3c!-- MAIN PAGE CATALOG--\x3e\r\n        <div data-bind="visible: catalogVisible">\r\n            <h3>\r\n                <span data-bind="text: scLabel"></span>\r\n            </h3>\r\n            <div id="catalog-area"></div>\r\n        </div>\r\n    </div>\r\n<\/script>\r\n\r\n\x3c!-- TOP/FAV RO TEMPLATES--\x3e\r\n<script type="text/x-kendo-template" id="topfav-request-offerings">\r\n    <div class="media sc-top-item top-#:Title.replace(/ /g,\'-\').toLowerCase() #">\r\n        #if(!_.isNull(LinkUrl)){#\r\n        <a class="pull-left media-link" href="#:LinkUrl#" target="#:LinkTargetType#">\r\n            <img class="sc-top-item-image" src="/ServiceCatalog/GetRequestOfferingImg/#:Id#" onerror="this.onerror=null; this.src=\'/Content/Images/Icons/RequestOffering/RO_Default.png\';">\r\n            <i class=""></i>\r\n        </a>\r\n        <div class="media-body sc-top-item-body">\r\n            <h5 class="media-heading"><a href="#:LinkUrl#" target="#:LinkTargetType#"><span class="sc-top-item-title" data-request="#:Id#" data-bind="text: Title"></span><small class="sc-top-item-desc">#= BriefDescription != null ? BriefDescription :\'\' #</small></a></h5>\r\n        </div>\r\n        #} else {#\r\n        <a class="pull-left media-link" href="/SC/ServiceCatalog/RequestOffering/#:Id#,#:ServiceInfo.Id#">\r\n            <img class="sc-top-item-image" src="/ServiceCatalog/GetRequestOfferingImg/#:Id#" onerror="this.onerror=null; this.src=\'/Content/Images/Icons/RequestOffering/RO_Default.png\';">\r\n            <i class=""></i>\r\n        </a>\r\n        <div class="media-body sc-top-item-body">\r\n            <h5 class="media-heading"><a href="/SC/ServiceCatalog/RequestOffering/#:Id#,#:ServiceInfo.Id#"><span class="sc-top-item-title" data-request="#:Id#" data-bind="text: Title"></span><small class="sc-top-item-desc">#= BriefDescription != null ? BriefDescription :\'\' #</small></a></h5>\r\n        </div>\r\n        # } #\r\n    </div>\r\n<\/script>\r\n\r\n\x3c!-- TOP KA TEMPLATES--\x3e\r\n<script type="text/x-kendo-template" id="top-ka">\r\n    <div class="media sc-top-item ka-#:Title.replace(/ /g,\'-\').toLowerCase() #">\r\n        <a class="pull-left media-link" href="/KnowledgeBase/View/#:ArticleId#">\r\n            <img alt="image" class="sc-top-item-image ka-icon" src="/Content/Images/Icons/Drawer/kb-white.svg">\r\n            <i class=""></i>\r\n        </a>\r\n        <div class="media-body sc-top-item-body">\r\n            <h5 class="media-heading"><a href="/KnowledgeBase/View/#:ArticleId#"><span class="sc-top-item-title" data-bind="text: Title"></span><small class ="sc-top-item-desc">#= Abstract != null ? Abstract :\'\' #</small></a></h5>\r\n        </div>\r\n    </div>\r\n<\/script>\r\n\r\n\x3c!-- ALT CAT TEMPLATE - All Categories --\x3e\r\n<script type="text/x-kendo-tmpl" id="cat-alt-template-all">\r\n    <div class="cat cat-#:Category.replace(/ /g,\'-\').toLowerCase() #">\r\n        <h4 id="#:CategoryId#" data-bind="text: Category"></h4>\r\n        <div class="row">\r\n            # for (var i = 0; i < services.length; i++) { #\r\n            <div class="col-md-12">\r\n                <h4 id="#:services[i].ServiceOfferingId#" data-service="#:services[i].ServiceOfferingId#">#: services[i].Service #</h4>\r\n                <div class="row sc-item-list">\r\n                    # for (var j = 0; j < services[i].requestofferings.length; j++) { #\r\n                    <div id="#:services[i].requestofferings[j].RequestOfferingId#" class="media sc-item ro-#:services[i].requestofferings[j].RequestOfferingTitle.replace(/ /g,\'-\').toLowerCase() #" data-title="#:services[i].requestofferings[j].RequestOfferingTitle#" data-desc="#:services[i].requestofferings[j].RequestOfferingDescription#">\r\n                        <a class="pull-left media-link">\r\n                            <img class="cursor-pointer sc-item-image"\r\n                                 data-request-url="#:services[i].requestofferings[j].RequestOfferingLinkUrl#"\r\n                                 data-request-target-type="#:services[i].requestofferings[j].RequestOfferingLinkTargetType#"\r\n                                 data-request="#:services[i].requestofferings[j].RequestOfferingId#"\r\n                                 data-service="#:services[i].ServiceOfferingId#"\r\n                                 data-bind=" click: openrequestoffering"\r\n                                 src="/ServiceCatalog/GetRequestOfferingImg/#:services[i].requestofferings[j].RequestOfferingId#"\r\n                                 onerror="this.onerror=null; this.src=\'/Content/Images/Icons/RequestOffering/RO_Default.png\';">\r\n                            <i class="fa #= services[i].requestofferings[j].IsFavorite ? \'fa-star\' :\'fa-star-o\' #"\r\n                               data-request="#:services[i].requestofferings[j].RequestOfferingId#"\r\n                               data-bind="click: toggleFavorite"></i>\r\n                        </a>\r\n                        <div class="media-body sc-item-body">\r\n                            <h5 class="media-heading">\r\n                                <a>\r\n                                    <span class="cursor-pointer sc-item-title"\r\n                                          data-request-url="#:services[i].requestofferings[j].RequestOfferingLinkUrl#"\r\n                                          data-request-target-type="#:services[i].requestofferings[j].RequestOfferingLinkTargetType#"\r\n                                          data-request="#:services[i].requestofferings[j].RequestOfferingId#"\r\n                                          data-service="#:services[i].ServiceOfferingId#"\r\n                                          data-bind="click: openRequestOffering">\r\n                                        #: services[i].requestofferings[j].RequestOfferingTitle#\r\n                                    </span>\r\n                                </a>\r\n                                \x3c!-- for html encode--\x3e\r\n                                <small class="sc-item-desc">#: services[i].requestofferings[j].RequestOfferingDescription#</small>\r\n                            </h5>\r\n                        </div>\r\n                    </div>\r\n                    # } #\r\n                </div>\r\n            </div>\r\n            # } #\r\n        </div>\r\n    </div>\r\n<\/script>\r\n<script type="text/x-kendo-tmpl" id="cat-alt-template-all-old">\r\n    <div class="cat cat-#:Category.replace(/ /g,\'-\').toLowerCase() #">\r\n        <h4 id="#:CategoryId#" data-bind="text: Category"></h4>\r\n        <div class="row" data-template="so-alt-template" data-bind="source: services"></div>\r\n    </div>\r\n<\/script>\r\n\r\n\x3c!-- ALT SO TEMPLATE--\x3e\r\n<script type="text/x-kendo-tmpl" id="so-alt-template">\r\n    <div class="col-md-12">\r\n        <h4 id="#:ServiceOfferingId#" data-service="#:ServiceOfferingId#">#:Service #</h4>\r\n        <div class="row sc-item-list" data-service="#:ServiceOfferingId#" data-template="ro-alt-template" data-bind="source: requestofferings"></div>\r\n    </div>\r\n<\/script>\r\n\r\n\x3c!-- ALT OVERLAY TEMPLATE (needed this for correct position of SOid for link to work correctly)--\x3e\r\n<script type="text/x-kendo-tmpl" id="overlay-alt-template">\r\n    <div class="col-md-12">\r\n        <div class="row sc-item-list" data-service="#:ServiceOfferingId#" data-template="ro-alt-template" data-bind="source: this"></div>\r\n    </div>\r\n<\/script>\r\n\r\n\x3c!-- ALT RO TEMPLATE--\x3e\r\n<script type="text/x-kendo-tmpl" id="ro-alt-template">\r\n    <div id="#:RequestOfferingId#" class="media sc-item ro-#:RequestOfferingTitle.replace(/ /g,\'-\').toLowerCase() #" data-title="#:RequestOfferingTitle#" data-desc="#:RequestOfferingDescription#">\r\n        <a class="pull-left media-link">\r\n            <img class="cursor-pointer sc-item-image"\r\n                 data-request-url="#:RequestOfferingLinkUrl#"\r\n                 data-request-target-type="#:RequestOfferingLinkTargetType#"\r\n                 data-request="#:RequestOfferingId#"\r\n                 data-bind="click: openRequestOffering"\r\n                 src="/ServiceCatalog/GetRequestOfferingImg/#:RequestOfferingId#"\r\n                 onerror="this.onerror=null; this.src=\'/Content/Images/Icons/RequestOffering/RO_Default.png\';">\r\n            <i class="fa #= IsFavorite ? \'fa-star\' :\'fa-star-o\' #"\r\n               data-request="#:RequestOfferingId#"\r\n               data-bind="click: toggleFavorite"></i>\r\n        </a>\r\n        <div class="media-body sc-item-body">\r\n            <h5 class="media-heading">\r\n                <a>\r\n                    <span class="cursor-pointer sc-item-title"\r\n                          data-request-url="#:RequestOfferingLinkUrl#"\r\n                          data-request-target-type="#:RequestOfferingLinkTargetType#"\r\n                          data-request="#:RequestOfferingId#"\r\n                          data-bind="click: openRequestOffering, text: RequestOfferingTitle">\r\n                    </span>\r\n                </a>\r\n                \x3c!-- for html encode--\x3e\r\n                <small class="sc-item-desc">#=RequestOfferingDescription#</small>\r\n            </h5>\r\n        </div>\r\n    </div>\r\n<\/script>\r\n\r\n\x3c!-- OVERLAY TEMPLATES --\x3e\r\n\x3c!-- KA OVERLAY TEMPLATE --\x3e\r\n<script type="text/x-kendo-tmpl" id="ka-results-template">\r\n\r\n    <div class="media sc-item ka-#:Title.replace(/ /g,\'-\').toLowerCase() #" title="#:Title#">\r\n\r\n        <a class="pull-left media-link" href="/KnowledgeBase/View/#:Id#">\r\n            <img alt="image" class="ka-icon sc-item-image" src="/Content/Images/Icons/Drawer/kb-white.svg">\r\n            <i class=""></i>\r\n        </a>\r\n        <div class="media-body sc-item-body">\r\n            <h5 class="media-heading"><a class="link" href="/KnowledgeBase/View/#:Id#"><span class="sc-item-title" data-bind=" text: Title"></span><small class="sc-item-desc" data-bind="text: Description"></small></a></h5>\r\n        </div>\r\n    </div>\r\n<\/script>'}),define("viewPanels/alternateSC/controller",["require","text!viewPanels/alternateSC/view.html"],function(e){var t=e("text!viewPanels/alternateSC/view.html");return{template:t,build:function(e,a,n){var i=_.template(t);n($(i(a))),layout=new kendo.Layout("servicecatalog-template"),layout.render($("#service-catalog"));var r=kendo.observable({homeBC:!1,scLabel:localization.AllRequests,favRO:!1,topRO:!1,topKA:!1,favROLoaded:!1,topROLoaded:!1,topKALoaded:!1,topsVisible:!1,catalogVisible:!1,loadingVisible:!session.forceSearch,forceSearch:session.forceSearch,currentView:"page",folded:new kendo.data.DataSource({schema:{data:"Data",model:{id:"CategoryId"}},transport:{read:{url:"/ServiceCatalog/GetServiceCatalogWithCatGroup",dataType:"json",cache:!1}}}),favROs:new kendo.data.DataSource({schema:{data:"Data",model:{id:"Id"}},transport:{read:{url:"/ServiceCatalog/GetFavoriteRequestOffering",dataType:"json",cache:!1}}}),topROs:new kendo.data.DataSource({schema:{data:"Data",model:{id:"Id"}},transport:{read:{url:"/ServiceCatalog/GetTopRequestOffering",dataType:"json",cache:!1}}}),topKAs:new kendo.data.DataSource({schema:{model:{id:"ArticleId"}},transport:{read:{url:"/api/v3/Article/GetTopArticlesByPopularity",data:{count:10},dataType:"json",cache:!1}}}),openRequestOffering:function(e){e.preventDefault();var t,a=$(e.target),n=a.data("request");t=a.is("[data-service]")?a.data("service"):a.closest("[data-service]").data("service");var i=a.data("request-url"),r=a.data("request-target-type");_.isNull(i)||""==i?window.location="/SC/ServiceCatalog/RequestOffering/"+n+","+t:window.open(i,r)},showCatalog:function(){if(this.get("topKALoaded")&&this.get("topROLoaded")&&this.get("favROLoaded")&&(this.set("topsVisible",!0),this.set("catalogVisible",!0),this.set("loadingVisible",!1),app.lib.getQueryParams()&&!session.forceSearch)){var e=app.lib.getQueryParams(),t=!1;switch(!0){case _.isString(e.cat):t=e.cat;break;case _.isString(e.so):t=e.so;break;case _.isString(e.ro):t=e.ro}t&&_.defer(function(){$("html, body").animate({scrollTop:$("#"+t).offset().top-$(".navbar-fixed-top").height()},100)})}},toggleFavorite:function(e){function t(){n=a.data("request"),_.each(r.topROs.data(),function(e){e.Id==n&&(e.IsFavorite=!e.IsFavorite,r.topROs.sync())})}e.stopPropagation(),e.preventDefault();var a=$(e.target),n=a.data("request");$.ajax({type:"POST",cache:!1,url:"/SC/ServiceCatalog/ToggleFavorite",data:{requestOfferingId:n,imageElementId:""}}).done(function(e){"True"===e[0]&&(t(),a.toggleClass("fa-star-o"),a.toggleClass("fa-star")),r.favROs.read()})},forceSearchViewSC:function(){r.hideOverlay(),r.showCatalog()},showSearchResultsInOverlay:function(e){function t(){if(i.roResults.length>0){i.totalResults+=i.roResults.length,i.sectionTitle=localizationHelper.localize("MatchingRequestOfferings");var e=new kendo.View('<h4 data-bind="text: sectionTitle"></h4><div data-template="overlay-alt-template" data-bind="source: roResults"></div>',{model:i});layout.showIn("#ro-results-wrapper",e)}}function a(){if(i.favResults.length>0){i.totalResults+=i.favResults.length,i.sectionTitle=localizationHelper.localize("MatchingFavorites");var e=new kendo.View('<h4 data-bind="text: sectionTitle"></h4><div data-template="overlay-alt-template" data-bind="source: favResults"></div>',{model:i});layout.showIn("#fav-results-wrapper",e)}}function n(){if(i.kaResults.length>0){i.totalResults+=i.kaResults.length,i.sectionTitle=localizationHelper.localize("RelatedKnowledgeArticles");var e=new kendo.View('<h4 data-bind="text: sectionTitle"></h4><div data-template="ka-results-template" data-bind="source: kaResults"></div>',{model:i});layout.showIn("#ka-results-wrapper",e)}}r.emptyOverlay();var i=kendo.observable({roResults:[],favResults:[],kaResults:[],searchText:e.searchString||"",totalResults:0,sectionTitle:"",scope:e.scope,rawResults:e.results,returnToPage:function(){r.hideOverlay(),app.events.publish("serviceCatalogBackToSearch")},openRequestOffering:r.openRequestOffering,toggleFavorite:r.toggleFavorite,forceSearch:r.forceSearch,forceSearchViewSC:r.forceSearchViewSC});switch(i.hasSearchText=!!e.searchString,_.each(i.rawResults,function(e){var t;"Favorite"!=e.Type&&"RequestOffering"!=e.Type||(t={RequestOfferingTitle:e.Title,RequestOfferingId:e.Id,ServiceOfferingId:e.ServiceOfferingId,IsFavorite:e.IsFavorite,RequestOfferingDescription:e.Description,RequestOfferingLinkUrl:e.RequestOfferingLinkUrl,RequestOfferingLinkTargetType:e.RequestOfferingLinkTargetType},"Favorite"==e.Type&&i.favResults.push(t),"RequestOffering"==e.Type&&i.roResults.push(t)),"KnowledgeArticle"==e.Type&&(t={Id:e.Id,Title:e.Title,Description:e.Description},i.kaResults.push(t))}),i.scope){case"AllResults":t(),a(),n();break;case"RequestOffering":t();break;case"Favorite":a();break;case"KnowledgeArticle":n();break;default:return}var o=new kendo.View('<h4 class="strong"><a class="cursor-pointer" data-bind="click: returnToPage"><i class="fa fa-chevron-left"></i> <span data-bind="localize: SearchButton"></span></a> / <span data-bind="text: searchText"></span> <span class="normal">(<span data-bind="text: totalResults"></span>)</span></h4>',{model:i});layout.showIn("#breadcrumb-results-wrapper",o);var s=new kendo.View('<button class="btn btn-primary k-button" data-bind="localize: BrowseServiceCatalogButton, visible: forceSearch, click: forceSearchViewSC"></button>',{model:i});layout.showIn("#footer-results-wrapper",s),r.showOverlay()},showHome:function(e){r.removeNavFocus(),r.hideOverlay(),e.preventDefault(),r.folded.filter({}),items.filter({});var t=new kendo.View('<div data-template="cat-alt-template-all" data-bind="source: folded"></div>',{model:r});r.set("topsVisible",!0),r.set("homeBC",!1),r.set("scLabel",localization.AllRequests),layout.showIn("#catalog-area",t)},showFullCatalog:function(e){r.removeNavFocus(),r.hideOverlay(),e.preventDefault(),r.folded.filter({}),items.filter({});var t=new kendo.View('<div data-template="cat-alt-template-all" data-bind="source: folded"></div>',{model:r});r.set("topsVisible",!1),r.set("homeBC",!0),r.set("scLabel",localization.ServiceCatalog),layout.showIn("#catalog-area",t)},hideOverlay:function(){r.currentView="page",$(".overlay").hide({easing:"easeInOutExpo",duration:500}),$("#servicecat-content").show({easing:"easeInOutExpo",duration:750})},showOverlay:function(){$("#servicecat-content").hide({easing:"easeInOutExpo",duration:500}),$(".overlay").show({easing:"linear",duration:750})},emptyOverlay:function(){r.currentView="overlay",_.each($(".search-results-container").find("div"),function(e){$(e).empty()})}});app.events.subscribe("serviceCatalogFilterFromSearch",function(e,t){r.showSearchResultsInOverlay(t)}),app.events.subscribe("serviceCatalogShowCatalog",function(e,t){r.forceSearchViewSC()});var o=new kendo.View("catalog-template",{model:r});layout.showIn("#servicecat-content",o);var o=new kendo.View('<div data-template="cat-alt-template-all" data-bind="source: folded"></div>',{model:r});layout.showIn("#catalog-area",o),r.favROs.bind("change",function(e){this.data().length>0&&r.set("favRO",!0),r.set("favROLoaded",!0),session.forceSearch||r.showCatalog()}),r.topROs.bind("change",function(e){this.data().length>0&&r.set("topRO",!0),r.set("topROLoaded",!0),session.forceSearch||r.showCatalog()}),r.topKAs.bind("change",function(e){this.data().length>0&&r.set("topKA",!0),r.set("topKALoaded",!0),session.forceSearch||r.showCatalog()})}}}),define("grids/structure/defaultConfiguration/controller",["require"],function(e){return{build:function(e,t,a){var n={autoBind:!1,columnResizeHandleWidth:4};if(!_.isUndefined(e.grid.options)){var i=e.grid.options;_.isUndefined(i.reorderable)&&(n.reorderable=!0),_.isUndefined(i.scrollable)&&(n.scrollable=!1),_.isUndefined(i.selectable)&&(n.selectable="Single, Row"),_.isUndefined(i.resizable)&&(n.resizable=!0),_.isUndefined(i.pageable)&&(n.pageable={pageSizes:[10,20,50,100],pageSize:20,buttonCount:10,messages:{empty:localization.Empty,of:localization.Of,first:localization.First,previous:localization.Previous,next:localization.Next,last:localization.Last,itemsPerPage:localization.ItemsPerPage}}),(_.isUndefined(i.filterable)||1==i.filterable)&&(n.filterable={extra:!0,messages:{info:localization.Showitemswithvaluethat,and:localization.And,or:localization.Or,filter:localization.Filter,clear:localization.Clear},operators:{string:{eq:localizationHelper.localize("Isequalto"),neq:localizationHelper.localize("Isnotequalto"),contains:localizationHelper.localize("Contains"),doesnotcontain:localizationHelper.localize("DoesNotContain"),startswith:localizationHelper.localize("Startswith"),endswith:localizationHelper.localize("Endswith")},number:{eq:localizationHelper.localize("Isequalto"),neq:localizationHelper.localize("Isnotequalto"),gt:localizationHelper.localize("GreaterThan"),gte:localizationHelper.localize("GreaterOrEqual"),lt:localizationHelper.localize("LessThan"),lte:localizationHelper.localize("LessOrEqual")},SLOStatus:{contains:localization.Contains},anchor:{eq:localizationHelper.localize("Isequalto"),neq:localizationHelper.localize("Isnotequalto"),contains:localizationHelper.localize("Contains"),doesnotcontain:localizationHelper.localize("DoesNotContain"),startswith:localizationHelper.localize("Startswith"),endswith:localizationHelper.localize("Endswith")}}}),_.isUndefined(i.groupable)&&(n.groupable={messages:{empty:localization.Dragacolumnheader}}),_.isUndefined(i.sortable)&&(n.sortable={mode:"multiple"}),_.isUndefined(i.columnMenu)&&(n.columnMenu={sortable:!0,filterable:!0,columns:!0,messages:{columns:localization.ChooseColumns,filter:localization.Filter,sortAscending:localization.SortAscending,sortDescending:localization.SortDescending}})}t?$.extend(!0,t,n):t=n,t.editable&&(t.selectable=!1),e.grid.options=t,a(t)}}}),define("grids/structure/events/controller",["require"],function(e){return{build:function(e,t,a){e.events={handleRowClick:function(a,n){function i(e){"Activity"==l.WorkItemType?$.get("/grid/GetActivityParentWorkItem",{id:l.BaseId},function(t){l.ParentWorkItemType=t.ParentWorkItemType,l.ParentWorkItemId=t.ParentWorkItemId,r(e),window.location=s}):r(e)}function r(t){if(t.indexOf("System.WorkItem")>-1&&(s="/"+t.split(".").pop()+"/Edit/"+d+"/",t.indexOf("Activity")>-1))if(_.isUndefined(e.grid.GridSubType))s="/Activity/Edit/"+d;else{var a="";switch(e.grid.GridSubType){case"myapprovals":a="/ReviewActivity/Approval/"+d;break;case"myapprovals":a="/ManualActivity/Complete/"+d;break;default:a="/Activity/Edit/"+d}s=a}}var o,s=!1,l=n.dataItem(a),d=l.Id;if(_.isUndefined(l.WorkItemType))return"ConfigItem"==e.grid.GridType?void e.events.openModal(l):"WarrantyContract"==e.grid.GridType?void(location="/AssetManagement/Contract/Warranty/Edit/"+l.BaseId):"LeaseContract"==e.grid.GridType?void(location="/AssetManagement/Contract/Lease/Edit/"+l.BaseId):"SupportAndMaintenanceContract"==e.grid.GridType?void(location="/AssetManagement/Contract/SupportandMaintenance/Edit/"+l.BaseId):"HardwareAsset"==e.grid.GridType?void(location="/AssetManagement/HardwareAsset/Edit/"+l.BaseId):"RequestOffering"==e.grid.GridType?void(location="/ServiceCatalog/RequestOffering/"+l.Id+","+l.ServiceInfo.Id):"KnowledgeArticle"==e.grid.GridType?void(location="/KnowledgeBase/View/"+l.ArticleId+"?seletedTab=enduser"):"CostCenter"==e.grid.GridType?void(location="/AssetManagement/Administration/CostCenter/Edit/"+l.BaseId):"Location"==e.grid.GridType?void(location="/AssetManagement/Administration/Location/Edit/"+l.BaseId):"NoticeEvent"==e.grid.GridType?void(location="/AssetManagement/Administration/NoticeEvent/Edit/"+l.BaseId):"Organization"==e.grid.GridType?void(location="/AssetManagement/Administration/Organization/Edit/"+l.BaseId):"Standard"==e.grid.GridType?void(location="/AssetManagement/Administration/Standard/Edit/"+l.BaseId):"Subnet"==e.grid.GridType?void(location="/AssetManagement/Administration/Subnet/Edit/"+l.BaseId):"Vendor"==e.grid.GridType?void(location="/AssetManagement/Administration/Vendor/Edit/"+l.BaseId):"CatalogItem"==e.grid.GridType?void(location="/AssetManagement/Administration/CatalogItem/Edit/"+l.BaseId):"License"==e.grid.GridType||"Licence"==e.grid.GridType?void(location="/AssetManagement/Administration/License/Edit/"+l.BaseId):"SoftwareAsset"==e.grid.GridType?void(location="/AssetManagement/SoftwareAsset/Edit/"+l.BaseId):"PurchaseOrder"==e.grid.GridType?void(location="/AssetManagement/Administration/PurchaseOrder/Edit/"+l.BaseId):"Purchase"==e.grid.GridType?void(location="/AssetManagement/Administration/Purchase/Edit/"+l.BaseId):"Invoice"==e.grid.GridType?void(location="/AssetManagement/Administration/Invoice/Edit/"+l.BaseId):"Consumable"==e.grid.GridType?void(location="/AssetManagement/Administration/Consumables/Edit/"+l.BaseId):"Announcement"==e.grid.GridType?void(location="/Administration/Announcement/Edit/"+l.Id):"PromotedView"==e.grid.GridType?void 0:"Localization"==e.grid.GridType?void 0:"EditableKnowledgeArticle"==e.grid.GridType?void(location="/KnowledgeBase/View/"+l.ArticleId):void kendo.ui.ExtAlertDialog.show({title:localization.ErrorDescription,icon:"fa fa-frown-o",message:"Error in row click event. Record Type was not found."});o=l.WorkItemType,"Activity"==l.WorkItemType&&(o=l.WorkItemTypeClass);var c,u=!0;if(_.isUndefined(t)||_.find(t,function(e){c=e.rowClicks,u=!(c.length>0&&_.find(c,function(e){return _.keys(e)[0]===o.split(".").pop()}))}),u)i(o);else{_.find(t,function(e){return!_.isUndefined(e.rowClick)});_.each(c,function(e){var t=_.keys(e)[0];if(o.split(".").pop()==t){_.isUndefined(e[t].actionUrl)||(s=e[t].actionUrl+d+"/");var a=app.lib.getFunctionFromString(e[t].actionFunction);if(_.isUndefined(a))i(o);else try{s=a(l,n,s),_.isString(s)||(s=!1)}catch(e){return kendo.ui.ExtAlertDialog.show({title:localization.ErrorDescription,icon:"fa fa-frown-o",message:"Custom function error:    "+e})}}})}s&&($("body").css("cursor","progress"),e.fromQueryBuilder&&!e.isSavedQuery?(window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),window.open(window.location.origin+s,"_blank")):window.location=s)},openModal:function(e){var t=$("<div>");t.appendTo("body");var a=t.kendoCiresonWindow({title:"",width:550,height:500,actions:["Close"]}).data("kendoWindow");a.refresh({url:"/Search/ObjectViewer",data:{id:e.Id}}),t.find(".k-content").html("<div style='padding: 55px'>Loading...</div>"),a.title(e.DisplayName).center().open()}},e.builtinEvents={edit:function(e){e.model.isNew()||0==$(e.container).data("editable")&&$(e.container).find("input").attr("disabled","disabled").addClass("k-state-disabled")}},a()}}}),define("text!grids/structure/toolbar/view.html",[],function(){return'<script type="text/x-kendo-template" id="toolbarTemplate">\r\n    <div class="pull-right">\r\n        <label for="locale" class="control-label">\r\n            <span>#: localizationHelper.localize("SelectLocale") #</span>\r\n        </label>\r\n        <input id="locale" />\r\n    </div>\r\n    <div class="">\r\n        <label class=\'checkbox checkbox-primary\'>\r\n            <input type=\'checkbox\' id=\'showAlreadyTranslated\'>\r\n            <span class="checkbox-label">#: localizationHelper.localize("ShowAlreadyTranslated") #</span>\r\n        </label>\r\n    </div>\r\n<\/script>\r\n\r\n<script type="text/x-kendo-template" id="myWorktoolbarTemplate">\r\n    <div class="clearfix">\r\n        <ul class="nav nav-pills toolbar-tabs">\r\n            <li class="active"><a data-subtype="myworkitems">#: localizationHelper.localize("WorkItem") #</a></li>\r\n            <li><a data-subtype="myapprovals">#: localizationHelper.localize("Approval") #</a></li>\r\n            <li><a data-subtype="myactivities">#: localizationHelper.localize("Activities") #</a></li>\r\n            <li><a data-subtype="mymanualactivities">#: localizationHelper.localize("ManualActivities") #</a></li>\r\n        </ul>\r\n        <input type=\'hidden\' id=\'gridViewId\' value=\'myworkitems\' />\r\n    </div>\r\n    <div>\r\n        <a class="k-button pull-right btn btn-default btn-clear-grid-filters">#: localizationHelper.localize("ResetGridFilters") #</a>\r\n        <a class="k-button pull-right btn btn-default btn-grid-export"><i class="fa fa-file-excel-o btn-mywork-export"></i>#: localizationHelper.localize("Export") #</a>\r\n        <label class="checkbox checkbox-primary" id="toggleActivities">\r\n            <input type="checkbox" data-checked="false">\r\n            <input id="showActivitiesInGrid" type="hidden" value="false"><span class="checkbox-label">#: localizationHelper.localize("ShowActivities") #</span>\r\n        </label>\r\n        <label class="checkbox checkbox-primary" id="toggleInactive">\r\n            <input type="checkbox" data-checked="false">\r\n            <input id="showInActivesInGrid" type="hidden" value="false"><span class="checkbox-label">#: localizationHelper.localize("ShowInactiveWorkItems") #</span>\r\n        </label>\r\n    </div>\r\n<\/script>\r\n\r\n'}),define("grids/structure/toolbar/controller",["require","text!grids/structure/toolbar/view.html"],function(e){var t,a=e("text!grids/structure/toolbar/view.html");return{template:a,build:function(e,n,i){function r(){var e=$("#"+t).data("kendoGrid");$(e).find(".k-toolbar").siblings().hide(),$("#objectViewerWindow").kendoCiresonWindow({width:"550px",height:"400px"}),$("#searchText").keypress(function(t){if("13"==(t.keyCode?t.keyCode:t.which))return s(e),!1}),$("#ObjectClassCombo").kendoComboBox({index:0,dataSource:{transport:{prefix:"",read:{url:"/ConfigItems/GetConfigItemSearchClasses"}},schema:{errors:"Errors"}},dataTextField:"Item2",dataValueField:"Item1",filter:"contains"}),$(".ci-search").on("click",function(){s(e)})}function o(){var e=$("[data-control-id='"+t+"']").data("kendoListView");$("#objectViewerWindow").kendoCiresonWindow({width:"100%",height:"100%"}),$(".mobilegrid__search__input").keypress(function(t){if("13"==(t.keyCode?t.keyCode:t.which))return s(e),!1}),$("#ObjectClassCombo").kendoComboBox({index:0,dataSource:{transport:{prefix:"",read:{url:"/ConfigItems/GetConfigItemSearchClasses"}},schema:{errors:"Errors"}},dataTextField:"Item2",dataValueField:"Item1",filter:"contains"}),$(".mobilegrid__search__btn").on("click",function(){s(e)})}function s(e){var t,a=$("#ObjectClassCombo").data("kendoComboBox");null!=(t=null==a?null:a.value())&&(0==t.length?kendo.ui.ExtAlertDialog.show({title:localization.Warning,message:localization.SelectClassAlert}):(e.dataSource.read(),$(e).find(".k-toolbar").siblings().show()))}function l(){var e=$("#"+t).data("kendoGrid"),a=function(t){if($("#gridViewId").val(t),app.isMobile()){$(".mobilegrid").data("kendoListView").dataSource.read()}else e.dataSource.read()};_.each($(".nav-pills li > a"),function(e){var t=$(e);t.click(function(){if(!t.parent().hasClass("active")){t.parent().toggleClass("active"),t.parent().siblings().toggleClass("active");var e=$(this).attr("data-subtype");a(e)}})})}function d(){$(".btn-clear-grid-filters").on("click",function(){app.storage.gridStates.remove("state_"+t),document.location.reload(!1)})}function c(){$("input[name=mobileWiGridSearchText]").keypress(function(e){13===e.keyCode&&app.lib.filterMobileWiGrid(t)})}function u(){
var a=$("#"+t).data("kendoGrid"),n=function(e){if($("#gridViewId").val(e),app.isMobile()){$(".mobilegrid").data("kendoListView").dataSource.read()}else _.each(a.options.columns,function(e){"Title"===e.field&&("myapprovals"==app.gridUtils.GridSubType||"mymanualactivities"==app.gridUtils.GridSubType?e.template=e.template.replace("highlight-default-icon","").replace("ra-icon","ra-icon highlight-default-icon"):e.template=e.template.replace("highlight-default-icon","").replace("wi-icon","wi-icon highlight-default-icon"))}),"myapprovals"===app.gridUtils.GridSubType?a.showColumn("Decision"):a.hideColumn("Decision"),a.dataSource.read(),a.refresh()},i=function(e){"myworkitems"==e?($("#toggleActivities").show(),$("#toggleInactive").show()):$("#toggleActivities").hide()};_.each($(".nav-pills li > a"),function(t){var a=$(t);a.click(function(){a.parent().toggleClass("active"),a.parent().siblings().removeClass("active"),e.grid.GridSubType=$(this).attr("data-subtype"),app.gridUtils.GridSubType=e.grid.GridSubType,i(e.grid.GridSubType),n(e.grid.GridSubType)})})}function p(){$(".btn-grid-export").on("click",function(e){var a=$("#"+t).getKendoGrid(),n=$(".page_title").text()+".xlsx";a.options.excel={fileName:n,allPages:!0,proxyURL:""},a.saveAsExcel()})}e.grid.columns=_.map(e.grid.columns,function(e){return e.hasOwnProperty("editable")&&(e.editable=function(){return e.editable}),e}),t=e.containerId||e.gridId;var m={toolbar:[],events:[]},f=0;e.grid.options.filterable&&!app.isMobileDevice()&&(e.fromQueryBuilder?e.isSavedQuery&&(app.events.subscribe("queryBuilderGridReady",function(){d(),p()}),m.toolbar.push({name:localization.ResetGridFilters,template:"<a class='k-button pull-right btn btn-default btn-clear-grid-filters'>"+localization.ResetGridFilters+"</a>"}),m.toolbar.push({name:localization.ExportToExcel,template:"<a  class='k-button pull-right btn btn-default btn-grid-export'> <i class=\"fa fa-file-excel-o\"></i> "+localization.Export+"</a>"})):e.grid.GridType&&"WorkItemSearch"!=e.grid.GridType&&(app.events.subscribe("dynamicPageReady",function(){d(),p()}),m.toolbar.push({name:localization.ResetGridFilters,template:"<a class='k-button pull-right btn btn-default btn-clear-grid-filters'>"+localization.ResetGridFilters+"</a>"}),m.toolbar.push({name:localization.ExportToExcel,template:"<a  class='k-button pull-right btn btn-default btn-grid-export'> <i class=\"fa fa-file-excel-o\"></i> "+localization.Export+"</a>"}))),app.isMobile()&&"WorkItem"===e.grid.GridType&&(app.events.subscribe("dynamicPageReady",function(){c()}),m.toolbar.push({name:"MobileWISearch",ordinal:0,template:"<div class='input-group mobilegrid__search'><input class='mobilegrid__search__input form-control' type='text' name='mobileWiGridSearchText' placeholder='"+localization.FilterItems+"'><span class='mobilegrid__search__btn input-group-btn' onclick=\"app.lib.filterMobileWiGrid('"+t+"')\"><button class='btn btn-default' type='button'><span class='fa fa-search cursor-pointer'></span></button></span></div>"})),_.each(n,function(e){switch(e.name){case"showActivityToggle":app.events.subscribe("dynamicPageReady",function(){app.isMobile()?g():v()}),m.toolbar.push({name:localization.ShowActivities,ordinal:2,template:"<label class='checkbox checkbox-primary' id='toggleActivities'><input type='checkbox' data-checked='false'><input id='showActivitiesInGrid' type='hidden' value='false'><span class='checkbox-label'>"+(app.isMobile()?localization.Activities:localization.ShowActivities)+"</span></label>"});break;case"showInactiveToggle":app.events.subscribe("dynamicPageReady",function(){app.isMobile()?b():v()}),m.toolbar.push({name:localization.ShowInactiveWorkItems,ordinal:2,template:"<label class='checkbox checkbox-primary' id='toggleInactive'><input type='checkbox' data-checked='false'><input id='showInActivesInGrid' type='hidden' value='false'><span class='checkbox-label'>"+(app.isMobile()?localization.Inactive:localization.ShowInactiveWorkItems)+"</span></label>"});break;case"localizationToolbar":app.events.subscribe("dynamicPageReady",function(){var e=$("#"+t).data("kendoGrid"),a=$(e.element).find("#locale"),n=$(e.element).find("#showAlreadyTranslated"),i={autoBind:!1,highlightFirst:!0,dataTextField:"name",dataValueField:"id",text:session.user.LanguageCode,dataSource:new kendo.data.DataSource({transport:{read:{url:"/Settings/User/GetAvailableLanguageCodes/",datatype:"json"}},schema:{data:"Data",errors:"Errors",model:{id:"Id",fields:{name:"Name"}}}}),change:function(){var t=this.value();t&&e.dataSource.read({locale:t,showAlreadyTranslated:n.prop("checked")})}};a.kendoDropDownList(i),n.prop("checked",e.dataSource.options.transport.read.originalConfigData.showAlreadyTranslated),n.on("click",function(){var t=$(e.element).find("#locale").data("kendoDropDownList"),a=t.value();0==a.length&&(a=session.user.LanguageCode),store.session.set("localizationGridLocale",a),e.dataSource.read({locale:a,showAlreadyTranslated:n.prop("checked")})})});var n=_.template(a);$("#"+t).after(n()),m.toolbar=kendo.template($("#toolbarTemplate").html());break;case"showInactiveTabs":app.events.subscribe("dynamicPageReady",function(){l()}),m.toolbar.push({name:e.name,template:"<ul class='nav nav-pills toolbar-tabs'><li class='active'><a data-subtype='myrequests'>"+localization.Active+"</a></li><li><a data-subtype='myinactiverequests'>"+localization.Closed+"</a></li></ul> <input type='hidden' id='gridViewId' value='myrequests' />"});break;case"searchConfigItems":app.events.subscribe("dynamicPageReady",function(){app.isMobile()?o():r()}),app.isMobile()?(m.toolbar.push({name:e.name+"ObjectClassCombo",template:"<input id='ObjectClassCombo' name='ObjectClassCombo' type='text' />"}),m.toolbar.push({name:e.name,template:"<div class='input-group mobilegrid__search mobilegrid__search--configitem'><input class='mobilegrid__search__input form-control' type='text' id='searchText' class='ci-search-text'><span class='mobilegrid__search__btn input-group-btn'><button class='btn btn-default' type='button'><span class='fa fa-search cursor-pointer'></span></button></span></div>"})):(m.toolbar.push({name:e.name+"ObjectClassCombo",template:"<div class='ci-dropdown-toolbar'><input id='ObjectClassCombo' name='ObjectClassCombo' type='text'  /></div>"}),m.toolbar.push({name:e.name,template:"<span class='ci-search-toolbar k-textbox k-space-right'><input type='text' id='searchText' class='ci-search-text' value=''  /><a class='k-icon k-i-search ci-search'></a></span>"}));break;case"myWorkToolbar":if(app.events.subscribe("dynamicPageReady",function(){app.isMobile()?(g(),b()):v(),u()}),app.isMobile())m.toolbar.push({name:e.name,ordinal:1,template:"<ul class='nav nav-pills toolbar-tabs'><li class='active'><a data-subtype='myworkitems'>"+localization.WorkItem+"</a></li><li><a data-subtype='myapprovals'>"+localization.Approval+"</a></li><li><a data-subtype='myactivities'>"+localization.Activities+"</a></li><li><a data-subtype='mymanualactivities'>"+localization.ManualActivities+"</a></li></ul> <input type='hidden' id='gridViewId' value='myworkitems' />"}),m.toolbar.push({name:localization.ShowActivities,ordinal:2,template:"<label class='checkbox checkbox-primary' id='toggleActivities'><input type='checkbox' data-checked='false'><input id='showActivitiesInGrid' type='hidden' value='false'><span class='checkbox-label'>"+(app.isMobile()?localization.Activities:localization.ShowActivities)+"</span></label>"}),m.toolbar.push({name:localization.ShowInactiveWorkItems,ordinal:3,template:"<label class='checkbox checkbox-primary' id='toggleInactive'><input type='checkbox' data-checked='false'><input id='showInActivesInGrid' type='hidden' value='false'><span class='checkbox-label'>"+(app.isMobile()?localization.Inactive:localization.ShowInactiveWorkItems)+"</span></label>"});else{var n=_.template(a);$("#"+t).after(n()),m.toolbar=kendo.template($("#myWorktoolbarTemplate").html())}break;case"custom":m.toolbar.push({name:e.name+"_"+f,template:e.template}),f++}});var v=_.once(function(){var e,a=$("#"+t).data("kendoGrid");_.each($("#"+t).find(":checkbox"),function(n){var i=$(n),r=$(n).next().attr("id").toString();$(i).on("click",function(){e=app.gridUtils.savedState.getCurrentState(t),e&&(e[r]=$(this).prop("checked"),app.gridUtils.savedState.setSavedState(t,e)),$(this).prop("checked")?$(this).next().val("true"):$(this).next().val("false"),a.dataSource.read()}),e=app.gridUtils.savedState.getCurrentState(t),e[r]?(i.prop("checked",!0).change(),e[r]=!0,i.next().val(!0),a.dataSource.read()):(i.prop("checked",!1).change(),i.next().val(!1),e[r]=!1),e&&app.gridUtils.savedState.setSavedState(t,e)})}),g=_.once(function(){var e=$("[data-control-id='"+t+"']").data("kendoListView");if(!_.isNull(e)&&!_.isUndefined(e)){e.element.prev().find("#toggleActivities").on("click",function(){var t=$(this).find(":checkbox"),a=t.next();t.prop("checked")?a.val("true"):a.val("false"),e.dataSource.read()})}}),b=_.once(function(){var e=$("[data-control-id='"+t+"']").data("kendoListView");if(!_.isNull(e)&&!_.isUndefined(e)){var a=e.element.prev().find("#toggleInactive");e.dataSource.read(),a.on("click",function(){var t=$(this).find(":checkbox"),a=t.next();t.prop("checked")?a.val("true"):a.val("false"),e.dataSource.read()})}});i(m)}}}),define("grids/columnTemplates/columnBase/controller",["require"],function(e){return{build:function(e,t,a){(_.isUndefined(t.title)||[t.title].length<=0)&&(t.title=t.field),t.title=_.isUndefined(localization[t.title])?t.title:localization[t.title],a(t)}}}),define("grids/columnTemplates/string/controller",["require"],function(e){return{build:function(e,t,a){a(t)}}}),define("grids/columnTemplates/number/controller",["require"],function(e){return{build:function(e,t,a){a(t)}}}),define("grids/columnTemplates/bool/controller",["require"],function(e){return{build:function(e,t,a){a(t)}}}),define("grids/columnTemplates/date/controller",["require"],function(e){return{build:function(e,t,a){a(t)}}}),define("text!grids/columnTemplates/SLOStatus/view.html",[],function(){return'<div id="slo-togrid" style="display:none;">\r\n    <div class="slo-togrid-allSlo">\r\n        <div class="slo-clone hide">\r\n            <ul>\r\n                <li class="slo-togrid-time-sub"></li>\r\n                <li class="slo-togrid-icon-sub"></li>\r\n                <li class="slo-togrid-title-sub"></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    <div class="slo-grid-space">\r\n        <span class="slo-togrid-time"></span>\r\n        <span class="slo-togrid-icon">\r\n            <i></i>\r\n        </span>\r\n    </div>\r\n</div>\r\n\r\n<div id="slo-pop-tooltip" style="display:none; position:absolute; z-index:99999">fillertext</div>\r\n\r\n'}),define("grids/columnTemplates/SLOStatus/controller",["require","text!grids/columnTemplates/SLOStatus/view.html"],function(e){var t=e("text!grids/columnTemplates/SLOStatus/view.html");return{template:t,build:function(e,a,n){function i(e){_.isUndefined(e)||e.kendoDropDownList({dataTextField:"displayName",dataValueField:"value",dataSource:[{value:"Active",displayName:localization.SLOStatusActive},{value:"Met",displayName:localization.SLOStatusMet},{value:"Warning",displayName:localization.SLOStatusWarng},{value:"Breached",displayName:localization.SLOStatusBreached},{value:"Paused",displayName:localization.SLOStatusPaused}],optionLabel:"--Select Value--"})}_.isUndefined(e.gridJsonDataForCountdown)&&(e.gridJsonDataForCountdown={});var r=_.template(t);$("#"+e.containerId).append(r()),SLO.Init(e),setInterval(function(){SLO.DoCountDown()},1e3),a.filterable={ui:i},n(a)}}});var sloTempContainer,SLO={ViewModel:{},Init:function(e){SLO.ViewModel=e,sloTempContainer=$("#slo-togrid")},SLOHover:function(e){e.mouseenter(function(){e.find(".slo-loader").show(),$.post("/Grid/SLOPopup",{workItemId:e.attr("wi")},function(t){e.find(".slo-loader").hide();var a=e.find(".slo-togrid-allSlo");if(a.hasClass("canceled"))return void a.removeClass("canceled");a.find(".removeSlo").remove();for(var n in t){var i="",r=!1,o=!1;switch(t[n].Status){case"Met":i="fa fa-check-circle-o text-success fa-lg",o=!0;break;case"Active":i="fa fa-clock-o text-primary fa-lg";break;case"Paused":i="fa fa-pause text-info fa-lg";break;case"Warning":i="fa fa-exclamation-circle text-warning fa-lg";break;case"Breached":r=!0,i="fa fa-bell text-danger fa-lg"}var s=a.find(".slo-clone").clone();if(s.removeClass("slo-clone"),s.addClass("removeSlo"),0==o)if(r)s.find(".slo-togrid-time-sub").html("").css("color","red");else{var l=t[n].Time.Hours;t[n].Time.Hours<10&&(l="0"+t[n].Time.Hours.toString());var d=t[n].Time.Minutes;t[n].Time.Minutes<10&&(d="0"+t[n].Time.Minutes.toString()),s.find(".slo-togrid-time-sub").html(l+":"+d)}s.find(".slo-togrid-title-sub").html(t[n].DisplayName),s.find(".slo-togrid-icon-sub").addClass(i),s.removeClass("hide"),a.append(s)}a.show(),a.css("margin-left","-"+(a[0].offsetWidth+20)+"px")})}),e.hover(function(t){e.find(".slo-togrid-allSlo").removeClass("canceled hide")}),e.mouseleave(function(){e.find(".slo-togrid-allSlo").addClass("canceled hide")})},CreateSLOToGrid:function(sloElement,isTriggerdFromGrid){var curImg,sloInstance=SLO.ViewModel.gridJsonDataForCountdown[sloElement.attr("id")],clone,isBreach=!1,isMetOrBreach=!1;if(null!=sloInstance){sloElement.hasClass("addedSloToGrid")?clone=sloElement.find(".addedSloToGrid"):(sloElement.html(""),clone=sloTempContainer.clone(),sloElement.append(clone),sloElement.addClass("addedSloToGrid"),clone.addClass("addedSloToGrid"),clone.show(),clone.attr("id",""));var txtTime=clone.find(".slo-togrid-time");if(sloInstance.ServerDatetimeNow=eval(sloInstance.ServerDatetimeNow),sloInstance.WarningDate=eval(sloInstance.WarningDate),iconClass="fa fa-clock-o text-primary fa-lg",sloInstance.WarningDate<=sloInstance.ServerDatetimeNow&&(iconClass="fa fa-exclamation-circle text-warning fa-lg"),sloInstance.Time.Hours<=0&&sloInstance.Time.Minutes<=0&&sloInstance.Time.Seconds<=0&&(isBreach=!0,iconClass="fa fa-bell text-danger fa-lg",txtTime.css("color","red")),"SLAInstance.Status.Met"==sloInstance.Status?(iconClass="fa fa-check-circle-o text-success fa-lg",isTriggerdFromGrid=!0,isMetOrBreach=!0):"SLAInstance.Status.Paused"==sloInstance.Status?(iconClass="fa fa-pause text-info fa-lg",isTriggerdFromGrid=!0):"SLAInstance.Status.Breached"==sloInstance.Status&&(iconClass="fa fa-bell text-danger fa-lg",isTriggerdFromGrid=!0,isMetOrBreach=!0),0==isMetOrBreach){var mins=Math.abs(sloInstance.Time.Minutes)<10?"0"+Math.abs(sloInstance.Time.Minutes):Math.abs(sloInstance.Time.Minutes),hour=Math.abs(sloInstance.Time.Hours)<10?"0"+Math.abs(sloInstance.Time.Hours):Math.abs(sloInstance.Time.Hours);txtTime.html((isBreach?"-":"")+hour+":"+mins)}clone.find(".slo-togrid-icon i").attr("class",iconClass),isTriggerdFromGrid||(sloInstance.ServerDatetimeNow.getSeconds(sloInstance.ServerDatetimeNow.getSeconds()+1),sloInstance.Time.Seconds=parseInt(sloInstance.Time.Seconds)-1,sloInstance.Time.Hours<=0&&sloInstance.Time.Minutes<=0&&sloInstance.Time.Seconds<=0?(sloInstance.Time.Seconds<=-60&&(sloInstance.Time.Seconds=0,sloInstance.Time.Minutes=parseInt(sloInstance.Time.Minutes)-1),sloInstance.Time.Minutes<=-60&&(sloInstance.Time.Minutes=0,sloInstance.Time.Hours=parseInt(sloInstance.Time.Hours)-1)):(sloInstance.Time.Minutes<0&&(sloInstance.Time.Minutes=59,sloInstance.Time.Hours=parseInt(sloInstance.Time.Hours)-1),sloInstance.Time.Seconds<0&&(sloInstance.Time.Seconds=59,sloInstance.Time.Minutes=parseInt(sloInstance.Time.Minutes)-1)))}},DoCountDown:function(){for(var e in SLO.ViewModel.gridJsonDataForCountdown)null!=$("#"+e)[0]&&SLO.CreateSLOToGrid($("#"+e),!1)},AssignSLOJson:function(e,t){null==SLO.ViewModel.gridJsonDataForCountdown[e]&&null!=t&&(SLO.ViewModel.gridJsonDataForCountdown[e]=t)}};define("grids/columnTemplates/command/controller",["require"],function(e){return{build:function(e,t,a){_.each(t.command,function(e){switch(_.isString(e.text)&&(e.text=localizationHelper.localize(e.text,e.text)),_.isObject(e.text)&&_.each(e.text,function(t,a){e.text[a]=localizationHelper.localize(t,t)}),e.name){case"immediateDelete":e.click=function(e){e.preventDefault();var t=$(this.element).data("kendoGrid"),a=t.dataItem($(e.currentTarget).closest("tr")),n=!1;_.each(t.dataSource.data(),function(e){e.dirty&&e.uid!=a.uid&&(n=!0)}),n?kendo.ui.ExtAlertDialog.show({message:localizationHelper.localize("SaveOrCancelBeforeDelete")}):$.when(kendo.ui.ExtYesNoDialog.show({title:localizationHelper.localize("DeleteLocalizationTitle"),message:localizationHelper.localize("ConfirmDelete")})).done(function(e){"yes"===e.button&&(app.lib.mask.apply(),t.dataSource.remove(a),t.dataSource.sync())})},e.text=localizationHelper.localize(e.text)}}),a(t)}}}),define("grids/columnTemplates/input/controller",["require"],function(e){return{build:function(e,t,a){a(t)}}}),define("grids/columnTemplates/anchor/controller",["require"],function(e){return{build:function(e,t,a){t.template=t.template.replace("***",e.grid.GridType),a(t)}}}),define("grids/structure/dataSource/controller",["require"],function(e){return{build:function(e,t,a){var n=e.containerId||e.gridId;if(e.dataSource={},!_.isUndefined(e.grid.options)&&e.grid.options.editable)switch(e.grid.GridType){case"Localization":app.gridUtils.applyLocalizationDataSourceConfig(n,e);break;case"EditableKnowledgeArticle":app.gridUtils.applyKmDashboardDataSourceConfig(n,e);break;default:return}else app.gridUtils.configureGenericGrid(n,e);app.gridUtils.setDataSourceOverrides(e),_.isUndefined(t)||(e.dataSource=_.extend(e.dataSource,t)),e.onColumnReorder=function(){app.gridUtils.saveColumnState(n,this)},e.onColumnResize=function(){app.gridUtils.saveColumnState(n,this)},e.onColumnShow=function(){app.gridUtils.saveColumnState(n,this)},e.onColumnHide=function(){app.gridUtils.saveColumnState(n,this)},e.onGridChange=function(e){var t=this;app.events.publish("gridChange",t),t.options.noState||app.gridUtils.savedState.updateSelectedRows(n,t)},e.onDataBound=function(t){var a=t.sender,i=app.gridUtils.savedState.getCurrentState(n),r=_.isUndefined(e.events)?function(){app.lib.log("row click function not found;")}:e.events.handleRowClick;app.gridUtils.denoteAppliedFilters(a,i),app.gridUtils.setGridStatePersistence(n,a,a.dataSource,i),app.gridUtils.initRowClickHandling(n,a,r),app.gridUtils.handleEmptyResults(a,a.dataSource,i),app.gridUtils.handleRowHoverEvent(t),app.events.publish("gridBound",a)},a()}}}),define("grids/structure/sourceFields/controller",["require"],function(e){return{build:function(e,t,a){e.dataSource.schema.model.fields={},_.each(e.grid.columns,function(t){if(e.dataSource.schema.model.fields[t.field]={type:t.DataType,editable:!_.isUndefined(t.editable)&&t.editable},"number"===t.DataType&&(e.dataSource.schema.model.fields[t.field].parse=function(e){return _.isNull(e)||_.isUndefined(e)?0:Number(e)}),"date"===t.DataType&&-1==t.field.indexOf("AsDatePart")&&"WorkItem"==e.grid.GridType&&"/grid/GetPromotedView/"!=e.grid.dataUrl.toString()){var a=(t.field,t);a.field=t.field+"AsDatePart",e.grid.columns.push(a),e.dataSource.schema.model.fields[t.field]={type:t.DataType,editable:!_.isUndefined(t.editable)&&t.editable}}}),a()}}}),define("text!grids/structure/drawer/createLocalizationTemplate.html",[],function(){return'<script type="text/x-kendo-template" id="createLocalizationTemplate">\r\n    <div class="alert alert-danger" data-bind="localize: RequiredFieldsErrorMessage, visible: formInvalid"></div>\r\n    <div class="form-group">\r\n        <label class="control-label" for="Key">\r\n            <span data-bind="localize: Key"></span>\r\n            (<span data-bind="localize: Required"></span>)\r\n        </label>\r\n        <input type="text" class="k-textbox form-control input-sm" data-bind="value: Key, events: { blur: checkIfKeyIsValid }" required>\r\n        <p class="help-block validation-summary-errors" data-bind="localize: KeyAlreadyExists, visible: hasDuplicateKey"></p>\r\n    </div>\r\n    <div class="form-group">\r\n        <label class="control-label" for="English">\r\n            <span data-bind="localize: English"></span>\r\n            (<span data-bind="localize: Required"></span>)\r\n        </label>\r\n        <input type="text" class="k-textbox form-control input-sm" data-bind="value: English, events: { blur: checkForValue }" required>\r\n    </div>\r\n    <div class="form-group">\r\n        <label class="control-label" for="ContextNotes">\r\n            <span data-bind="localize: ContextNotes"></span>\r\n        </label>\r\n        <textarea class="k-textbox form-control input-sm" rows="2" data-bind="value: ContextNotes"></textarea>\r\n    </div>\r\n    <div class="form-group">\r\n        <button type="button" data-bind="click: saveRecord, enabled: canSubmit" class="k-button btn btn-primary">\r\n            <span data-bind="localize: Save"></span>\r\n        </button>\r\n        <button type="button" data-bind="click: cancel" class="k-button btn btn-default">\r\n            <span data-bind="localize: Cancel"></span>\r\n        </button>\r\n    </div>\r\n<\/script>'}),define("grids/structure/drawer/controller",["require","text!grids/structure/drawer/createLocalizationTemplate.html"],function(e){function t(){$("#"+i).data("kendoGrid").cancelChanges()}function a(){var e=$("#"+i).data("kendoGrid");e.dataSource.hasChanges()&&(app.lib.mask.apply(),e.saveChanges())}function n(){var e=$("#"+i).data("kendoGrid"),t=e.dataSource;if(t.hasChanges())kendo.ui.ExtAlertDialog.show({message:localizationHelper.localize("SaveOrCancelBeforeAdd")});else{var a=$("<div id='newLocalizationWindow'>").appendTo($("body")).kendoCiresonWindow({title:localizationHelper.localize("AddNewKey"),actions:[],width:400,visible:!0,content:{template:kendo.template($("#createLocalizationTemplate").html())}}).data("kendoWindow").center(),n=kendo.observable({Key:"",English:"",ContextNotes:"",Locale:store.session.get("localizationGridLocale"),hasDuplicateKey:!1,formInvalid:!1});n.validateForm=function(){var e=!0;return 0==this.get("canSubmit")&&(e=!1),this.get("Key").length<=0&&(e=!1),this.get("English").length<=0&&(e=!1),this.get("hasDuplicateKey")&&(e=!1),e},n.saveRecord=function(){n.validateForm()?(n.set("formInvalid",!1),app.lib.mask.apply(),t.insert(0,{Key:n.get("Key"),Locale:n.get("Locale"),English:n.get("English"),ContextNotes:n.get("ContextNotes").trim()}),t.sync(),t.read(),a.destroy()):n.set("formInvalid",!0)},n.cancel=function(e){t.cancelChanges(),a.destroy()},n.checkIfKeyIsValid=function(e){var t=e.currentTarget;if(n.set("Key",n.get("Key").trim()),n.get("Key").length<=0)return void $(t).closest(".form-group").addClass("has-error");$.ajax({contentType:"application/json",accepts:"application/json",type:"POST",dataType:"json",data:JSON.stringify({key:n.get("Key"),locale:n.get("Locale")}),url:"/Localizations/KeyIsValid/"}).done(function(e){e?(n.set("hasDuplicateKey",!1),$(t).closest(".form-group").removeClass("has-error")):(n.set("hasDuplicateKey",!0),$(t).closest(".form-group").addClass("has-error")),n.setCanSubmit()})},n.checkForValue=function(e){var t=e.currentTarget;n.set("English",n.get("English").trim()),n.get("English").length>0?$(t).closest(".form-group").removeClass("has-error"):$(t).closest(".form-group").addClass("has-error"),n.setCanSubmit()},n.setCanSubmit=function(){n.get("Key").length>0&&0==n.get("hasDuplicateKey")&&n.get("English").length>0?n.set("canSubmit",!0):n.set("canSubmit",!1)},kendo.bind(a.element,n)}}var i;return{build:function(r,o,s){_.isUndefined(o)||(i=r.containerId||r.gridId,_.each(o,function(r,o){var s={command:function(r){switch(o){case"addLocalization":var s=e("text!grids/structure/drawer/createLocalizationTemplate.html"),l=_.template(s);$("#"+i).after(l()),n();break;case"saveLocalization":case"savePopularityIndex":a();break;case"cancelLocalization":case"cancelPopularityIndex":t()}},visible:r.visible,enabled:r.enabled};new kendo.View("<button data-bind='drawerMenuCommand: { titleKey: "+r.titleKey+", icon: "+r.icon+", command: command, visible: visible}, enabled: enabled '></button>",{wrap:!1,model:kendo.observable(s)}).render()}))}}}),define("text!grids/mobile/view.workitem.html",[],function(){return'<div data-bind="templateResources:\'resources\'" style="display: none">\r\n    <div data-template-name="gridCardTemplate" class="gridcard gridcard--workitem">\r\n        <div class="checkbox gridcard__checkbox">\r\n            <input type="checkbox" id="selected_#: Id #">\r\n            <label for="selected_#: Id #"></label>\r\n        </div>\r\n        <p class="gridcard__title">#: Title #</p>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if ( Priority && Priority.length > 0 ){ #\r\n                <span>#: localizationHelper.localize("Priority") # #: Priority # </span>\r\n                # } #\r\n\r\n                # if ( Priority && Priority.length > 0 && AffectedUser && AffectedUser.length > 0 ){ #\r\n                &middot;\r\n                # } #\r\n\r\n                # if ( AffectedUser && AffectedUser.length > 0 ){ #\r\n                <span>#: AffectedUser #</span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if ( Category && Category.length > 0 ){ #\r\n                <span>#: Category # </span>\r\n                # } #\r\n\r\n                # if ( Category && Category.length > 0 && Id && Id.length > 0 ){ #\r\n                &middot;\r\n                # } #\r\n\r\n                # if ( Id && Id.length > 0 ){ #\r\n                <span>#: Id # </span>\r\n                # } #\r\n            </p>\r\n        </div>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                <span>#: localizationHelper.localize("LastWorked") #: #: moment(kendo.toString(new Date(LastModified))).fromNow() #</span>\r\n            </p>\r\n            <p>\r\n                <span>#: localizationHelper.localize("Age") #: #: moment(kendo.toString(new Date(Created))).fromNow() #</span>\r\n            </p>\r\n        </div>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if ( AssignedUser && AssignedUser.length > 0 ){ #\r\n                <span>#: localizationHelper.localize("AssignedTo") #: #: AssignedUser # </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if ( Tier && Tier.length > 0 ){ #\r\n                <span>#: localizationHelper.localize("SupportGroup") #: #: Tier # </span>\r\n                # } #\r\n            </p>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div>\r\n    <div class="mobilegrid__header">\r\n    </div>\r\n    <div data-bind="mobileWIGrid: viewModel" data-template-name="gridCardList" class="mobilegrid"></div>\r\n    <div class="mobilegrid__pager"></div>\r\n</div>'}),define("text!grids/mobile/view.configitem.html",[],function(){return'<div data-bind="templateResources:\'resources\'" style="display: none">\r\n    <div data-template-name="gridCardTemplate" class="gridcard gridcard--config">\r\n        <p class="gridcard__title">#: DisplayName #</p>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if ( ObjectClassName && ObjectClassName.length > 0 ){ #\r\n                <span>#: localizationHelper.localize("ObjectClassName") # #: ObjectClassName # </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if ( Path && Path.length > 0 ){ #\r\n                <span>#: localizationHelper.localize("Path") # #: Path # </span>\r\n                # } #\r\n            </p>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div>\r\n    <div class="mobilegrid__header">\r\n    </div>\r\n    <div data-bind="mobileWIGrid: viewModel" data-template-name="gridCardList" class="mobilegrid"></div>\r\n    <div class="mobilegrid__pager"></div>\r\n</div>'}),define("text!grids/mobile/view.knowledgemanager.html",[],function(){return'<div data-bind="templateResources:\'resources\'" style="display: none">\r\n    <div data-template-name="gridCardTemplate" class="gridcard gridcard--knowledge">\r\n        <a class=\'gridcard__action-icon\' href=\'javascript:;\' onclick="app.lib.knowledgeManagerDeleteArticle(#:ArticleId #, this);">\r\n            <i class=\'fa fa-lg fa-trash\'></i>\r\n        </a>\r\n        <p class="gridcard__title">\r\n            <a href=\'/KnowledgeBase/Edit/#:ArticleId#/\'>#: Title #</a>\r\n        </p>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                <span>#: ViewCount # #: localizationHelper.localize("Views").toLowerCase() #</span>\r\n                &middot;\r\n                <span>#: CommentCount # #: localizationHelper.localize("Comments").toLowerCase() #</span>\r\n            </p>\r\n            <p>\r\n                <span> #: localizationHelper.localize("Rating") #: #: AverageRating #</span>\r\n                &middot;\r\n                <span> #: localizationHelper.localize("Popularity") #: #: Popularity #</span>\r\n            </p>\r\n        </div>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if ( StatusString && StatusString.length > 0 ){ #\r\n                <span>#: StatusString #</span>\r\n                # } #\r\n\r\n                # if ((LastModifiedDate && LastModifiedDate.length > 0) && (StatusString && StatusString.length > 0 )){ #\r\n                &middot;\r\n                # } #\r\n\r\n                # if ( LastModifiedDate && LastModifiedDate.length > 0 ){ #\r\n                <span>#: localizationHelper.localize("Updated") # #: moment(kendo.toString(new Date(LastModifiedDate))).fromNow() #</span>\r\n                # } #\r\n            </p>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div>\r\n    <div class="mobilegrid__header">\r\n    </div>\r\n    <div data-bind="mobileWIGrid: viewModel" data-template-name="gridCardList" class="mobilegrid"></div>\r\n    <div class="mobilegrid__pager"></div>\r\n</div>'}),define("text!grids/mobile/view.announcement.html",[],function(){return'<div data-bind="templateResources:\'resources\'" style="display: none">\r\n    <div data-template-name="gridCardTemplate" class="gridcard gridcard--announcement">\r\n        <p class="gridcard__title">\r\n            <a href=\'/Administration/Announcement/Edit/#: Id #\'>#: Title #</a>\r\n        </p>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                <span>\r\n                    #: moment(kendo.toString(new Date(StartDate))).format(\'L\') #\r\n                    &ndash;\r\n                    #: moment(kendo.toString(new Date(EndDate))).format(\'L\') #\r\n                </span>\r\n            </p>\r\n            <p>\r\n                <span>#: Priority # #: localizationHelper.localize("Priority").toLowerCase() #</span>\r\n            </p>\r\n        </div>\r\n        <div class="gridcard__detailblock">\r\n            <p class="gridcard__detailblock--truncated">\r\n                #: Body #\r\n            </p>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div>\r\n    <div class="mobilegrid__header">\r\n    </div>\r\n    <div data-bind="mobileWIGrid: viewModel" data-template-name="gridCardList" class="mobilegrid"></div>\r\n    <div class="mobilegrid__pager"></div>\r\n</div>'}),define("text!grids/mobile/view.amGeneral.html",[],function(){
return'<div data-bind="templateResources:\'resources\'" style="display: none">\r\n    <div data-template-name="CatalogItem" class="gridcard gridcard--asset">\r\n        <p class="gridcard__title">\r\n            <a href=\'#: data.parent().parent().editUrl.replace("|ID|", data.BaseId) #\'>#: data.Name74d965de373c4ab1bbfd2b593997697e #</a>\r\n        </p>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if (Typeb586382a549742ed99a25853ccd3f7b5 && Typeb586382a549742ed99a25853ccd3f7b5.length > 0 ){ #\r\n                <span>#: Typeb586382a549742ed99a25853ccd3f7b5 # </span>\r\n                # } #\r\n\r\n                # if (Typeb586382a549742ed99a25853ccd3f7b5 && Typeb586382a549742ed99a25853ccd3f7b5.length > 0 && Modela71d95617f7f4e578eb4da72ada704f6 && Modela71d95617f7f4e578eb4da72ada704f6.length > 0 ){ #\r\n                &middot;\r\n                # } #\r\n\r\n                # if (Modela71d95617f7f4e578eb4da72ada704f6 && Modela71d95617f7f4e578eb4da72ada704f6.length > 0 ){ #\r\n                <span>#: Modela71d95617f7f4e578eb4da72ada704f6 # </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                <span>#: localizationHelper.localize("LastModified") #: #: moment(kendo.toString(new Date(LastModifiedebdc03efb57148fb89a9465d28f71c64))).fromNow() #</span>\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <div data-template-name="LeaseContract" class="gridcard gridcard--asset">\r\n        <p class="gridcard__title">\r\n            <a href=\'#: data.parent().parent().editUrl.replace("|ID|", BaseId) #\'>#: data.parent().parent().editUrl.replace("|ID|", BaseId) #</a>\r\n        </p>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if (_.isString(stringContractStatus)){ #\r\n                <span>#: localizationHelper.localize("ContractStatus") #: #: stringContractStatus # </span>\r\n                # } #\r\n\r\n                # if (_.isString(stringContractStatus) && _.isNumber(stringDaysLeft)){ #\r\n                &middot;\r\n                # } #\r\n                # if (_.isNumber(stringDaysLeft)){ #\r\n                <span>#: stringDaysLeft # #: localizationHelper.localize("DaysLeft").toLowerCase() #</span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                <span>#: localizationHelper.localize("Updated") # #: moment(kendo.toString(new Date(stringLastUpdated))).fromNow() #</span>\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <div data-template-name="SupportAndMaintenanceContract" class="gridcard gridcard--asset">\r\n        <p class="gridcard__title">\r\n            <a href=\'#: data.parent().parent().editUrl.replace("|ID|", BaseId) #\'>#: stringContractName #</a>\r\n        </p>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if (_.isString(stringContractStatus)){ #\r\n                <span>#: localizationHelper.localize("ContractStatus") #: #: stringContractStatus # </span>\r\n                # } #\r\n\r\n                # if (_.isString(stringContractStatus) && _.isNumber(stringDaysLeft)){ #\r\n                &middot;\r\n                # } #\r\n                # if (_.isNumber(stringDaysLeft)){ #\r\n                <span>#: stringDaysLeft # #: localizationHelper.localize("DaysLeft").toLowerCase() #</span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringLastUpdated)){ #\r\n                <span>#: localizationHelper.localize("Updated") # #: moment(kendo.toString(new Date(stringLastUpdated))).fromNow() #</span>\r\n                # } #\r\n\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <div data-template-name="WarrantyContract" class="gridcard gridcard--asset">\r\n        <p class="gridcard__title">\r\n            <a href=\'#: data.parent().parent().editUrl.replace("|ID|", BaseId) #\'>#: stringWarrantyName #</a>\r\n        </p>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if (_.isString(stringContractStatus)){ #\r\n                <span>#: localizationHelper.localize("ContractStatus") #: #: stringContractStatus # </span>\r\n                # } #\r\n\r\n                # if (_.isString(stringContractStatus) && _.isNumber(stringDaysLeft)){ #\r\n                &middot;\r\n                # } #\r\n                # if (_.isNumber(stringDaysLeft)){ #\r\n                <span>#: stringDaysLeft # #: localizationHelper.localize("DaysLeft").toLowerCase() #</span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringLastUpdated)){ #\r\n                <span>#: localizationHelper.localize("Updated") # #: moment(kendo.toString(new Date(stringLastUpdated))).fromNow() #</span>\r\n                # } #\r\n\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <div data-template-name="HardwareAsset" class="gridcard gridcard--asset">\r\n        <p class="gridcard__title">\r\n            <a href=\'#: data.parent().parent().editUrl.replace("|ID|", BaseId) #\'>#: stringHardwareAssetName #</a>\r\n        </p>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if (headerHWAssetStatus && _.isString(headerHWAssetStatus)){ #\r\n                <span>#: localizationHelper.localize("Status") #: #: headerHWAssetStatus # </span>\r\n                # } #\r\n\r\n                # if ((headerHWAssetStatus && _.isString(headerHWAssetStatus)) && (headerHWAssetType && _.isString(headerHWAssetType))){ #\r\n                &middot;\r\n                # } #\r\n                # if (headerHWAssetType && _.isString(headerHWAssetType)){ #\r\n                <span>#: localizationHelper.localize("Type") #: #: headerHWAssetType #</span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringLastModified)){ #\r\n                <span>#: localizationHelper.localize("Updated") # #: moment(kendo.toString(new Date(stringLastModified))).fromNow() #</span>\r\n                # } #\r\n\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <div data-template-name="SoftwareAsset" class="gridcard gridcard--asset">\r\n        <p class="gridcard__title">\r\n            <a href=\'#: data.parent().parent().editUrl.replace("|ID|", BaseId) #\'>#: stringSoftwareAssetName #</a>\r\n        </p>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if (headerVersion && _.isString(headerVersion)){ #\r\n                <span>#: localizationHelper.localize("Version") #: #: headerVersion # </span>\r\n                # } #\r\n\r\n                # if ((headerVersion && _.isString(headerVersion)) && (stringAvailableCount && _.isString(stringAvailableCount))){ #\r\n                &middot;\r\n                # } #\r\n                # if (stringAvailableCount && _.isString(stringAvailableCount)){ #\r\n                <span>#: localizationHelper.localize("Available") #: #: stringAvailableCount #</span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringLastModified)){ #\r\n                <span>#: localizationHelper.localize("Updated") # #: moment(kendo.toString(new Date(stringLastModified))).fromNow() #</span>\r\n                # } #\r\n\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <div data-template-name="Consumable" class="gridcard gridcard--asset">\r\n        <p class="gridcard__title">\r\n            <a href=\'#: data.parent().parent().editUrl.replace("|ID|", BaseId) #\'>#: headerConsumableName #</a>\r\n        </p>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if (stringPrice && stringPrice.length > 0){ #\r\n                <span>\r\n                    #: localizationHelper.localize("Price") #: #: stringPrice #\r\n                    # if (stringPrice && stringPrice.length > 0 && (headerCurrency && _.isString(headerCurrency))){ #\r\n                    #: headerCurrency #\r\n                    # } #\r\n                </span>\r\n                # } #\r\n\r\n                # if (stringPrice && stringPrice.length > 0 && (headerCount && _.isString(headerCount))){ #\r\n                &middot;\r\n                # } #\r\n                # if (headerCount && _.isString(headerCount)){ #\r\n                <span>#: localizationHelper.localize("Available") #: #: headerCount #</span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringLastModified)){ #\r\n                <span>#: localizationHelper.localize("Updated") # #: moment(kendo.toString(new Date(stringLastModified))).fromNow() #</span>\r\n                # } #\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <div data-template-name="CostCenter" class="gridcard gridcard--asset">\r\n        <p class="gridcard__title">\r\n            <a href=\'#: data.parent().parent().editUrl.replace("|ID|", BaseId) #\'>#: stringCostCenterName #</a>\r\n        </p>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if (_.isString(stringCustodian)){ #\r\n                <span>\r\n                    #: localizationHelper.localize("Custodian") #: #: stringCustodian #\r\n                </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringOrganization)){ #\r\n                <span>#: localizationHelper.localize("Organization") #: #: stringOrganization #</span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringLastModified)){ #\r\n                <span>#: localizationHelper.localize("Updated") # #: moment(kendo.toString(new Date(stringLastModified))).fromNow() #</span>\r\n                # } #\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <div data-template-name="Invoice" class="gridcard gridcard--asset">\r\n        <p class="gridcard__title">\r\n            <a href=\'#: data.parent().parent().editUrl.replace("|ID|", BaseId) #\'>AAAAAAAA</a>\r\n        </p>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if (_.isString(stringInvoiceOrderNumber)){ #\r\n                <span>\r\n                    #: localizationHelper.localize("Invoice") #: #: stringInvoiceOrderNumber #\r\n                </span>\r\n                # } #\r\n                # if (_.isString(stringInvoiceOrderNumber) && _.isString(headerInvoiceStatus)){ #\r\n                &middot;\r\n                # } #\r\n                # if (_.isString(headerInvoiceStatus)){ #\r\n                <span>\r\n                    #: headerInvoiceStatus #\r\n                </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringVendorName)){ #\r\n                <span>\r\n                    #: localizationHelper.localize("Vendor") #: #: stringVendorName #\r\n                </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringTotalAmount)){ #\r\n                <span>\r\n                    #: localizationHelper.localize("Total") #: #: stringTotalAmount #\r\n                </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringLastModified)){ #\r\n                <span>#: localizationHelper.localize("Updated") # #: moment(kendo.toString(new Date(stringLastModified))).fromNow() #</span>\r\n                # } #\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <div data-template-name="License" class="gridcard gridcard--asset">\r\n        <p class="gridcard__title">\r\n            <a href=\'#: data.parent().parent().editUrl.replace("|ID|", BaseId) #\'>#: stringLicenceName #</a>\r\n        </p>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if (_.isString(stringVendorName)){ #\r\n                <span>\r\n                    #: localizationHelper.localize("Vendor") #: #: stringVendorName #\r\n                </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(headerLicenceType)){ #\r\n                <span>\r\n                    #: headerLicenceType #\r\n                </span>\r\n                # } #\r\n                # if (_.isString(headerLicenceType) && _.isString(headerLicenceStatus)){ #\r\n                <span>\r\n                    &middot;\r\n                </span>\r\n                # } #\r\n                # if (_.isString(headerLicenceStatus)){ #\r\n                <span>\r\n                    #: headerLicenceStatus #\r\n                </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringLastModified)){ #\r\n                <span>#: localizationHelper.localize("Updated") # #: moment(kendo.toString(new Date(stringLastModified))).fromNow() #</span>\r\n                # } #\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <div data-template-name="Location" class="gridcard gridcard--asset">\r\n        <p class="gridcard__title">\r\n            <a href=\'#: data.parent().parent().editUrl.replace("|ID|", BaseId) #\'>#: stringLocationName #</a>\r\n        </p>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if (_.isString(stringLocationAddress1)){ #\r\n                <span>\r\n                    #: stringLocationAddress1 #\r\n                </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringLocationAddress2)){ #\r\n                <span>\r\n                    #: stringLocationAddress2 #\r\n                </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringLocationCity)){ #\r\n                <span>\r\n                    #: stringLocationCity #\r\n                </span>\r\n                # } #\r\n                # if (_.isString(stringLocationState)){ #\r\n                <span>\r\n                    #: stringLocationState #\r\n                </span>\r\n                # } #\r\n                # if (_.isString(stringLocationCountry)){ #\r\n                <span>\r\n                    #: stringLocationCountry #\r\n                </span>\r\n                # } #\r\n            </p>\r\n        </div>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if (_.isString(stringLastModified)){ #\r\n                <span>#: localizationHelper.localize("Updated") # #: moment(kendo.toString(new Date(stringLastModified))).fromNow() #</span>\r\n                # } #\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <div data-template-name="Subnet" class="gridcard gridcard--asset">\r\n        <p class="gridcard__title">\r\n            <a href=\'#: data.parent().parent().editUrl.replace("|ID|", BaseId) #\'>#: stringSubnetName #</a>\r\n        </p>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if (_.isString(stringIPMask)){ #\r\n                <span>\r\n                    #: stringIPMask #\r\n                </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringSubnetMask)){ #\r\n                <span>\r\n                    #: stringSubnetMask #\r\n                </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringLastModified)){ #\r\n                <span>#: localizationHelper.localize("Updated") # #: moment(kendo.toString(new Date(stringLastModified))).fromNow() #</span>\r\n                # } #\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <div data-template-name="NoticeEvent" class="gridcard gridcard--asset">\r\n        <p class="gridcard__title">\r\n            <a href=\'#: data.parent().parent().editUrl.replace("|ID|", BaseId) #\'>#: stringTitle #</a>\r\n        </p>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if (_.isString(headerNoticeSpan)){ #\r\n                <span>\r\n                    #: headerNoticeSpan #\r\n                </span>\r\n                # } #\r\n                # if (_.isString(headerNoticePeriod)){ #\r\n                <span>\r\n                    #: headerNoticePeriod #\r\n                </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(headerDueDate)){ #\r\n                <span>#: localizationHelper.localize("DueDate") #: #: moment(kendo.toString(new Date(headerDueDate))).format(\'LL\') #</span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringLastModified)){ #\r\n                <span>#: localizationHelper.localize("Updated") # #: moment(kendo.toString(new Date(stringLastModified))).fromNow() #</span>\r\n                # } #\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <div data-template-name="Organization" class="gridcard gridcard--asset">\r\n        <p class="gridcard__title">\r\n            <a href=\'#: data.parent().parent().editUrl.replace("|ID|", BaseId) #\'>#: stringOrganizationName #</a>\r\n        </p>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if (_.isString(stringCostCenterName)){ #\r\n                <span>\r\n                    #: localizationHelper.localize("CostCenter") #: #: stringCostCenterName #\r\n                </span>\r\n                # } #\r\n            </p>\r\n        </div>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if (_.isString(stringLocationAddress1)){ #\r\n                <span>\r\n                    #: stringLocationAddress1 #\r\n                </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringLocationAddress2)){ #\r\n                <span>\r\n                    #: stringLocationAddress2 #\r\n                </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringLocationCity)){ #\r\n                <span>\r\n                    #: stringLocationCity #\r\n                </span>\r\n                # } #\r\n                # if (_.isString(stringLocationState)){ #\r\n                <span>\r\n                    #: stringLocationState #\r\n                </span>\r\n                # } #\r\n                # if (_.isString(stringLocationCountry)){ #\r\n                <span>\r\n                    #: stringLocationCountry #\r\n                </span>\r\n                # } #\r\n            </p>\r\n        </div>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if (_.isString(stringLastModified)){ #\r\n                <span>#: localizationHelper.localize("Updated") # #: moment(kendo.toString(new Date(stringLastModified))).fromNow() #</span>\r\n                # } #\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <div data-template-name="PurchaseOrder" class="gridcard gridcard--asset">\r\n        <p class="gridcard__title">\r\n            <a href=\'#: data.parent().parent().editUrl.replace("|ID|", BaseId) #\'>#: stringPurchaseOrderNumber #</a>\r\n        </p>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if (_.isString(stringCostCenterName)){ #\r\n                <span>\r\n                    #: localizationHelper.localize("CostCenter") #: #: stringCostCenterName #\r\n                </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringAmount)){ #\r\n                <span>\r\n                    #: localizationHelper.localize("Amount") #: #: stringAmount #\r\n                </span>\r\n                # } #\r\n                # if (_.isString(headerCurrency)){ #\r\n                <span>\r\n                    #: headerCurrency #\r\n                </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(headerPurchaseOrderType)){ #\r\n                <span>\r\n                    #: headerPurchaseOrderType #\r\n                </span>\r\n                # } #\r\n                # if (_.isString(headerPurchaseOrderType) && _.isString(headerPurchaseOrderStatus)){ #\r\n                &middot;\r\n                # } #\r\n                # if (_.isString(headerPurchaseOrderStatus)){ #\r\n                <span>\r\n                    #: headerPurchaseOrderStatus #\r\n                </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringLastModified)){ #\r\n                <span>#: localizationHelper.localize("Updated") # #: moment(kendo.toString(new Date(stringLastModified))).fromNow() #</span>\r\n                # } #\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <div data-template-name="Purchase" class="gridcard gridcard--asset">\r\n        <p class="gridcard__title">\r\n            <a href=\'#: data.parent().parent().editUrl.replace("|ID|", BaseId) #\'>#: stringPurchaseName #</a>\r\n        </p>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if (_.isString(formLabelTitleCostCenter)){ #\r\n                <span>\r\n                    #: localizationHelper.localize("CostCenter") #: #: formLabelTitleCostCenter #\r\n                </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(formLabelTitlePurchaseOrder)){ #\r\n                <span>\r\n                    #: localizationHelper.localize("PurchaseOrder") #: #: formLabelTitlePurchaseOrder #\r\n                </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringLastModified)){ #\r\n                <span>#: localizationHelper.localize("Updated") # #: moment(kendo.toString(new Date(stringLastModified))).fromNow() #</span>\r\n                # } #\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <div data-template-name="Standard" class="gridcard gridcard--asset">\r\n        <p class="gridcard__title">\r\n            <a href=\'#: data.parent().parent().editUrl.replace("|ID|", BaseId) #\'>#: stringStandardName #</a>\r\n        </p>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if (_.isString(stringStandardType)){ #\r\n                <span>\r\n                    #: localizationHelper.localize("Type") #: #: stringStandardType #\r\n                </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringLastModified)){ #\r\n                <span>#: localizationHelper.localize("Updated") # #: moment(kendo.toString(new Date(stringLastModified))).fromNow() #</span>\r\n                # } #\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <div data-template-name="Vendor" class="gridcard gridcard--asset">\r\n        <p class="gridcard__title">\r\n            <a href=\'#: data.parent().parent().editUrl.replace("|ID|", BaseId) #\'>#: stringVendorName #</a>\r\n        </p>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if (_.isString(stringContact)){ #\r\n                <span>\r\n                    #: stringContact #\r\n                </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringTelephone)){ #\r\n                <span>\r\n                    #: localizationHelper.localize("Telephone") #: #: stringTelephone #\r\n                </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringFax)){ #\r\n                <span>\r\n                    #: localizationHelper.localize("Fax") #: #: stringFax #\r\n                </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if (_.isString(stringEmail)){ #\r\n                <span>\r\n                    #: localizationHelper.localize("Email") #: #: stringEmail #\r\n                </span>\r\n                # } #\r\n            </p>\r\n        </div>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if (_.isString(stringLastModified)){ #\r\n                <span>#: localizationHelper.localize("Updated") # #: moment(kendo.toString(new Date(stringLastModified))).fromNow() #</span>\r\n                # } #\r\n            </p>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div>\r\n    <div class="mobilegrid__header"></div>\r\n    <div data-bind="mobileWIGrid: viewModel" class="mobilegrid"></div>\r\n    <div class="mobilegrid__pager"></div>\r\n</div>'}),define("grids/mobile/controller",["require","text!grids/mobile/view.workitem.html","text!grids/mobile/view.configitem.html","text!grids/mobile/view.knowledgemanager.html","text!grids/mobile/view.announcement.html","text!grids/mobile/view.amGeneral.html"],function(e){var t=e("text!grids/mobile/view.workitem.html"),a=e("text!grids/mobile/view.configitem.html"),n=e("text!grids/mobile/view.knowledgemanager.html"),i=e("text!grids/mobile/view.announcement.html"),r=e("text!grids/mobile/view.amGeneral.html");return{build:function(e,o,s){var l=e.containerId||e.gridId,d=t,c="";switch(e.grid.GridType){case"ConfigItem":app.gridUtils.configureGenericGrid(l,e),d=a;break;case"EditableKnowledgeArticle":app.gridUtils.applyKmDashboardDataSourceConfig(l,e),d=n;break;case"Announcement":app.gridUtils.configureGenericGrid(l,e),d=i;break;case"CatalogItem":app.gridUtils.configureGenericGrid(l,e),d=r,c="/AssetManagement/Administration/CatalogItem/Edit/|ID|";break;case"LeaseContract":app.gridUtils.configureGenericGrid(l,e),d=r,c="/AssetManagement/Contract/Lease/Edit/|ID|";break;case"SupportAndMaintenanceContract":app.gridUtils.configureGenericGrid(l,e),d=r,c="/AssetManagement/Contract/SupportandMaintenance/Edit/|ID|";break;case"WarrantyContract":app.gridUtils.configureGenericGrid(l,e),d=r,c="/AssetManagement/Contract/Warranty/Edit/|ID|";break;case"HardwareAsset":app.gridUtils.configureGenericGrid(l,e),d=r,c="/AssetManagement/HardwareAsset/Edit/|ID|";break;case"SoftwareAsset":app.gridUtils.configureGenericGrid(l,e),d=r,c="/AssetManagement/SoftwareAsset/Edit/|ID|";break;case"Consumable":app.gridUtils.configureGenericGrid(l,e),d=r,c="/AssetManagement/Administration/Consumables/Edit/|ID|";break;case"CostCenter":app.gridUtils.configureGenericGrid(l,e),d=r,c="/AssetManagement/Administration/CostCenter/Edit/|ID|";break;case"Location":app.gridUtils.configureGenericGrid(l,e),d=r,c="/AssetManagement/Administration/Location/Edit/|ID|";break;case"NoticeEvent":app.gridUtils.configureGenericGrid(l,e),d=r,c="/AssetManagement/Administration/NoticeEvent/Edit/|ID|";break;case"Organization":app.gridUtils.configureGenericGrid(l,e),d=r,c="/AssetManagement/Administration/Organization/Edit/|ID|";break;case"Standard":app.gridUtils.configureGenericGrid(l,e),d=r,c="/AssetManagement/Administration/Standard/Edit/|ID|";break;case"Subnet":app.gridUtils.configureGenericGrid(l,e),d=r,c="/AssetManagement/Administration/Subnet/Edit/|ID|";break;case"Vendor":app.gridUtils.configureGenericGrid(l,e),d=r,c="/AssetManagement/Administration/Vendor/Edit/|ID|";break;case"License":app.gridUtils.configureGenericGrid(l,e),d=r,c="/AssetManagement/Administration/License/Edit/|ID|";break;case"PurchaseOrder":app.gridUtils.configureGenericGrid(l,e),d=r,c="/AssetManagement/Administration/PurchaseOrder/Edit/|ID|";break;case"Purchase":app.gridUtils.configureGenericGrid(l,e),d=r,c="/AssetManagement/Administration/Purchase/Edit/|ID|";break;case"Invoice":app.gridUtils.configureGenericGrid(l,e),d=r,c="/AssetManagement/Administration/Invoice/Edit/|ID|";break;default:app.gridUtils.configureGenericGrid(l,e)}e.dataSource.serverPaging=!0,e.dataSource.pageSize=10,e.dataSource.page=1,e.dataSource.total=0,e.dataSource.serverFiltering=!0;var u={viewModel:{controlId:l,GridType:e.grid.GridType,templateName:e.grid.GridType,source:new kendo.data.DataSource(e.dataSource),toolbar:e.toolbar,tasks:e.tasks,editUrl:c}};s(new kendo.View(d,{wrap:!1,model:u}).render())}}}),define("grids/gridBuilder",["grids/structure/defaultConfiguration/controller","grids/structure/events/controller","grids/structure/toolbar/controller","grids/columnTemplates/columnBase/controller","grids/columnTemplates/string/controller","grids/columnTemplates/number/controller","grids/columnTemplates/bool/controller","grids/columnTemplates/date/controller","grids/columnTemplates/SLOStatus/controller","grids/columnTemplates/command/controller","grids/columnTemplates/input/controller","grids/columnTemplates/anchor/controller","grids/structure/dataSource/controller","grids/structure/sourceFields/controller","grids/structure/drawer/controller","grids/mobile/controller"],function(config,events,toolbar,columnBase,string,number,boolean,date,slostatus,command,input,anchor,dataSource,sourceFields,drawer,mobileGrid){var configuration={},definition={build:function(vm,node,callback){var viewModel,columns=[];if(vm.tempProperties&&vm.tempProperties.fromViewBuilder){vm.tempProperties.fromGridBuilder=!0;var gridModel={containerId:node.Id,isAnalyst:window.session.user.Analyst||!1};node.content?gridModel.grid=node.content.grid:node.Definition&&(gridModel.grid=node.Definition.content.grid),vm.tempProperties.currentContainer.find(".append-here").append("<div id='"+gridModel.containerId+"' class='grid-container'></div>"),viewModel=gridModel}else!_.isUndefined(vm.fromQueryBuilder)&&vm.fromQueryBuilder?viewModel=vm:(node.layoutContainer.find(".container-fluid").append("<div id='"+vm.containerId+"' class='grid-container'></div>"),viewModel=vm);if(app.isMobile()&&"QueryBuilderGrid"!==viewModel.grid.GridType)return toolbar.build(viewModel,viewModel.grid.options.toolbar,function(e){viewModel.toolbar=e.toolbar,mobileGrid.build(viewModel,node,callback)});config.build(viewModel,viewModel.grid.options,function(defaultConfig){if(configuration=viewModel.grid.options,events.build(viewModel,viewModel.grid.events,function(){configuration.events=viewModel.events,viewModel.builtinEvents&&_.each(viewModel.builtinEvents,function(e,t){viewModel.grid.options[t]=e})}),toolbar.build(viewModel,viewModel.grid.options.toolbar,function(e){configuration.toolbar=e.toolbar}),_.each(viewModel.grid.columns,function(column){if(column.analystOnly&&!viewModel.isAnalyst)return!1;switch(column.DataType=column.DataType.toLowerCase(),column.DataType){case"datetime":column.DataType="date",column.template="#= "+column.field+" != null || "+column.field+" != undefined ? kendo.toString(new Date("+column.field+"), 'g'): '' #";break;case"date":column.template="#= "+column.field+" != null || "+column.field+" != undefined ? kendo.toString(new Date("+column.field+"), 'g'): '' #";break;case"numeric":column.DataType="number"}try{eval("var _obj = "+column.DataType+";")}catch(e){throw new app.lib.exception(column.DataType+" not found")}columnBase.build(viewModel,column,function(e){_.isUndefined(_obj)?columns.push(e):_obj.build(viewModel,e,function(e){columns.push(e)})})}),configuration.columns=columns,dataSource.build(viewModel,viewModel.grid.dataSourceOptions,function(){sourceFields.build(viewModel,viewModel.grid.columns,function(){configuration.dataBound=viewModel.onDataBound,configuration.change=viewModel.onGridChange,configuration.columnReorder=viewModel.onColumnReorder,configuration.columnResize=viewModel.onColumnResize,configuration.columnShow=viewModel.onColumnShow,configuration.columnHide=viewModel.onColumnHide,configuration.dataSource=new kendo.data.DataSource(viewModel.dataSource),configuration.dsConfig=viewModel.dataSource,configuration.columnMenuInit=function(e){
e.container.find(".k-menu").data("kendoMenu").bind("activate",function(e){e.item.is(":last-child")&&(e.item.find("span.k-dropdown.k-header").first().focus(),e.item.find("input").first().focus())})}})}),drawer.build(viewModel,viewModel.grid.drawerMenu),vm.tempProperties.fromViewBuilder){vm.gridModels=vm.gridModels||[];var gridWrapper;gridWrapper="small"==node.layoutSize?$("<div id='"+viewModel.containerId+"' class='grid-container grid-minimal'></div>"):$("<div id='"+viewModel.containerId+"' class='grid-container'></div>"),vm.gridModels.push({config:configuration,containerId:viewModel.containerId,refreshInterval:node.refreshInterval,gridJsonDataForCountdown:viewModel.gridJsonDataForCountdown}),callback(gridWrapper)}else callback(configuration)})}};return definition}),define("text!viewPanels/queryBuilder/view.html",[],function(){return'<div data-bind="templateResources:\'resources\'" style="display:none">\r\n\r\n    <div data-template-name="sectionTemplate">\r\n        <div class="query-or" data-bind="localize: Or, invisible: isFirstSection"></div>\r\n        <label data-bind="localize: {key: QuerySectionTitle, value: displayName, localizeValue: false}"></label>\r\n        <div data-template="rootCriteriaTemplate" data-bind="source:criteriaRoot"></div>\r\n        \x3c!--<input type="checkbox" data-bind="checked:showJson" /> ShowJson\r\n        <div data-bind="prettyJson:criteriaRoot, visible: showJson"></div>--\x3e\r\n    </div>\r\n\r\n    <span data-template-name="isnull"></span>\r\n    <span data-template-name="isnotnull"></span>\r\n    <span data-template-name="isme"></span>\r\n    <span data-template-name="isnotme"></span>\r\n\r\n    <div data-template-name="rootCriteriaTemplate" class="rules-group-container">\r\n        <div class="section-header">\r\n\r\n            <div class="pull-right">\r\n                <button class="btn btn-primary k-button" data-bind="click: createCriteriaGroup, localize: AddGroup">*AddGroup*</button>\r\n                <button class="btn btn-primary k-button" data-bind="click: createCriteria, localize: AddFilter">*AddFilter*</button>\r\n                <button class="btn btn-danger k-button" data-bind="click: removeCriteria, localize: Remove">*Remove*</button>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="rules-group-header">\r\n\r\n            <select data-bind="value:groupOperator">\r\n                <option value="And" data-bind="localize: And">*And*</option>\r\n                <option value="Or" data-bind="localize: Or">*Or*</option>\r\n            </select>\r\n        </div>\r\n        \x3c!--<span data-bind="text:type"></span><input data-bind="value: value" />--\x3e\r\n        <div class="rules-group-body">\r\n            <div data-template="criteriaItemContainer" data-bind="source:items" class="rules-list"></div>\r\n        </div>\r\n        \x3c!--<button data-bind="click: createCriteriaGroup">Add Group</button>\r\n        <button data-bind="click: createCriteria">Add Filter</button>--\x3e\r\n    </div>\r\n\r\n    <div class="rule-container defined-form" role="form" data-template-name="criteriaItemContainer" data-bind="templateSwitch:type">\r\n        <div data-case="criteriaGroupTemplate" class="rule-group-container">\r\n            \x3c!--<button data-bind="click:createCriteriaGroup">add group</button>--\x3e\r\n            <div data-template="rootCriteriaTemplate" data-bind="source:this"></div>\r\n        </div>\r\n        <div data-case="criteriaTemplate" class="form-inline">\r\n            <div class="form-group">\r\n                <input data-role="combobox"\r\n                       data-placeholder="Choose field..."\r\n                       data-text-field="displayName"\r\n                       data-value-primitive="false"\r\n                       data-value-field="name"\r\n                       data-bind="value: field, source: fields, events:{change:onFieldChanged}"\r\n                       class="" />\r\n            </div>\r\n            <div class="form-group">\r\n                <input data-role="dropdownlist"\r\n                       data-placeholder="..."\r\n                       data-text-field="display"\r\n                       data-value-primitive="true"\r\n                       data-value-field="name"\r\n                       data-bind="value: operator, source: validOperators, events:{change:onOperatorChanged}"\r\n                       class="rule-container-operator" />\r\n            </div>\r\n            <div data-bind="templateSwitch: field.fieldType, visible: showCriteriaControl" class="form-group"></div>\r\n\r\n            <button type="submit" class="btn btn-danger k-button" data-bind="click: removeCriteria, localize: Remove"></button>\r\n        </div>\r\n    </div>\r\n\r\n    \x3c!--field type templates--\x3e\r\n    <div data-template-name="enumTemplate" data-url="/api/V3/Enum/GetList" data-bind="ciresonEnumPicker:field.templateValue, value:value.enumValue"></div>\r\n    <div data-template-name="affectedconfigitemTemplate" data-bind="ciresonConfigItemBehavior: value.configItemValue" class="config-item-dropdown">\r\n        <div data-template-part="dropDownTreePart" data-url="/api/V3/Config/GetAffectedItemsList/" data-bind="ciresonDropDownTree:field.templateValue, value:value.configItemValue">\r\n            <span class="config-search" data-template-part="searchButtonPart"></span>\r\n        </div>\r\n    </div>\r\n\r\n    <div data-template-name="relatedconfigitemTemplate" data-bind="ciresonConfigItemBehavior: value.configItemValue" class="config-item-dropdown">\r\n        <div data-template-part="dropDownTreePart" data-url="/api/V3/Config/GetAffectedItemsList/" data-bind="ciresonDropDownTree:field.templateValue, value:value.configItemValue">\r\n            <span class="config-search" data-template-part="searchButtonPart"></span>\r\n        </div>\r\n    </div>\r\n    <span data-template-name="stringTemplate" class="search-text">\r\n        <input class="k-textbox input-sm search-text" data-default data-bind="value: value.stringValue" />\r\n    </span>\r\n    <span data-template-name="doubleTemplate" class="search-text">\r\n        <input data-role="numerictextbox"\r\n               ddata-format="#"\r\n               data-min="0"\r\n               data-step="1"\r\n               data-decimal="0"\r\n               data-bind="value: value.stringValue"\r\n               class="" />\r\n    </span>\r\n    <div data-template-name="boolTemplate">\r\n        <div class="form-group">\r\n            <input data-role="combobox"\r\n                   data-text-field="name"\r\n                   data-value-field="value"\r\n                   data-value-primitive="true"\r\n                   data-placeholder="..."\r\n                   data-source="[{ name: \'True\', value: \'1\' },{ name: \'False\', value: \'0\' }]"\r\n                   data-bind="value: value.stringValue"\r\n                   class="" />\r\n        </div>\r\n    </div>\r\n    <div data-template-name="dateTemplate" data-bind="templateSwitch:operator">\r\n        <div data-default>\r\n            <div data-bind="ciresonRelativeDatePicker:value.isRelative">\r\n                <span data-bind="visible:value.isRelative">\r\n                    <span class="form-group">\r\n                        <input data-role="numerictextbox"\r\n                               ddata-format="#"\r\n                               data-min="0"\r\n                               data-step="1"\r\n                               data-decimal="0"\r\n                               data-bind="visible:showNumericPicker, value: value.numericValue, events:{change: dropdownChange}"\r\n                               class="" />\r\n                    </span>\r\n                    <span class="form-group">\r\n                        <input data-role="combobox"\r\n                               data-text-field="name"\r\n                               data-value-field="value"\r\n                               data-value-primitive="true"\r\n                               data-placeholder="..."\r\n                               data-bind="value: value.relativeDateValue, source: dropdownDataSource, events:{change: dropdownChange}"\r\n                               class="" />\r\n                    </span>\r\n                </span>\r\n                <span class="form-group" data-bind="visible:showDatePicker">\r\n                    <input data-parse-formats="yyyy-MM-ddThh:mm:ss" data-bind="value: value.dateValue, ciresonDateTimePicker:value.dateValue" />\r\n                </span>\r\n                <span class="relative-datetime form-group">\r\n                    <label class=" checkbox">\r\n                        <input type="checkbox" data-bind="checked: value.isRelative" />\r\n                        <span data-bind="localize:RelativeDate" class="checkbox-label"></span>\r\n                    </label>\r\n                </span>\r\n            </div>\r\n        </div>\r\n        <div data-case="between">\r\n            <div data-bind="ciresonRelativeDatePicker:value.isRelative">\r\n                <span data-bind="visible:value.isRelative">\r\n                    <span class="form-group">\r\n                        <input data-role="numerictextbox"\r\n                               ddata-format="#"\r\n                               data-min="0"\r\n                               data-step="1"\r\n                               data-decimal="0"\r\n                               data-bind="visible:showNumericPicker, value: value.numericValue, events:{change: dropdownChange}"\r\n                               class="" />\r\n                    </span>\r\n                    <span class="form-group">\r\n                        <input data-role="combobox"\r\n                               data-text-field="name"\r\n                               data-value-field="value"\r\n                               data-value-primitive="true"\r\n                               data-placeholder="..."\r\n                               data-bind="value: value.relativeDateValue, source: dropdownDataSource, events:{change: dropdownChange}"\r\n                               class="" />\r\n                    </span>\r\n                </span>\r\n                <span class="form-group" data-bind="visible:showDatePicker">\r\n                    <input data-parse-formats="yyyy-MM-ddThh:mm:ss" data-bind="value: value.dateValue, ciresonDateTimePicker:value.dateValue" />\r\n                </span>\r\n                <span class="relative-datetime form-group">\r\n                    <label class=" checkbox">\r\n                        <input type="checkbox" data-bind="checked: value.isRelative" />\r\n                        <span data-bind="localize:RelativeDate" class="checkbox-label"></span>\r\n                    </label>\r\n                </span>\r\n            </div>\r\n            -\r\n            <div data-bind="ciresonRelativeEndDatePicker:this">\r\n                <span data-bind="visible:value.isEndRelative">\r\n                    <span class="form-group">\r\n                        <input data-role="numerictextbox"\r\n                               ddata-format="#"\r\n                               data-min="0"\r\n                               data-step="1"\r\n                               data-decimal="0"\r\n                               data-bind="visible:value.showEndNumericPicker, value: value.numericEndValue, events:{change: dropdownEndChange}"\r\n                               class="" />\r\n                    </span>\r\n                    <span class="form-group">\r\n                        <input data-role="combobox"\r\n                               data-text-field="name"\r\n                               data-value-field="value"\r\n                               data-value-primitive="true"\r\n                               data-placeholder="..."\r\n                               data-bind="value: value.relativeEndDateValue, source: dropdownDataSource, events:{change: dropdownEndChange}"\r\n                               class="" />\r\n                    </span>\r\n                </span>\r\n                <span data-bind="visible:value.showEndDatePicker">\r\n                    <input data-parse-formats="yyyy-MM-ddThh:mm:ss" data-bind="value: value.endValue, ciresonDateTimePicker:value.endValue" />\r\n                </span>\r\n                <span class="relative-datetime">\r\n                    <label class=" checkbox">\r\n                        <input type="checkbox" data-bind="checked: value.isEndRelative" />\r\n                        <span data-bind="localize:RelativeDate" class="checkbox-label"></span>\r\n                    </label>\r\n                </span>\r\n\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n    \x3c!--row template for objectView tables.--\x3e\r\n    <table>\r\n        <tr data-template-name="keyValueRowTemplate">\r\n            <td data-bind="text:key"></td>\r\n            <td data-bind="text:val"></td>\r\n        </tr>\r\n    </table>\r\n    <div data-template-name="userTemplate">\r\n        <div class="input-group user-picker" data-default data-bind="ciresonUserPickerBehavior: value.userValue">\r\n            <div data-template-part="userDetailWindowPart" data-title="Window Title goes here">\r\n                <table><tbody data-template="keyValueRowTemplate" data-bind="source: userDetailDataSource"></tbody></table>\r\n            </div>\r\n\r\n            <div class="input-group ad-user-group">\r\n                <span tabindex="-1" role="presentation" class="k-widget k-autocomplete k-header form-control k-state-default" data-bind="style:{paddingLeft: paddingLeft}">\r\n                    <i class="ad-user-info fa fa-info-circle cursor-pointer info-icon text-primary" data-template-part="detailsButtonPart" data-bind="visible: value.userValue.Id"></i>\r\n                    <input data-template-part="autoCompleteInputPart" data-value-primitive="false" data-bind="value:value.userValue" type="text" class="ad-user-input form-control k-input" data-role="autocomplete" autocomplete="off" role="textbox" aria-haspopup="true" aria-disabled="false" aria-readonly="false" aria-autocomplete="both" aria-owns="" style="width: 100%;">\r\n                    <span class="ad-user-search searchIcon" data-template-part="searchButtonPart">\r\n                        <i class="fa fa-search cursor-pointer text-primary"></i>\r\n                    </span>\r\n                </span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    \x3c!--listview template--\x3e\r\n    <div data-template-name="mobileGridTemplate" class="gridcard gridcard--workitem">\r\n        <p class="gridcard__title">#: Title #</p>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if ( Priority && Priority.length > 0 ){ #\r\n                <span>#: localizationHelper.localize("Priority") # #: Priority # </span>\r\n                # } #\r\n\r\n                # if ( Priority && Priority.length > 0 && AffectedUser && AffectedUser.length > 0 ){ #\r\n                &middot;\r\n                # } #\r\n\r\n                # if ( AffectedUser && AffectedUser.length > 0 ){ #\r\n                <span>#: AffectedUser #</span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if ( Category && Category.length > 0 ){ #\r\n                <span>#: Category # </span>\r\n                # } #\r\n\r\n                # if ( Category && Category.length > 0 && Id && Id.length > 0 ){ #\r\n                &middot;\r\n                # } #\r\n\r\n                # if ( Id && Id.length > 0 ){ #\r\n                <span>#: Id # </span>\r\n                # } #\r\n            </p>\r\n        </div>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                <span>#: localizationHelper.localize("LastWorked") #: #: moment(kendo.toString(new Date(LastModified))).fromNow() #</span>\r\n            </p>\r\n            <p>\r\n                <span>#: localizationHelper.localize("Age") #: #: moment(kendo.toString(new Date(Created))).fromNow() #</span>\r\n            </p>\r\n        </div>\r\n        <div class="gridcard__detailblock">\r\n            <p>\r\n                # if ( AssignedUser && AssignedUser.length > 0 ){ #\r\n                <span>#: localizationHelper.localize("AssignedTo") #: #: AssignedUser # </span>\r\n                # } #\r\n            </p>\r\n            <p>\r\n                # if ( Tier && Tier.length > 0 ){ #\r\n                <span>#: localizationHelper.localize("SupportGroup") #: #: Tier # </span>\r\n                # } #\r\n            </p>\r\n        </div>\r\n    </div>\r\n\r\n    \x3c!--end field type templates--\x3e\r\n</div>\r\n\r\n<div class="defined-form" data-bind="events: {keypress: searchOnEnter}">\r\n\r\n    <button class="wi-search-edit-btn btn btn-link btn-default k-button pull-right" data-bind="toggleValue: editMode, localize:Edit, visible: validActions.save"></button>\r\n\r\n    <div data-bind="slide: editMode" style="display:none" class="wi-search-wrapper">\r\n\r\n        <div class="form-inline margin-b20">\r\n            <div class="form-group">\r\n                <label data-bind="localize:AddWorkItemTypeSectionToSearchBy"></label>\r\n                <div data-role="dropdownlist" data-placeholder="Choose Work Item Type"  data-bound="updateModel" data-text-field="displayName" data-bind="source: sectionDefs, value: selectedSection"></div>\r\n            </div>\r\n            <div class="form-group">\r\n                <label> &nbsp;</label> \x3c!--trick to line up button--\x3e\r\n                <button class="btn btn-primary k-button" data-bind="click: addCriteriaSection, localize:AddSection"></button>\r\n            </div>\r\n        </div>\r\n\r\n        <div data-template="sectionTemplate" data-bind="source: query"></div>\r\n        <button data-bind="drawerMenuCommand:{titleKey: SearchButton, icon: fa-search, command: executeSearch, visible: validActions.search}"></button>\r\n\r\n        <div data-bind="modalDialogBehavior:this, dialogConfirmAction:clearQuery">\r\n            <div data-template-part="dialogWindowPart" data-title="ClearQuery" style="min-height:150px; min-width:300px;">\r\n                <span data-bind="localize: clearQueryPrompt">*clearquery?*</span>\r\n                <div class="window-buttons">\r\n                    <button class="btn btn-primary k-button" data-template-part="commandPart" data-bind="localize:Yes, click:clearQuery"></button>\r\n                    <button class="btn btn-default k-button" data-template-part="commandPart" data-bind="localize:No"></button>\r\n                </div>\r\n            </div>\r\n            <button data-template-part="openTriggerPart" data-bind="drawerMenuCommand:{titleKey: ClearQuery, icon: fa-times, visible: validActions.clearQuery}">*ClearQuery*</button>\r\n        </div>\r\n        <div data-bind="modalDialogBehavior:this, dialogConfirmAction:saveQuery">\r\n            <div data-template-part="dialogWindowPart" data-title="savequery" style="min-height:150px; min-width:350px;">\r\n                <div class="form-group">\r\n                    <label data-bind="localize: QueryName"></label>\r\n                    <input type="text" class="form-control k-textbox" data-bind="value:queryName" data-value-update="keyup">\r\n                    <div class="error" data-bind="visible: queryNameInValid, localize: QueryNameAlphaNumericValidationError"></div>\r\n                </div>\r\n                <div class="window-buttons">\r\n                    <button class="btn btn-primary k-button" data-template-part="commandPart" data-bind="click:saveQuery, enabled: queryNameValid, localize:Save">*Save*</button>\r\n                    <button class="btn btn-default k-button" data-template-part="commandPart" data-bind="localize:Cancel">*Cancel*</button>\r\n                </div>\r\n            </div>\r\n            <button data-template-part="openTriggerPart" data-bind="drawerMenuCommand:{titleKey: Save, icon: fa-check, visible: validActions.save}">*Save*</button>\r\n        </div>\r\n        <div data-bind="modalDialogBehavior:this, dialogConfirmAction:saveQueryAs">\r\n            <div data-template-part="dialogWindowPart" data-title="savequeryas" style="min-height:150px; min-width:350px;">\r\n                <div class="form-group">\r\n                    <label data-bind="localize: QueryName"></label>\r\n                    <input type="text" class="form-control k-textbox" data-bind="value:queryName" data-value-update="keyup">\r\n                    <div class="error" data-bind="visible: queryNameInValid, localize: QueryNameAlphaNumericValidationError"></div>\r\n                </div>\r\n                <div class="window-buttons">\r\n                    <button class="btn btn-primary k-button" data-template-part="commandPart" data-bind="click:saveQueryAs, enabled: queryNameValid, localize:SaveAs">*saveas*</button>\r\n                    <button class="btn btn-default k-button" data-template-part="commandPart" data-bind="localize:Cancel">*cancel*</button>\r\n                </div>\r\n            </div>\r\n            <button data-template-part="openTriggerPart" data-bind="drawerMenuCommand:{titleKey: SaveAs, icon: fa-save, visible: validActions.saveAs}"></button>\r\n        </div>\r\n        <div data-bind="modalDialogBehavior:this, dialogConfirmAction:deleteQuery">\r\n            <div data-template-part="dialogWindowPart" data-title="deletequery" style="min-height:150px; min-width:300px;">\r\n                <div class="form-group">\r\n                    <label data-bind="localize: DeleteQuery"></label>\r\n                    <span data-bind="text:queryName"></span>\r\n                </div>\r\n                <div class="window-buttons">\r\n                    <button class="btn btn-primary k-button" data-template-part="commandPart" data-bind="click:deleteQuery, enabled: queryName, localize:Delete">*Delete*</button>\r\n                    <button class="btn btn-default k-button" data-template-part="commandPart" data-bind="localize:Cancel">*Cancel*</button>\r\n                </div>\r\n            </div>\r\n            <button data-template-part="openTriggerPart" data-bind="drawerMenuCommand:{titleKey: Delete, icon: fa-trash, visible: validActions.delete}">*Delete*</button>\r\n        </div>\r\n    </div>\r\n    \x3c!--<div data-role="treeview" data-template="criteriaTreeNodeTemplate" data-bind="source:criteriaRoot"></div>--\x3e\r\n    \x3c!--<div data-bind="prettyJson: sections"></div>--\x3e\r\n\r\n\r\n\r\n    <div data-bind="ciresonGrid: gridVm" class="wi-search-results"></div>\r\n\r\n    \x3c!--<div style="padding-top:40px" class="query-builder-grid-wrapper"></div>--\x3e\r\n</div>\r\n'}),define("viewPanels/queryBuilder/controller",["require","text!viewPanels/queryBuilder/view.html","../../grids/gridBuilder"],function(e){var t=e("text!viewPanels/queryBuilder/view.html");e("../../grids/gridBuilder");return{template:t,build:function(e,a,n){var i=_.template(t),r=queryBuilderStandardConfigurationDefinitions[a.Definition.content.configurationName];if(!r)throw"Invalid configuration name: "+a.Definition.content.configurationName;var o=r.schemaDef,s=o.commonFields||[],l=a.Definition.content.query,d=a.Definition.content.navigationNodeId,c=localizationHelper.localize(e.header.title,e.header.title);d||(c="");for(var u=[],p=0;p<o.sections.length;p++){var m=o.sections[p];m.displayName=localizationHelper.localize(m.displayKey),m.fields=_.chain(m.fields.concat(s)).map(function(e){return e.displayName=localizationHelper.localize(e.displayKey),e}).sortBy("displayName").value(),u.push(m)}var f=function(e){var t=kendo.observable({field:{type:""},operator:"",value:{},type:"criteria",groupId:e.uid,sectionId:e.sectionId,sectionTypeName:e.sectionTypeName,fields:b(e.sectionTypeName),validOperators:[],showCriteriaControl:!0});return t.set("field",t.fields[0]),t.set("validOperators",k.fieldTypes[t.field.fieldType].validOperators),t.set("operator",t.validOperators[0].name),t},v=function(e){var t=kendo.observable({groupOperator:"And",items:[],type:"criteriaGroup",sectionId:e.sectionId,sectionTypeName:e.name||e.sectionTypeName});return t.items.push(f(t)),t},g=function(e){return e.sectionId=app.lib.newGUID(),{sectionTypeName:e.name,displayName:e.displayName,classId:e.classId,criteriaRoot:v(e),sectionId:e.sectionId}},b=function(e){return _.filter(u,function(t){return t.sectionTypeName==e||t.name==e})[0].fields},h=function(e,t){if(t==e)return t;if(!(t.items&&t.items.length>0))return null;if(t.items.indexOf(e)>=0)return t;for(var a=0;a<t.items.length;a++){var n=h(e,t.items[a]);if(n)return n}},w=function(e,t){return _.filter(t,function(t){return t.sectionId==e.sectionId})[0]},y={empty:{name:"",display:"",canHaveValue:!0},eq:{name:"eq",display:"=",canHaveValue:!0},ne:{name:"ne",display:"<>",canHaveValue:!0},contains:{name:"contains",display:localizationHelper.localize("Contains"),canHaveValue:!0},startsWith:{name:"startsWith",display:localizationHelper.localize("Startswith"),canHaveValue:!0},endsWith:{name:"endsWith",display:localizationHelper.localize("Endswith"),canHaveValue:!0},gt:{name:"gt",display:">",canHaveValue:!0},lt:{name:"lt",display:"<",canHaveValue:!0},gte:{name:"gte",display:">=",canHaveValue:!0},lte:{name:"lte",display:"<=",canHaveValue:!0},between:{name:"between",display:localizationHelper.localize("Between"),canHaveValue:!0},isnull:{name:"isnull",display:localizationHelper.localize("IsNull"),canHaveValue:!1},isnotnull:{name:"isnotnull",display:localizationHelper.localize("IsNotNull"),canHaveValue:!1},isme:{name:"isme",display:localizationHelper.localize("IsLoggedInUser"),canHaveValue:!1},isnotme:{name:"isnotme",display:localizationHelper.localize("IsNotLoggedInUser"),canHaveValue:!1}},k=kendo.observable({query:l||[],queryName:c,queryNameValid:function(){return new RegExp("^[a-zA-Z0-9() !@#$.%]+$").test(this.get("queryName"))},queryNameInValid:function(){return!this.queryNameValid()},selectedSection:{},sectionDefs:u,gridVm:r.gridDefaultConfig,isSavedQuery:!_.isUndefined(d),persistGridState:!_.isUndefined(d),editMode:!1,renderGrid:!1,validActions:{search:!0,save:void 0!=d,saveAs:!0,delete:void 0!=d,clearQuery:!0},fieldTypes:{string:{validOperators:[y.eq,y.ne,y.contains,y.startsWith,y.endsWith,y.isnull,y.isnotnull]},date:{validOperators:[y.eq,y.ne,y.gt,y.lt,y.gte,y.lte,y.between,y.isnull,y.isnotnull]},enum:{validOperators:[y.eq,y.ne]},user:{validOperators:[y.eq,y.ne,y.isnull,y.isnotnull,y.isme,y.isnotme]},affectedconfigitem:{validOperators:[y.eq,y.ne]},relatedconfigitem:{validOperators:[y.eq,y.ne]},bool:{validOperators:[y.eq]},double:{validOperators:[y.eq,y.ne,y.gt,y.lt,y.gte,y.lte,y.isnull,y.isnotnull]}},getSectionSchemaFields:function(e){var t=w(e,this.query);if(t&&t.sectionTypeName){var t=_.chain(this.sectionDefs).filter(function(e){return e.name==t.sectionTypeName}).value()[0];return t.fields}},isFirstSection:function(e){var t=this.get("query");if(t.length>0)return e==t[0]||e==t[1]},paddingLeft:function(e){return(e.value.get("userValue")||{}).Id?"14px":"0"},createCriteria:function(e){var t=e.data;if(t){var a=t.items.length>0?t.items[0]:t,n=f(a);t.items.push(n)}},createCriteriaGroup:function(e){var t=e.data||this.criteriaRoot,a=v(t.items[0]);t.items.push(a)},addCriteriaSection:function(e){if(this.selectedSection&&this.selectedSection.name){var t=g(this.selectedSection);this.query.push(t)}},removeCriteria:function(e){var t=e.data,a=w(t,this.query),n=h(t,a.criteriaRoot);if(a&&n==t&&this.removeSection({data:a}),n){var i=n.items.indexOf(t);i>=0&&n.items.splice(i,1)}},removeSection:function(e){var t=e.data,a=this.query.indexOf(t);a>=0&&this.query.splice(a,1)},onFieldChanged:function(e){var t=e.data;t.set("showCriteriaControl",!0),t.set("validOperators",this.fieldTypes[t.field.fieldType].validOperators),t.set("operator",t.validOperators[0].name)},saveQuery:function(e){var t=a;t.Definition.content.query=this.query,t.Definition.content.navigationNodeId=d||"";var n={displayStringText:this.queryName,navigationNodeId:d,viewPanel:t};$.ajax({url:"/Search/UpsertSearch",dataType:"json",type:"POST",data:{searchValue:this.stringifyQueryModel(n)},success:function(e){e.success&&(app.clearNodeStorage(),app.clearViewPanelStorage(),window.location="/View/"+e.data)}})},saveQueryAs:function(e){var t=a;t.Definition.content.query=this.query,t.Definition.content.navigationNodeId=void 0,t.Id=void 0;var n={displayStringText:this.queryName,navigationNodeId:void 0,viewPanel:t};$.ajax({url:"/Search/UpsertSearch",dataType:"json",type:"POST",data:{searchValue:this.stringifyQueryModel(n)},success:function(e){e.success&&(app.clearNodeStorage(),app.clearViewPanelStorage(),window.location="/View/"+e.data)}})},deleteQuery:function(e){var t=a;t.Definition.content.query=this.query,t.Definition.content.navigationNodeId=d||"";var n={displayStringText:this.queryName,navigationNodeId:d,viewPanel:t};$.ajax({url:"/Search/DeleteSearch",dataType:"json",type:"POST",data:{searchValue:this.stringifyQueryModel(n)},success:function(e){e.success&&(app.clearNodeStorage(),app.clearViewPanelStorage(),window.location="/View/0316e159-2806-43b2-9018-b695f7bc1088")}})},searchOnEnter:function(e){try{13==e.charCode&&(e.originalEvent.srcElement.blur(),this.executeSearch(e))}catch(e){}},executeSearch:function(e){k.set("renderGrid",!0),k.set("gridVm",k.getGridVm())},getGridVm:function(){var e=r.gridDefaultConfig;return e.isSavedQuery=k.isSavedQuery,e.persistGridState=k.persistGridState,k.isSavedQuery?(e.gridId=d,k.updateSavedQueryModel()):e.gridId="wiSearchGridContainer",e.grid.dataSourceOptions={transport:{read:{url:"/search/GetAdHocResults",dataType:"json",type:"post",data:{filterCriteria:k.stringifyQueryModel(k.query),dataTable:"WorkItem"}}}},e},clearQuery:function(e){var t=this;t.set("query",[]),t.set("renderGrid",!1),t.set("gridVm",t.getGridVm()),r.initialize(t,!0)},stringifyQueryModel:function(e){return kendo.stringify(e,function(e,t){var a=["userDetailDataSource","validOperators","fields"],n={};if($(a).each(function(e,t){n[t]=!0}),!n[e])return t})},onOperatorChanged:function(e){var t=e.data,a=t.get("operator");"isme"==a||"isnotme"==a||"isnull"==a||"isnotnull"==a?t.set("showCriteriaControl",!1):t.set("showCriteriaControl",!0),"isme"!=a&&"isnotme"!=a||t.value.set("userValue",{Id:session.user.Id,Name:session.user.Name})},updateSavedQueryModel:function(){_.each(k.query,function(e){_.isUndefined(e.criteriaRoot)||_.isNull(e.criteriaRoot)||_.isUndefined(e.criteriaRoot.items)||_.isNull(e.criteriaRoot.items)||_.each(e.criteriaRoot.items,function(e){if("isme"!=e.operator&&"isnotme"!=e.operator||e.value.set("userValue",{Id:session.user.Id,Name:session.user.Name}),!_.isUndefined(e.value)&&_.isUndefined(e.value.numericValue)&&(e.value.numericValue=0),!_.isUndefined(e.value)&&!_.isUndefined(e.value.isRelative)&&1==e.value.isRelative){var t=e.value.relativeDateValue,a=e.value.numericValue,n=k.getRelativeDate(t,a);if(e.value.set("dateValue",kendo.toString(new Date(n.setHours(0,0,0,0)),"g")),"between"==e.operator){var i=e.value.relativeEndDateValue,r=e.value.numericEndValue,o=k.getRelativeDate(i,r);e.value.set("endValue",kendo.toString(new Date(o.setHours(0,0,0,0)),"g"))}}})})},getRelativeDate:function(e,t){var a=new Date,n=new Date,i=Math.round((n.getMonth()-1)/3+1);switch(e){case"tomorrow":case"daysfromnow":a.setDate(n.getDate()+t);break;case"yesterday":case"daysago":a.setDate(n.getDate()-t);break;case"monthsfromnow":a.setMonth(n.getMonth()+t);break;case"monthsago":a.setMonth(n.getMonth()-t);break;case"yearsfromnow":a.setFullYear(n.getFullYear()+t);break;case"yearsago":a.setFullYear(n.getFullYear()-t);break;case"firstdayofmonth":a=new Date(n.getFullYear(),n.getMonth(),1);break;case"lastdayofmonth":a=new Date(n.getFullYear(),n.getMonth()+1,0);break;case"firstdayofyear":a=new Date(n.getFullYear(),0,1);break;case"lastdayofyear":a=new Date(n.getFullYear(),11,31);break
;case"firstdayofquarter":a=new Date(n.getFullYear(),3*i-2-1,1);break;case"lastdayofquarter":a=new Date(n.getFullYear(),3*i-1+1,0)}return a},updateCriteriaGroup:function(e,t){e.items&&e.items.length>0?_.each(e.items,function(e){e.items?k.updateCriteriaGroup(e,t):k.updateCriteria(e,t)}):k.updateCriteria(e,t)},updateCriteria:function(e,t){_.isUndefined(e.fields)&&e.set("fields",b(t.sectionTypeName)),_.isUndefined(e.validOperators)&&(e.set("validOperators",k.fieldTypes[e.field.fieldType].validOperators),k.onOperatorChanged({data:e})),_.isUndefined(e.value.enumValue)||_.isUndefined(e.value.enumValue.Name)&&(e.value.enumValue.Name=e.value.enumValue.Text)},updateCriteriaSection:function(){_.each(this.query,function(e){_.isUndefined(e.sectionId)&&(e.sectionId=app.lib.newGUID()),_.each(e.criteriaRoot.items,function(t){_.isUndefined(t.sectionId)&&t.set("sectionId",e.sectionId),_.isUndefined(t.sectionTypeName)&&t.set("sectionTypeName",e.sectionTypeName),k.updateCriteriaGroup(t,e)})})}});r.initialize&&r.initialize(k),n(new kendo.View(i(),{wrap:!1,model:kendo.observable(k)}).render())}}});var queryBuilderStandardConfigurationDefinitions={workItemConfig:{initialize:function(e,t){if(e.query&&0!=e.query.length)e.updateCriteriaSection(),e.executeSearch();else{var a=app.lib.getQueryParams(location.search);if(e.set("selectedSection",e.sectionDefs[0]),e.addCriteriaSection(),a.searchtext&&!t){var n=decodeURIComponent(a.searchtext);e.query[0].criteriaRoot.groupOperator="Or",e.query[0].criteriaRoot.set("items",[{field:{name:"title",displayKey:"Title",dataType:"string",fieldType:"string",templateValue:"",displayName:"Title"},operator:"contains",value:{stringValue:n},type:"criteria"},{field:{name:"description",displayKey:"Description",dataType:"string",fieldType:"string",templateValue:"",displayName:"Description"},operator:"contains",value:{stringValue:n},type:"criteria"}]),e.updateCriteriaSection(),e.executeSearch(),e.set("editMode",!0)}else e.set("editMode",!0)}app.lib.getNavNode(function(t){_.isNull(t)||"512cadbb-998b-4f10-b7ef-37f3b0f6e698"==t.ParentId||"0316e159-2806-43b2-9018-b695f7bc1088"==t.Id||session.user.IsAdmin||e.set("validActions",{search:!1,save:!1,saveAs:!1,delete:!1,clearQuery:!1})})},schemaDef:{commonFields:[{name:"WorkItem.WorkItemId",displayKey:"ID",fieldType:"string",templateValue:""},{name:"Title",displayKey:"Title",fieldType:"string",templateValue:""},{name:"Description",displayKey:"Description",fieldType:"string",templateValue:""},{name:"AssignedUserId",displayKey:"AssignedTo",fieldType:"user",templateValue:""},{name:"Created",displayKey:"CreatedDate",fieldType:"date",templateValue:""},{name:"ContactMethod",displayKey:"ContactMethod",fieldType:"string",templateValue:""},{name:"DisplayName",displayKey:"DisplayName",fieldType:"string",templateValue:""},{name:"ActualDowntimeEndDate",displayKey:"ActualDowntimeEndDate",fieldType:"date",templateValue:""},{name:"ActualDowntimeStartDate",displayKey:"ActualDowntimeStartDate",fieldType:"date",templateValue:""},{name:"ActualEndDate",displayKey:"ActualEndDate",fieldType:"date",templateValue:""},{name:"ActualStartDate",displayKey:"ActualStartDate",fieldType:"date",templateValue:""},{name:"FirstAssignedDate",displayKey:"FirstAssignedDate",fieldType:"date",templateValue:""},{name:"FirstResponseDate",displayKey:"FirstResponseDate",fieldType:"date",templateValue:""},{name:"RequiredByDate",displayKey:"RequiredByDate",fieldType:"date",templateValue:""},{name:"ScheduledDowntimeEndDate",displayKey:"ScheduledDowntimeEndDate",fieldType:"date",templateValue:""},{name:"ScheduledDowntimeStartDate",displayKey:"ScheduledDowntimeStartDate",fieldType:"date",templateValue:""},{name:"ScheduledEndDate",displayKey:"ScheduledEndDate",fieldType:"date",templateValue:""},{name:"ScheduledStartDate",displayKey:"ScheduledStartDate",fieldType:"date",templateValue:""},{name:"ActualCost",displayKey:"ActualCost",fieldType:"double",templateValue:""},{name:"EffortCompleted",displayKey:"EffortCompleted",fieldType:"double",templateValue:""},{name:"PlannedCost",displayKey:"PlannedCost",fieldType:"double",templateValue:""},{name:"EffortEstimate",displayKey:"EffortEstimate",fieldType:"double",templateValue:""},{name:"IsDowntime",displayKey:"IsDowntime",fieldType:"bool",templateValue:""},{name:"IsParent",displayKey:"IsParent",fieldType:"bool",templateValue:""},{name:"LastModified",displayKey:"LastModified",fieldType:"date",templateValue:""},{name:"ClosedDate",displayKey:"ClosedDate",fieldType:"date",templateValue:""},{name:"IsUseWatchList",displayKey:"UseWatchList",fieldType:"bool",templateValue:""}],sections:[{displayKey:"AllWorkItems",name:"ALL",classId:"",fields:[]},{displayKey:"Incidents",name:"IR",classId:"A604B942-4C7B-2FB2-28DC-61DC6F465C68",fields:[{name:"statusId",displayKey:"Status",fieldType:"enum",templateValue:"89b34802-671e-e422-5e38-7dae9a413ef8"},{name:"sourceId",displayKey:"Source",fieldType:"enum",templateValue:"5d59071e-69b3-7ef4-6dee-aacc5b36d898"},{name:"categoryId",displayKey:"Classification",fieldType:"enum",templateValue:"1f77f0ce-9e43-340f-1fd5-b11cc36c9cba"},{name:"tierId",displayKey:"SupportGroup",fieldType:"enum",templateValue:"c3264527-a501-029f-6872-31300080b3bf"},{name:"AffectedUserId",displayKey:"AffectedUser",fieldType:"user",templateValue:""},{name:"ConfigurationItemId",displayKey:"AffectedItem",fieldType:"affectedconfigitem",templateValue:""},{name:"ConfigurationItemId",displayKey:"RelatedItem",fieldType:"relatedconfigitem",templateValue:""},{name:"PriorityId",displayKey:"Priority",fieldType:"double",templateValue:""},{name:"Impact",displayKey:"Impact",fieldType:"enum",templateValue:"11756265-f18e-e090-eed2-3aa923a4c872"},{name:"ResolvedDate",displayKey:"ResolvedDate",fieldType:"date",templateValue:""},{name:"Urgency",displayKey:"Urgency",fieldType:"enum",templateValue:"04b28bfb-8898-9af3-009b-979e58837852"},{name:"SoonestSLOBreachTime",displayKey:"SLOBreachDate",fieldType:"date",templateValue:""},{name:"SoonestSLOWarningTime",displayKey:"SLOWarnDate",fieldType:"date",templateValue:""}]},{displayKey:"ServiceRequests",name:"SR",classId:"04B69835-6343-4DE2-4B19-6BE08C612989",fields:[{name:"statusId",displayKey:"Status",fieldType:"enum",templateValue:"4e0ab24a-0b46-efe6-c7d2-5704d95824c7"},{name:"sourceId",displayKey:"Source",fieldType:"enum",templateValue:"848211a2-393a-6ec5-9c97-8e1e0cfebba2"},{name:"categoryId",displayKey:"Classification",fieldType:"enum",templateValue:"3880594c-dc54-9307-93e4-45a18bb0e9e1"},{name:"tierId",displayKey:"SupportGroup",fieldType:"enum",templateValue:"23c243f6-9365-d46f-dff2-03826e24d228"},{name:"affectedUserId",displayKey:"AffectedUser",fieldType:"user",templateValue:""},{name:"ConfigurationItemId",displayKey:"AffectedItem",fieldType:"affectedconfigitem",templateValue:""},{name:"ConfigurationItemId",displayKey:"RelatedItem",fieldType:"relatedconfigitem",templateValue:""},{name:"PriorityId",displayKey:"Priority",fieldType:"enum",templateValue:"d55e65ea-fae9-f7db-0937-843bfb1367c0"},{name:"CompletedDate",displayKey:"CompletedDate",fieldType:"date",templateValue:""},{name:"Urgency",displayKey:"Urgency",fieldType:"enum",templateValue:"eb35f771-8b0a-41aa-18fb-0432dfd957c4"},{name:"SoonestSLOBreachTime",displayKey:"SLOBreachDate",fieldType:"date",templateValue:""},{name:"SoonestSLOWarningTime",displayKey:"SLOWarnDate",fieldType:"date",templateValue:""}]},{displayKey:"ChangeRequests",name:"CR",classId:"E6C9CF6E-D7FE-1B5D-216C-C3F5D2C7670C",fields:[{name:"statusId",displayKey:"Status",fieldType:"enum",templateValue:"0bf0a71b-9e9e-f719-0271-c9a4ff352600"},{name:"categoryId",displayKey:"Classification",fieldType:"enum",templateValue:"28f88c04-d11d-78c0-a237-fa9abd6C6478"},{name:"ConfigurationItemId",displayKey:"AffectedItem",fieldType:"affectedconfigitem",templateValue:"na"},{name:"ConfigurationItemId",displayKey:"RelatedItem",fieldType:"relatedconfigitem",templateValue:""},{name:"PriorityId",displayKey:"Priority",fieldType:"enum",templateValue:"b40092af-f163-af28-6150-bb0ffa677660"},{name:"Impact",displayKey:"Impact",fieldType:"enum",templateValue:"44edd2ff-6280-afb7-3a0d-d6e8a711d894"}]},{displayKey:"ManualActivities",name:"MA",classId:"7AC62BD4-8FCE-A150-3B40-16A39A61383D",fields:[{name:"statusId",displayKey:"Status",fieldType:"enum",templateValue:"57db4880-000e-20bb-2f9d-fe4e8aca3cf6"},{name:"categoryId",displayKey:"Classification",fieldType:"enum",templateValue:"0d1c5836-644e-bfe4-5adf-cfe40fc08dfa"},{name:"PriorityId",displayKey:"Priority",fieldType:"enum",templateValue:"65a34474-f43d-d880-7eb0-bad49efa7cf1"}]},{displayKey:"ReviewActivities",name:"RA",classId:"BFD90AAA-80DD-0FBB-6EAF-65D92C1D8E36",fields:[{name:"statusId",displayKey:"Status",fieldType:"enum",templateValue:"57db4880-000e-20bb-2f9d-fe4e8aca3cf6"},{name:"categoryId",displayKey:"Classification",fieldType:"enum",templateValue:"0d1c5836-644e-bfe4-5adf-cfe40fc08dfa"},{name:"PriorityId",displayKey:"Priority",fieldType:"enum",templateValue:"65a34474-f43d-d880-7eb0-bad49efa7cf1"}]},{displayKey:"Problem",name:"PR",classId:"422AFC88-5EFF-F4C5-F8F6-E01038CDE67F",fields:[{name:"statusId",displayKey:"Status",fieldType:"enum",templateValue:"56c99a7d-6ac7-ab3c-e6c0-bbf5fe76a65c"},{name:"sourceId",displayKey:"Source",fieldType:"enum",templateValue:"91c21d12-7e66-3e02-cc44-824f6b131547"},{name:"PriorityId",displayKey:"Priority",fieldType:"double",templateValue:""},{name:"Impact",displayKey:"Impact",fieldType:"enum",templateValue:"11756265-f18e-e090-eed2-3aa923a4c872"},{name:"Urgency",displayKey:"Urgency",fieldType:"enum",templateValue:"04b28bfb-8898-9af3-009b-979e58837852"},{name:"categoryId",displayKey:"Classification",fieldType:"enum",templateValue:"9b2c7fa1-6a48-9592-4116-3f7385b068ac"}]},{displayKey:"ReleaseRecord",name:"RR",classId:"D02DC3B6-D709-46F8-CB72-452FA5E082B8",fields:[{name:"statusId",displayKey:"Status",fieldType:"enum",templateValue:"8909ce55-a87f-2d7e-eb64-aba670596696"},{name:"PriorityId",displayKey:"Priority",fieldType:"enum",templateValue:"a384feeb-0ff6-3971-faac-9710c250b802"},{name:"Impact",displayKey:"Impact",fieldType:"enum",templateValue:"510E6308-9637-DAC7-5814-92465703270A"}]}]},gridDefaultConfig:{fromQueryBuilder:!0,isAnalyst:session.user.Analyst,gridJsonDataForCountdown:{},tempProperties:{},grid:{GridType:"QueryBuilderGrid",columns:[{DataType:"numeric",field:"NumericId",hidden:!0,attributes:{class:"grid-highlight-column"}},{DataType:"String",field:"Icon",width:50,filterable:!1,attributes:{class:"icon-column grid-highlight-column"},template:"<img class='gridicon' src='/Content/Images/Icons/WorkTypeIcons/#:data.Icon#' alt='#:data.Icon#' />"},{DataType:"string",field:"Id",title:"Id",width:80,attributes:{class:"grid-highlight-column"}},{DataType:"string",field:"Title",width:350,attributes:{class:"grid-highlight-column"}},{DataType:"string",field:"Status",width:100},{DataType:"string",field:"AssignedUser",analystOnly:!0,width:150},{DataType:"string",field:"Priority",width:90},{DataType:"string",field:"Category",width:110},{DataType:"string",field:"AffectedUser",width:150},{DataType:"string",field:"Tier",title:"SupportGroup",width:150},{DataType:"datetime",field:"LastModified",width:100},{DataType:"DateTime",field:"ScheduledStartDate",width:100,hidden:!0},{DataType:"DateTime",field:"ScheduledEndDate",width:100,hidden:!0},{DataType:"string",field:"BaseId",hidden:!0},{DataType:"string",field:"ParentWorkItemId",hidden:!0},{DataType:"string",field:"ParentWorkItemType",hidden:!0}],options:{},dataSourceOptions:{schema:{data:"Data",total:"Total",model:{id:"WorkItemId"}}}}}}};define("text!viewPanels/chart/view.html",[],function(){return'<div id="chart"  data-bind="visible: view.controller.isVisible"></div>\r\n'}),define("viewPanels/chart/controller",["require","text!viewPanels/chart/view.html"],function(e){var t=e("text!viewPanels/chart/view.html");return{template:t,build:function(e,a,n){var i,r=[];viewModel={view:{controller:{title:a.Definition.content.title,isVisible:!0,queryId:a.Definition.content.queryId,series:a.Definition.content.series,categoryAxis:a.Definition.content.categoryAxis,seriesColors:a.Definition.content.seriesColors,isLegendVisible:a.Definition.content.isLegendVisible,dataSourceGroup:a.Definition.content.dataSourceGroup,dataSourceSort:a.Definition.content.dataSourceSort,legendPosition:a.Definition.content.legendPosition||"bottom"},buildView:function(){var e=_.template(t);i=new kendo.View(e(),{wrap:!1,model:viewModel}),n(i.render())},buildChart:function(){var e=$(i.element[0]),t=["#4183D7","#D24D57","#2ECC71","#F5D76E","#D2527F","#913D88","#F89406","#5C97BF","#D91E18","#26A65B","#F7CA18","#E08283","#663399","#E67E22","#81CFE0","#EF4836","#90C695","#F4D03F","#8E44AD","#D35400","#2C3E50","#CF000F","#87D37C","#F5AB35","#E26A6A","#913D88","#F39C12","#446CB3","#96281B","#1E824C","#FDE3A7","#F62459","#AEA8D3","#F9690E","#336E7B","#4DAF7C","#F9BF3B","#EB9532"],a={transport:{read:{url:app.lib.addUrlParam("/Dashboard/GetDashboardData","queryId",viewModel.view.controller.queryId),dataType:"json",cache:!1}},requestStart:function(){this.defferred=$.Deferred(),r.push(this.defferred.promise())},change:function(){this.defferred.resolve()}};_.isUndefined(viewModel.view.controller.dataSourceGroup)||(a.group=viewModel.view.controller.dataSourceGroup),_.isUndefined(viewModel.view.controller.dataSourceSort)||(a.sort=viewModel.view.controller.dataSourceSort);var n=new kendo.data.DataSource(a),o=[],s=viewModel.view.controller.series;for(var l in s)_.isUndefined(viewModel.view.controller.categoryAxis)||(s[l].categoryField=viewModel.view.controller.categoryAxis.field),s[l].name=viewModel.view.getLocalizedText(s[l].name),s[l].overlay={gradient:"none"},o.push(s[l]);e.kendoChart({theme:"bootstrap",title:viewModel.view.getLocalizedText(viewModel.view.controller.title),tooltip:{visible:!0,template:"#= !_.isUndefined(series.name)?series.name:category # - #= value #"},legend:{visible:!!_.isUndefined(viewModel.view.controller.isLegendVisible)||viewModel.view.controller.isLegendVisible,position:viewModel.view.controller.legendPosition},seriesColors:_.isUndefined(viewModel.view.controller.seriesColors)?t:viewModel.view.controller.seriesColors,categoryAxis:viewModel.view.controller.categoryAxis,series:o,render:function(e){app.lib.mask.remove()},seriesDefaults:{type:"column"},dataSource:n})},getLocalizedText:function(e){return!_.isUndefined(localization[e])&&[e].length>0?localization[e]:e},shortenLabel:function(e,t){return e.length>t&&(e=e.substring(0,t)+"..."),e}}},viewModel.view.buildView(),viewModel.view.buildChart()}}}),define("text!viewPanels/radialGauge/view.html",[],function(){return'<div data-role="radialgauge"\r\n     data-bind="visible: view.controller.isVisible, value: view.controller.value">\r\n</div>\r\n'}),define("viewPanels/radialGauge/controller",["require","text!viewPanels/radialGauge/view.html"],function(e){var t=e("text!viewPanels/radialGauge/view.html");return{template:t,build:function(e,a,n){var i;viewModel={view:{controller:{title:viewModel.view.getLocalizedText(a.Definition.content.title),isVisible:!0,queryId:a.Definition.content.queryId,valueField:a.Definition.content.valueField,min:a.Definition.content.min,max:a.Definition.content.max,startAngle:a.Definition.content.startAngle,endAngle:a.Definition.content.endAngle,labels:a.Definition.content.labels,ranges:a.Definition.content.ranges,value:0,pointerColor:a.Definition.content.pointerColor},buildView:function(){var e=_.template(t);i=new kendo.View(e(),{wrap:!1,model:viewModel}),viewModel.view.controller.value=viewModel.view.getGaugeValue(),n(i.render())},setRadialGaugeScale:function(){$(i.element[0]).kendoRadialGauge({theme:"bootstrap",pointer:{color:_.isUndefined(viewModel.view.controller.pointerColor)?"#000":viewModel.view.controller.pointerColor},scale:{max:_.isUndefined(viewModel.view.controller.max)?100:viewModel.view.controller.max,startAngle:_.isUndefined(viewModel.view.controller.startAngle)?-50:viewModel.view.controller.startAngle,endAngle:_.isUndefined(viewModel.view.controller.endAngle)?230:viewModel.view.controller.endAngle,labels:viewModel.view.controller.labels,ranges:viewModel.view.controller.ranges}})},getGaugeValue:function(){if(!_.isUndefined(viewModel.view.controller.queryId)){var e=0,t=new kendo.data.DataSource({transport:{read:{url:app.lib.addUrlParam("/Dashboard/GetDashboardData","queryId",viewModel.view.controller.queryId),dataType:"json",async:!1}}});return t.fetch(function(){var a=t.at(0);e=a.get(viewModel.view.controller.valueField)}),e}},getLocalizedText:function(e){return!_.isUndefined(localization[e])&&[e].length>0?localization[e]:e}}},viewModel.view.buildView(),viewModel.view.setRadialGaugeScale()}}}),define("text!viewPanels/calendar/view.html",[],function(){return"<div data-role=\"scheduler\"\r\n     data-views=\"['day', 'week', 'month', 'agenda']\"\r\n     data-selectable=true\r\n     data-editable=false\r\n     data-bind=\"visible: isVisible, events:{change: change, navigate: navigate, moveEnd: moveEnd, move: move, moveStart: moveStart, remove: remove, edit: edit, add: add}\">\r\n</div>"}),define("viewPanels/calendar/controller",["require","text!viewPanels/calendar/view.html"],function(e){var t=e("text!viewPanels/calendar/view.html");return{template:t,build:function(e,a,n){var i=$(t).attr("data-views",JSON.stringify(a.Definition.content.views)),r=_.template(i.prop("outerHTML")),o=new kendo.observable({queryId:a.Definition.content.queryId,id:a.Definition.content.id,title:a.Definition.content.title,description:a.Definition.content.description,startDate:a.Definition.content.startDate,endDate:a.Definition.content.endDate,isVisible:!!_.isUndefined(a.Definition.content.isVisible)||a.Definition.content.isVisible,defaultView:_.isUndefined(a.Definition.content.defaultView)?"month":a.Definition.content.defaultView,add:function(e){e.preventDefault()},edit:function(e){e.preventDefault()},remove:function(e){e.preventDefault()},moveStart:function(e){e.preventDefault()},move:function(e){e.preventDefault()},moveEnd:function(e){e.preventDefault()},navigate:function(e){_.defer(function(){o.set("formattedDate",e.sender._model.formattedDate)}),_.isUndefined(e.sender._selection)||(e.sender._selection.events.length=0)},change:function(e){e.events.length&&$.ajax({type:"GET",url:"/Search/GetSearchObjectByWorkItemID",data:{searchText:e.events[0].id},success:function(t){e.sender.element.blur(),e.events.length=0,window.open(t,"_blank")}})},formattedDate:""}),s=new kendo.data.SchedulerDataSource({batch:!0,transport:{read:{url:"/Dashboard/GetCalendarData",data:{queryId:o.get("queryId")},dataType:"json",cache:!1}},schema:{model:{id:"id",fields:{id:{from:o.get("id")},title:{from:o.get("title")},start:{from:o.get("startDate"),type:"date"},end:{from:o.get("endDate"),type:"date"},description:{from:o.get("description")}}}}}),l=new kendo.View(r(a),{wrap:!1,model:o});n(l.render());var d=$(l.element[0]).data("kendoScheduler");d.options.dateHeaderTemplate=kendo.template("<strong>#=kendo.toString(date, 'ddd M' + kendo.cultures.current.calendar['/'] + 'd') #</strong>"),d.view(o.get("defaultView")),d.setDataSource(s),o.set("formattedDate",d._model.formattedDate)}}}),define("text!viewPanels/trendContainer/view.html",[],function(){return'<div data-bind="trendContainer: viewModel, style: { fontSize: viewModel.baseFontSize}" class="trend-container">\r\n    \r\n    <label data-bind="text: viewModel.label, style: { fontSize: viewModel.labelSize, height: viewModel.labelSize }"></label>\r\n\r\n    <p class="trend-number" data-bind="style: { lineHeight: viewModel.propertyValue.lineHeight}">\r\n        <span data-bind="text: viewModel.propertyValue.text, attr: {data-property-name: viewModel.propertyName },\r\n                         style: { color: viewModel.propertyValue.color, fontSize: viewModel.propertyValue.size }"></span>\r\n    </p>\r\n\r\n</div>'}),define("text!viewPanels/trendContainer/view.mobile.html",[],function(){return'<div data-bind="trendContainer: viewModel, style: { fontSize: viewModel.baseFontSize}, class: viewModel.modelClass" class="trend-container">\r\n\r\n    <label data-bind="text: viewModel.label, style: { fontSize: viewModel.labelSize, height: viewModel.labelSize, color: viewModel.labelColor }"></label>\r\n\r\n    <p class="trend-number" data-bind="style: { lineHeight: viewModel.propertyValue.lineHeight}">\r\n        <span data-bind="text: viewModel.propertyValue.text, attr: {data-property-name: viewModel.propertyName },\r\n                         style: { color: viewModel.propertyValue.color, fontSize: viewModel.propertyValue.size }"></span>\r\n    </p>\r\n\r\n</div>'}),define("viewPanels/trendContainer/controller",["require","text!viewPanels/trendContainer/view.html","text!viewPanels/trendContainer/view.mobile.html"],function(e){var t=e("text!viewPanels/trendContainer/view.html");return{template:t,build:function(a,n,i){var r=n.Definition.content;app.isMobile()&&(t=e("text!viewPanels/trendContainer/view.mobile.html")),r.propertyValue||(r.propertyValue={size:3});var o=r.propertyValue.size,s=.2*o+1,l=.2*o+.75,d="#000000",c="";if(l<1&&(l=1.1),app.isMobile()&&!_.isUndefined(r.queryId)&&"8540489d-6918-4846-aef8-85aac0876e07"===r.queryId){o*=.21,l=o,d="#777777",c="ka-mobile-trend-container";$(".trend-container").parent().parent().parent().parent().addClass("ka-mobile-row-trend-container"),r.label=_.isUndefined(r.label)?localizationHelper.localize(r.propertyName,r.propertyName)+":":localizationHelper.localize(r.label,r.label)+":"}var u=kendo.observable({viewModel:{propertyName:r.propertyName,label:_.isUndefined(r.label)?localizationHelper.localize(r.propertyName,r.propertyName):localizationHelper.localize(r.label,r.label),baseFontSize:s+"em",labelSize:l+"em",labelColor:d,propertyValue:{color:_.isUndefined(r.propertyValue.color)?"#000000":r.propertyValue.color,size:o+"em",lineHeight:o-1+"em",value:""},modelClass:c,queryId:r.queryId}}),p=_.template(t);i(new kendo.View(p(),{wrap:!1,model:u}).render())}}}),define("text!viewPanels/articleList/view.html",[],function(){return'<div data-bind="templateResources:\'resources\'" style="display:none">\r\n    <div data-template-name="articleTemplate" class="article-template">\r\n        \x3c!-- repeated template content here --\x3e\r\n        <h5>\r\n            <a href="/KnowledgeBase/View/#: ArticleId #" class="article-external-link" target="_blank"><i class="fa fa-external-link"></i></a>\r\n            <a href="/KnowledgeBase/View/#: ArticleId #" class="article-title">\r\n                #: Title #\r\n            </a>\r\n            <small>\r\n                <%= localization.Rating %> #: Rating #/5 &middot;\r\n                #: ViewCount # <%= localization.Views %> &middot;\r\n                <%= localization.LastUpdated %>:\r\n                \x3c!--format in en: \'MMMM dd, yyyy\', to make this work for the rest of the world (dd MMMM, yyyy) we have this--\x3e\r\n                #: kendo.toString(new Date(LastModifiedDate), \'m\') #, \x3c!--dd MMMMM,--\x3e\r\n                #: kendo.toString(new Date(LastModifiedDate), \'yyyy\') # \x3c!--yyyy--\x3e\r\n            </small>\r\n        </h5>\r\n    </div>\r\n</div>\r\n\r\n<div class="article-list">\r\n    <h2 data-bind="html: viewModel.label"></h2>\r\n    <hr />\r\n    \x3c!-- bind articleList custom binding to viewModel (which is defined in controller.js) --\x3e\r\n    <div data-bind="articleList: viewModel" data-template-name="articleList" ></div>\r\n</div>'}),define("viewPanels/articleList/controller",["require","text!viewPanels/articleList/view.html"],function(e){var t=e("text!viewPanels/articleList/view.html");return{template:t,build:function(e,a,n){var i=a.Definition,r=kendo.observable({viewModel:{label:_.isUndefined(i.label)?"":localizationHelper.localize(i.label,i.label),type:i.type,count:i.count,articles:new kendo.data.ObservableArray([])}}),o=_.template(t);n(new kendo.View(o(),{wrap:!0,model:r}).render())}}}),define("viewPanels/viewPanelBuilder",["viewPanels/facetedSearch/controller","viewPanels/html/controller","CustomSpace/Scripts/viewPanels/serviceCatalog/controller","viewPanels/alternateSC/controller","grids/gridBuilder","viewPanels/queryBuilder/controller","viewPanels/chart/controller","viewPanels/radialGauge/controller","viewPanels/calendar/controller","viewPanels/trendContainer/controller","viewPanels/articleList/controller"],function(facetedSearch,html,serviceCatalog,alternateSC,grid,queryBuilder,chart,radialGauge,calendar,trendContainer,articleList){var definition={build:function(vm,node,callback){app.lib.getViewPanelDefinition(node.ViewPanelId,function(templateObj){if(eval("var _obj = "+templateObj.TypeId+";"),!_obj)throw templateObj.TypeId+" is not part of the templating system";vm.tempProperties||(vm.tempProperties={}),vm.tempProperties.fromViewBuilder=!0,_obj.build(vm,templateObj,function(e){callback(e)})})}};return definition}),define("viewBuilder",["structure/header/controller","structure/tab/tabNavigation/controller","structure/tab/tabPane/controller","structure/tab/tabContent/controller","structure/tab/tabData/controller","structure/column/controller","structure/content/controller","viewPanels/viewPanelBuilder"],function(e,t,a,n,i,r,o,s){return{build:function(l,d){function c(e,t){m(e.tabs,t),n.build(f,e,function(n){var i=app.lib.getContainer(n);_.each(e.tabs,function(e){a.build(f,e,function(t){var a=app.lib.getContainer(t);composeContent(e,a,function(e){i.append(e)})})}),_.isUndefined(t)?b.append(i):$(t).append(i)})}function u(e,t){var a=app.lib.getContainer(t);o.build(f,e,function(t){var n=app.lib.getContainer(t);if(a.append(n),a=n,e.cssClass&&a.addClass(e.cssClass),_.isUndefined(e.content)&&"viewPanel"==e.type)s.build(f,e,function(e){a.append(app.lib.getContainer(e))});else if(_.isArray(e.content)){var i=e.content;_.each(i,function(e){u(e,a)})}else{var r=e.content;u(r,a)}})}function p(e,t,a){var n=app.lib.getContainer(t),i=e.content.rows;_.each(i,function(e){var t=app.lib.getContainer("<div class='row'></div>");n.append(t),app.lib.setColumnSizes(e.columns),_.each(e.columns,function(e){r.build(f,e,function(a){var n=app.lib.getContainer(a);t.append(n),f.tempProperties.currentContainer=n,s.build(f,e,function(t){if(f.tempProperties.fromGridBuilder&&"panel"==e.type)n.find(".panel").addClass("panel-flat");else{var a=app.lib.getContainer(t);n.find(".append-here").append(a)}delete f.tempProperties.fromViewBuilder,delete f.tempProperties.fromGridBuilder,delete f.tempProperties.currentContainer})})})}),a(t)}function m(e,a){t.build(f,e,function(t){var n=$(t),r=!1;_.each(e,function(t,a){t.tabId=app.lib.newGUID(),t.active=0==a?"active":"",t.content.tabId=t.tabId,t.content.active=t.active;var o=app.getParameterByName("tab").toLowerCase(),s=t.name.toLowerCase();i.build(e,t,function(e){var t=$(e);n.append(t),!r&&o.length>0&&s===o&&(t.find("a").attr("selected","true"),r=!0)})}),_.isUndefined(a)?b.append(n):$(a).append(n)})}var f=l.view;f.tempProperties={};var v=$("#main_wrapper"),g=$(".page_content");g.find(".container-fluid").append("<div class='page_container'></div>");var b=$(".page_container");if("semantic"===l.layoutType){if($(".viewbuilder-struct").remove(),u(f,v),l.appFilePath&&_.isString(l.appFilePath)){require([l.appFilePath])}l.pageTitle&&l.pageTitle.length>0&&(document.title=localizationHelper.localize(l.pageTitle,l.pageTitle))}else!function(t){if(!t)return void $(".page_bar").remove();var a;switch(t.type?s.build(f,t,function(e){a=e}):e.build(f,t,function(e){a=e}),l.layoutType){case"homepage":$(".page_bar").remove(),g.before(a);break;case"full":default:var n=$("<div/>").addClass("row"),i=n.append(a);$(".page_bar").empty().append(i)}}(f.header),function(e){e.tabs?c(e,b):p(e,b,function(){})}(f.body);d()}}}),define("structure/drawer/gridTask/multiEditController",["require"],function(e){return{build:function(e,t){function a(e){var t=[];return _.each(e.availableFields,function(e){if(!_.isUndefined(e.selectedValue)&&""!=e.selectedValue){var a="";switch(e.propertyType){case"enum":a=e.selectedValue.Id}"Impact"==e.propertyName&&(o.set("calculatePriority",!0),o.set("impactId",a)),"Urgency"==e.propertyName&&(o.set("calculatePriority",!0),o.set("urgencyId",a)),t.push({propertyName:e.propertyName,propertyType:e.propertyType,editedValue:a})}}),t}function n(){kendo.ui.ExtAlertDialog.show({title:localizationHelper.localize("Warning"),message:localizationHelper.localize("BulkEditExceedMessage")})}var i=drawermenu,r=t,o=kendo.observable({enabled:r.enabled,visible:r.isVisible,titleKey:r.titleKey,formTitleKey:r.formTitleKey,icon:r.icon,endpointUrl:r.endpointUrl,element:!1,selectedWorkItemProjectionId:!1,currentSelection:[],selectedType:"",calculatePriority:!1,impactId:"",urgencyId:"",targetControlId:"",command:function(){var e={formView:{},formTitleKey:o.formTitleKey,workItems:o.currentSelection,availableFields:l(),setCanSubmit:function(){a(this).length>0?$(".drawer-button-submit").removeClass("disabled"):$(".drawer-button-submit").addClass("disabled")},formSubmit:function(){function t(e){$.ajax({url:o.endpointUrl,data:JSON.stringify(e),dataType:"json",contentType:"application/json",type:"POST",success:function(){n()},error:function(){r()}})}function n(){if(e.formDestroy(),i.actions.closeFormInDrawer(),app.isMobile()){$("[data-control-id='"+o.targetControlId+"']").data("kendoListView").dataSource.query()}else{var t=$("#"+o.targetControlId).data("kendoGrid"),a=app.gridUtils.savedState.getCurrentState(o.targetControlId);app.lib.recheckGridState(a,t),t.dataSource.query(a)}app.lib.message.add(localizationHelper.localize("SaveSuccessMessage"),"success"),app.lib.mask.remove(),app.lib.message.show()}function r(){i.actions.closeFormInDrawer(),app.lib.message.add(localizationHelper.localize("SaveErrorMessage"),"danger"),app.lib.mask.remove(),app.lib.message.show()}app.lib.mask.apply();var s=this,l={projectionId:o.selectedWorkItemProjectionId,updateServiceManagement:!0,itemIds:_.pluck(s.workItems,"BaseId"),editedFields:a(s)};"Incident"==o.selectedType&&o.calculatePriority?$.ajax({url:"/WIs/Incident/GetPriorityMatrix/",type:"GET",success:function(e){var a=JSON.parse(e),n=app.lib.getPriorityByMatrix(a,o.urgencyId,o.impactId);l.editedFields.push({propertyName:"Priority",propertyType:"int",editedValue:n}),t(l)},error:function(){r()}}):t(l)},formCancel:function(){this.formDestroy(),i.actions.closeFormInDrawer()},formClose:function(){i.actions.closeFormInDrawer()},formDestroy:function(){var e=this;e.formView.destroy(),e.set("currentSelectedField",""),e.set("formView",{}),e.set("availableFields",[]),e.set("selectedType",""),o.set("calculatePriority",!1),o.set("impactId",""),o.set("urgencyId","")}};e=kendo.observable(e),i.actions.createFormInDrawer("multiEditTemplate",e),e.setCanSubmit(),e.bind("change",function(e){this.setCanSubmit()})},onTargetControlChange:function(e){var t=[];if(t=app.isMobile()?e:e.select().map(function(t,a){return e.dataItem($(a))}).toArray(),t.length>10&&n(),o.set("currentSelection",t),t.length<=0||t.length>10)o.setEnabled(!1);else{var a=_.pluck(t,"WorkItemType");switch(_.reduce(a,function(e,t){return e===t&&e})){case"System.WorkItem.ServiceRequest":o.set("selectedWorkItemProjectionId",app.constants.projectionIds.SystemWorkItemServiceRequestViewModel),o.setEnabled(!0);break;case"System.WorkItem.Incident":o.set("selectedWorkItemProjectionId",app.constants.projectionIds.SystemWorkItemIncidentViewModel),o.setEnabled(!0);break;default:o.setEnabled(!1)}}},setEnabled:function(e){e?($(o.element).prop("disabled",!1),$(o.element).prev(".tooltip-container-drawer-button").addClass("tooltip-container-hidden"),o.set("enabled",!0)):($(o.element).prop("disabled",!0),$(o.element).prev(".tooltip-container-drawer-button").removeClass("tooltip-container-hidden"),o.set("enabled",!1))},setVisible:function(e){e=e||o.visible,e?($(o.element).show(),o.set("visible",!0)):($(o.element).hide(),o.set("visible",!1))}}),s=i.addButton(localizationHelper.localize(o.titleKey),"fa "+o.icon,o.command,!0,localizationHelper.localize("MustSelectSameType"));o.set("element",s[0]),o.setVisible(),
app.isMobile()?(app.events.subscribe("mobileWiListSelectionChange",function(e,t){_.isUndefined(t)||(o.onTargetControlChange(t.selectedCards),o.targetControlId=t.controlId)}),app.events.subscribe("mobileWiListInit",function(e,t){_.isUndefined(t)||(o.onTargetControlChange(t.selectedCards),o.targetControlId=t.controlId)})):(app.events.subscribe("gridChange",function(e,t){o.onTargetControlChange(t),o.targetControlId=$(t.wrapper).attr("id")}),app.events.subscribe("gridBound",function(e,t){o.onTargetControlChange(t),o.targetControlId=$(t.wrapper).attr("id")}));var l=function(){var e=[];switch(o.selectedWorkItemProjectionId){case app.constants.projectionIds.SystemWorkItemIncidentViewModel:o.set("selectedType","Incident"),e=[{displayName:localizationHelper.localize("Classification"),propertyName:"Classification",propertyType:"enum",enumId:"1f77f0ce-9e43-340f-1fd5-b11cc36c9cba",selectedValue:"",leafNodeOnly:!1,showPath:!1},{displayName:localizationHelper.localize("SupportGroup"),propertyName:"TierQueue",propertyType:"enum",enumId:"c3264527-a501-029f-6872-31300080b3bf",selectedValue:"",leafNodeOnly:!1,showPath:!1},{displayName:localizationHelper.localize("Impact"),propertyName:"Impact",propertyType:"enum",enumId:"11756265-f18e-e090-eed2-3aa923a4c872",selectedValue:"",leafNodeOnly:!1,showPath:!1},{displayName:localizationHelper.localize("Urgency"),propertyName:"Urgency",propertyType:"enum",enumId:"04b28bfb-8898-9af3-009b-979e58837852",selectedValue:"",leafNodeOnly:!1,showPath:!1}];break;case app.constants.projectionIds.SystemWorkItemServiceRequestViewModel:o.set("selectedType","ServiceRequest"),e=[{displayName:localizationHelper.localize("Area"),propertyName:"Area",propertyType:"enum",enumId:"3880594c-dc54-9307-93e4-45a18bb0e9e1",selectedValue:"",leafNodeOnly:!1,showPath:!1},{displayName:localizationHelper.localize("SupportGroup"),propertyName:"SupportGroup",propertyType:"enum",enumId:"23c243f6-9365-d46f-dff2-03826e24d228",selectedValue:"",leafNodeOnly:!1,showPath:!1},{displayName:localizationHelper.localize("Urgency"),propertyName:"Urgency",propertyType:"enum",enumId:"eb35f771-8b0a-41aa-18fb-0432dfd957c4",selectedValue:"",leafNodeOnly:!1,showPath:!1}]}return e}}}}),define("text!forms/tasks/anchor/view.html",[],function(){return'<li class="link" data-bind="click: <%= Target %>"><%= Label %></li>'}),define("forms/tasks/anchor/controller",["require","text!forms/tasks/anchor/view.html"],function(e){var t=e("text!forms/tasks/anchor/view.html");return{template:t,build:function(e,a){var n=_.template(t),i={};$.extend(!0,i,e),a(new kendo.View(n(i),{wrap:!1}).render())}}}),define("text!forms/tasks/analystByGroup/view.html",[],function(){return'<div id="AssignToAnalystByGroupWindow" class="cireson-window defined-form hide">\r\n    <div class="cireson-window--wrapper">\r\n        <div class="cireson-window--body">\r\n            <div>\r\n                <div id="groupPicker" />\r\n            </div>\r\n\r\n            <div class="form-group">\r\n                <div class="control-label">\r\n                    <label><%= localization.AssignedTo %></label>\r\n                </div>\r\n                <div class="editor-field">\r\n                    <input id="assignedToCombo"\r\n                           data-role="combobox"\r\n                           data-bind="source: assignToDataSource, enabled:userEnabled, events: { change: userChange }"\r\n                           data-text-field="Name"\r\n                           data-value-field="Id"\r\n                           data-placeholder="<%=localization.ChooseSupportGroup%>"></input>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="window-buttons cireson-window--footer">\r\n            <button data-role="button"\r\n                    class="btn btn-primary"\r\n                    data-bind="enabled: okEnabled, events: { click: okClick }">\r\n                <%= localization.OK %>\r\n            </button>\r\n            <button data-role="button"\r\n                    class="btn btn-default"\r\n                    data-bind="events: { click: cancelClick }">\r\n                <%= localization.Cancel %>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("text!forms/fields/enum/view.html",[],function(){return'<div class="form-group">\r\n    <label class="control-label" for="<%= PropertyName %>" data-localize="<%= PropertyDisplayName %>">\r\n        <span><% if ( Required ){ %> <%= \'(\' + localization.Required + \')\' %><% } %></span>\r\n    </label>\r\n\r\n    <div class="form-control form-control-picker input-sm"\r\n         data-url="/api/V3/Enum/GetList"\r\n         data-combourl="/api/V3/Enum/GetFlatList/"\r\n         data-showpath="<%= ShowPath %>"\r\n         data-mustselectleafnode="<%= LeafNodeOnly %>"\r\n         data-bind="ciresonDropDownTree: \'<%= EnumId %>\', value: <%= PropertyName %>"\r\n         data-disabled="<%= Disabled %>"\r\n         data-role="<%= PropertyName %>"\r\n         data-filter="<%= FilterIds%>"\r\n        <% if ( Required ){ %>\r\n        required\r\n        <% } %>\r\n        >\r\n\r\n    </div>\r\n\r\n</div>'}),define("forms/fields/enum/controller",["require","text!forms/fields/enum/view.html"],function(e){var t=e("text!forms/fields/enum/view.html");return{template:t,build:function(e,a,n){var i=_.template(t),r={EnumId:"",Required:a.Required,Disabled:a.disabled,LeafNodeOnly:!1,ShowPath:!1,FilterIds:""};$.extend(!0,r,a),n(i(r))}}}),define("text!forms/tasks/drawerTask/view.html",[],function(){return'<span data-bind="visible: showTooltip" class="tooltip-container" rel="dynamictooltip" title="<%= toolTipMessage %>"></span>\r\n<li data-bind="click: <%= onClick %>, enabled: isEnabled"><a data-bind="localize: <%= titleKey %>"></a></li>'}),define("forms/tasks/analystByGroup/controller",["require","text!forms/tasks/anchor/view.html","text!forms/tasks/analystByGroup/view.html","forms/fields/enum/controller","text!forms/tasks/drawerTask/view.html"],function(e){var t=e("text!forms/tasks/anchor/view.html"),a=e("text!forms/tasks/analystByGroup/view.html"),n=e("forms/fields/enum/controller"),i=e("text!forms/tasks/drawerTask/view.html");return{template:a,build:function(e,r,o){var s,l,d=e.type,c="BulkEdit"==e.type,u=null,p=null,m=null,f="",v="00000000-0000-0000-0000-000000000000",g=function(t){var a=kendo.observable({analystByGroup:function(){c?(l=a.selectedWorkItem.groupPropertyName,s=a.selectedWorkItem.groupPropertyEnumId):(e.viewModel.set("SupportGroup",{Id:"",Name:""}),e.viewModel.set("TierQueue",{Id:"",Name:""}),l=r.Configs.propertyName,s=r.Configs.enumId);var i=t.element.clone(),o=i.kendoCiresonWindow({title:localization.AssignToAnalystByGroup,width:500,height:300,actions:[]}).data("kendoWindow"),d=kendo.observable({propertyName:l,enumId:s,assignToDataSource:S("00000000-0000-0000-0000-000000000000"),userEnabled:!1,okEnabled:!1,userChange:function(t){c?(a.set("assignedWorkItem.displayName",t.sender._prev),a.set("assignedWorkItem.baseId",t.sender.value())):(e.viewModel.AssignedWorkItem.set("DisplayName",null),e.viewModel.AssignedWorkItem.set("BaseId",null),e.viewModel.AssignedWorkItem.set("DisplayName",t.sender._prev),e.viewModel.AssignedWorkItem.set("BaseId",t.sender.value()))},okClick:function(){if(o.close(),c){app.lib.mask.apply();var t={ProjectionId:a.selectedWorkItem.projectionId,UpdateServiceManagement:!0,ItemIds:_.pluck(a.currentSelection,"BaseId"),EditedFields:h(a)};$.ajax({url:"/api/v3/workitem/BulkEditWorkItems/",data:JSON.stringify(t),dataType:"json",contentType:"application/json",type:"POST",success:function(){y(a)},error:function(){k()}})}else u=e.viewModel.AssignedWorkItem.get("DisplayName"),p=e.viewModel.AssignedWorkItem.get("BaseId"),"Incident"!=e.type||_.isUndefined(e.viewModel.TierQueue)?"ServiceRequest"!=e.type||_.isUndefined(e.viewModel.SupportGroup)||(m=e.viewModel.get("SupportGroup")):m=e.viewModel.get("TierQueue")},cancelClick:function(){o.close(),c?(a.set("assignedWorkItem.displayName",null),a.set("assignedWorkItem.baseId",null)):(e.viewModel.AssignedWorkItem.set("DisplayName",null),e.viewModel.AssignedWorkItem.set("BaseId",null),e.viewModel.AssignedWorkItem.set("DisplayName",u),e.viewModel.AssignedWorkItem.set("BaseId",p),"Incident"!=e.type||_.isUndefined(e.viewModel.TierQueue)?"ServiceRequest"!=e.type||_.isUndefined(e.viewModel.SupportGroup)||e.viewModel.set("SupportGroup",m):e.viewModel.set("TierQueue",m))}}),f=function(e,t,a){n.build(a,t,function(t){e.html(t),app.controls.apply(e,{localize:!0,vm:a,bind:!0})})};kendo.bind(i,d),function(t,n){var i={PropertyName:t.propertyName,PropertyDisplayName:"SupportGroup",EnumId:t.enumId};f(n.find("#groupPicker"),i,e.viewModel);var r=n.find('div[data-role="'+t.propertyName+'"]');if(r){var o=r.data().handler._dropdown,s=r.data().handler._treeview;o.bind("change",function(e){var i=this.dataItem(this.select()),r=n.find("#assignedToCombo").data("kendoComboBox");C(i,t,r),a.set("assignedSupportGroup",i)}),s.bind("change",function(e){var i=this.dataItem(this.select()),r=n.find("#assignedToCombo").data("kendoComboBox");C(i,t,r),a.set("assignedSupportGroup",i)})}}(d,i),i.removeClass("hide"),i.show(),o.refresh(),o.open()}});return a},b=function(e){var t=e;t.currentSelection=[],t.selectedWorkItem={type:"",projectionId:"",groupPropertyName:"",groupPropertyEnumId:""},t.assignedWorkItem={displayName:"",baseId:""},t.isEnabled=!1,t.showTooltip=!0,t.setEnabled=function(e){this.set("isEnabled",e),this.set("showTooltip",!e)},t.targetControlId="",t.onTargetControlChange=function(a){var n=[];if(n=app.isMobile()?a:a.select().map(function(e,t){return a.dataItem($(t))}).toArray(),n.length>10&&w(),e.set("currentSelection",n),n.length<=0||n.length>10)t.setEnabled(!1);else{var i=_.pluck(n,"WorkItemType"),r=_.pluck(n,"Status"),o=_.reduce(i,function(e,t){return e===t&&e});t.set("selectedWorkItem.type",o);var s=_.reduce(r,function(e,t){return e===t&&e});if(o)switch(o){case"System.WorkItem.ServiceRequest":t.setTrimmedWiType(),t.set("selectedWorkItem.projectionId",app.constants.projectionIds.SystemWorkItemServiceRequestViewModel),t.set("selectedWorkItem.groupPropertyName","SupportGroup"),t.set("selectedWorkItem.groupPropertyEnumId",app.constants.enumPickerIds.ServiceRequestSupportGroup),"Closed"===s?t.setEnabled(!1):t.setEnabled(!0);break;case"System.WorkItem.Incident":t.setTrimmedWiType(),t.set("selectedWorkItem.projectionId",app.constants.projectionIds.SystemWorkItemIncidentViewModel),t.set("selectedWorkItem.groupPropertyName","TierQueue"),t.set("selectedWorkItem.groupPropertyEnumId",app.constants.enumPickerIds.IncidentTierQueue),t.setEnabled(!0);break;default:t.set("selectedWorkItem.projectionId",""),t.set("selectedWorkItem.groupPropertyName",""),t.set("selectedWorkItem.groupPropertyEnumId",""),t.setEnabled(!1)}else t.setEnabled(!1)}},e.setTrimmedWiType=function(){this.set("selectedWorkItem.trimmedType",this.selectedWorkItem.type.split(/[\s.]+/).pop())}},h=function(e){var t=[];switch(e.selectedWorkItem.trimmedType){case"Incident":t=[{PropertyName:"TierQueue",EditedValue:e.assignedSupportGroup.Id,PropertyType:"enum"},{PropertyName:"AssignedWorkItem",EditedValue:e.assignedWorkItem.baseId,PropertyType:"singleCardinalityObject",PropertyRelationshipId:"15e577a3-6bf9-6713-4eac-ba5a5b7c4722"},{PropertyName:"AppliesToTroubleTicket",PropertyType:"multiplecardinalityobject",PropertyRelationshipId:"a860c62e-e675-b121-f614-e52fcbd9ef2c",EditedValue:{ActionType:{Id:"b04370d9-3d4f-3981-61bb-ac9462a1fe65",Name:"Record Assigned"},Description:localization.RecordAssignedDescription.replace("{0}",session.user.Name).replace("{1}",e.assignedWorkItem.displayName),DescriptionDisplay:localization.RecordAssignedDescription.replace("{0}",session.user.Name).replace("{1}",e.assignedWorkItem.displayName),EnteredBy:session.user.Name,EnteredDate:(new Date).toISOString(),LastModified:(new Date).toISOString(),Title:localization.RecordAssigned,Image:app.config.iconPath+app.config.icons["Record Assigned"]}}];break;case"ServiceRequest":t=[{PropertyName:"SupportGroup",EditedValue:e.assignedSupportGroup.Id,PropertyType:"enum"},{PropertyName:"AssignedWorkItem",EditedValue:e.assignedWorkItem.baseId,PropertyType:"singleCardinalityObject",PropertyRelationshipId:"15e577a3-6bf9-6713-4eac-ba5a5b7c4722"},{PropertyName:"AppliesToWorkItem",PropertyType:"multiplecardinalityobject",PropertyRelationshipId:"79d27435-5917-b0a1-7911-fb2b678f32a6",EditedValue:{ActionType:{Id:"b04370d9-3d4f-3981-61bb-ac9462a1fe65",Name:"Record Assigned"},Description:localization.RecordAssignedDescription.replace("{0}",session.user.Name).replace("{1}",e.assignedWorkItem.displayName),DescriptionDisplay:localization.RecordAssignedDescription.replace("{0}",session.user.Name).replace("{1}",e.assignedWorkItem.displayName),EnteredBy:session.user.Name,EnteredDate:(new Date).toISOString(),LastModified:(new Date).toISOString(),Title:localization.RecordAssigned,Image:app.config.iconPath+app.config.icons["Record Assigned"]}}]}return t},w=function(){kendo.ui.ExtAlertDialog.show({title:localizationHelper.localize("Warning"),message:localizationHelper.localize("BulkEditExceedMessage")})},y=function(e){if(app.isMobile()){$("[data-control-id='"+e.targetControlId+"']").data("kendoListView").dataSource.query()}else{var t=$("#"+e.targetControlId).data("kendoGrid"),a=app.gridUtils.savedState.getCurrentState(e.targetControlId);app.lib.recheckGridState(a,t),t.dataSource.query(a)}app.lib.message.add(localizationHelper.localize("SaveSuccessMessage"),"success"),app.lib.mask.remove(),app.lib.message.show()},k=function(){app.lib.message.add(localizationHelper.localize("SaveErrorMessage"),"danger"),app.lib.mask.remove(),app.lib.message.show()},I=function(){_.isUndefined(e.viewModel.AssignedWorkItem)||(u=e.viewModel.AssignedWorkItem.DisplayName,p=e.viewModel.AssignedWorkItem.BaseId),"Incident"==d?(m=e.viewModel.TierQueue,f=_.isNull(e.viewModel.TierQueue)||_.isUndefined(e.viewModel.TierQueue)?"":e.viewModel.TierQueue.Name,v=_.isNull(e.viewModel.TierQueue)||_.isUndefined(e.viewModel.TierQueue)?"00000000-0000-0000-0000-000000000000":e.viewModel.TierQueue.Id):"ServiceRequest"==d&&(m=e.viewModel.SupportGroup,f=_.isNull(e.viewModel.SupportGroup)||_.isUndefined(e.viewModel.SupportGroup)?"":e.viewModel.SupportGroup.Name,v=_.isNull(e.viewModel.SupportGroup)||_.isUndefined(e.viewModel.SupportGroup)?"00000000-0000-0000-0000-000000000000":e.viewModel.SupportGroup.Id),m.Text=m.Name},S=function(e){return new kendo.data.DataSource({transport:{read:{url:app.lib.addUrlParam("/api/V3/User/GetSupportGroupUsers","id",e),dataType:"json"}},schema:{model:{fields:{Id:{type:"string"},Name:{type:"string"}}}}})},C=function(t,a,n){_.isUndefined(t)||(c||("Incident"!=e.type||_.isUndefined(e.viewModel.TierQueue)?"ServiceRequest"!=e.type||_.isUndefined(e.viewModel.SupportGroup)||e.viewModel.set("SupportGroup",t):e.viewModel.set("TierQueue",t)),a.set("userEnabled",!0),a.set("okEnabled",!0),a.set("assignToDataSource",S(t.Id)),a.assignToDataSource.bind("change",function(e){n.focus(),n.value(""),n.input.attr("placeholder",localization.ChooseOne)}))},T={windowEle:function(){var e=_.template(a),t=new kendo.View(e(),{wrap:!1});return o(t.render()),t.destroy(),t},taskListItem:function(e,t,a){$.extend(!0,e,r);var n=_.template(a),i=new kendo.View(n(e),{wrap:!1,model:t});return o(i.render()),i}};!function(){var e=T.windowEle();c||I();var a=g(e);c?(b(a),T.taskListItem({onClick:"analystByGroup",toolTipMessage:localizationHelper.localize("MustSelectSameType")},a,i),app.isMobile()?(app.events.subscribe("mobileWiListSelectionChange",function(e,t){_.isUndefined(t)||(a.onTargetControlChange(t.selectedCards),a.targetControlId=t.controlId)}),app.events.subscribe("mobileWiListInit",function(e,t){_.isUndefined(t)||(a.onTargetControlChange(t.selectedCards),a.targetControlId=t.controlId)})):(app.events.subscribe("gridChange",function(e,t){a.onTargetControlChange(t),a.targetControlId=$(t.wrapper).attr("id")}),app.events.subscribe("gridBound",function(e,t){a.onTargetControlChange(t),a.targetControlId=$(t.wrapper).attr("id")}))):T.taskListItem({Target:"analystByGroup"},a,t)}()}}}),define("text!forms/popups/notificationPopup/view.html",[],function(){return'<div class="popupNotification"></div>'}),define("forms/tasks/assignToMe/controller",["require","text!forms/tasks/anchor/view.html","text!forms/popups/notificationPopup/view.html"],function(e){var t=e("text!forms/tasks/anchor/view.html"),a=e("text!forms/popups/notificationPopup/view.html");return{notificationTemplate:a,build:function(e,n,i){var r=_.template(a),o=new kendo.View(r(d),{wrap:!1});i(o.render());var s=kendo.observable({displayName:n.Configs.displayName,baseId:n.Configs.baseId,target:n.Configs.target,assignToMe:function(){e.viewModel.AssignedWorkItem.set("BaseId",this.baseId),e.viewModel.AssignedWorkItem.set("DisplayName",this.displayName);var t=o.element,a=t.kendoNotification({height:"80px",templates:[{type:"info",template:"<div class='success k-ext-dialog-content'><div class='k-ext-dialog-icon fa fa-check'></div><div class='k-ext-dialog-message'>#= message #</div></div>"}]}).data("kendoNotification"),n=localizationHelper.localize(localization.AssignedToMeNotificationMessage,"This workitem is assigned to {0}");a.show({message:n.replace("{0}",session.user.Name)},"info")}}),l=_.template(t),d={Target:"assignToMe"};$.extend(!0,d,n),i(new kendo.View(l(d),{wrap:!1,model:s,init:function(e){}}).render())}}}),define("text!forms/tasks/changeStatus/view.html",[],function(){return'<div id="ChangeStatusWindow" class="cireson-window defined-form hide">\r\n    <div class="cireson-window--wrapper">\r\n        <div class="cireson-window--body">\r\n            <div id="statusPicker" />\r\n            <div id="resolutionPicker" data-bind="visible: showResolution" />\r\n            <div id="resolutionDescription" data-bind="visible: showResolution" />\r\n            <div id="comment" data-bind="visible: showComment" />\r\n            <div id="autoResolve" data-bind="visible: showAutoResolve" />\r\n            <div id="letAnalystDecide" data-bind="visible: letAnalystDecide" />\r\n        </div>\r\n        <div class="cireson-window--footer window-buttons">\r\n            <div id="changeStatusErrorWin" class="error"></div>\r\n            <button data-role="button"\r\n                    class="btn btn-primary"\r\n                    data-bind="enabled: okEnabled, events: { click: okClick }">\r\n                <%= localization.OK %>\r\n            </button>\r\n            <button data-role="button"\r\n                    class="btn btn-default"\r\n                    data-bind="events: { click: cancelClick }">\r\n                <%= localization.Cancel %>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>'}),define("text!forms/tasks/changeStatus/view.drawer.html",[],function(){return'<div class="cireson-window defined-form hide">\r\n    <div class="cireson-window--wrapper">\r\n        <div class="cireson-window--body">\r\n            \x3c!-- status picker for IR or SR statuses --\x3e\r\n            <div class="form-group">\r\n                <label class="control-label" data-bind="localize: Status">\r\n                </label>\r\n                <div class="form-control form-control-picker input-sm"\r\n                     data-role="Status"\r\n                     data-url="/api/V3/Enum/GetList"\r\n                     data-combourl="/api/V3/Enum/GetFlatList/"\r\n                     data-disabled="false"\r\n                     data-bind="ciresonDropDownTree: wiStatusTypeId, value: newStatusObj, options: { showPath: showPath,  mustSelectLeafNode: leafNodeOnly }"></div>\r\n            </div>\r\n            \x3c!-- resolution category picker for IR --\x3e\r\n            <div data-bind="visible: irStatusResolved">\r\n                <div class="form-group">\r\n                    <label class="control-label">\r\n                        <span data-bind="localize: ResolutionCategory"></span> (<span data-bind="localize: Required"></span>)\r\n                    </label>\r\n                    <div class="form-control form-control-picker input-sm"\r\n                         data-role="Resolution"\r\n                         data-url="/api/V3/Enum/GetList"\r\n                         data-combourl="/api/V3/Enum/GetFlatList/"\r\n                         data-disabled="false"\r\n                         data-bind="ciresonDropDownTree: resolutionResultEnumId, value: newResolutionId, options: { showPath: showPath,  mustSelectLeafNode: leafNodeOnly }"></div>\r\n\r\n                </div>\r\n                \x3c!-- resolution description for IR --\x3e\r\n                <div class="form-group">\r\n                    <label class="control-label" data-bind="localize: ResolutionDescription">\r\n                    </label>\r\n                    <textarea class="k-textbox form-control input-sm" rows="5"\r\n                              data-bind="value: resolutionDescription" maxlength="4000"></textarea>\r\n                </div>\r\n\r\n                \x3c!-- resolve child incidents: let analyst decide option--\x3e\r\n                <div class="form-group" data-bind="visible: irResolveChildOption">\r\n                    <div class="checkbox  checkbox-inline ">\r\n                        <input type="checkbox" name="resolveChildIncident" data-bind="checked: resolveChildIncident">\r\n                        <label class="control-label" for="resolveChildIncident">\r\n                            <span data-bind="localize: ResolveChildIncidentMessage" />\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div data-bind="visible: srStatusCompleted">\r\n                \x3c!-- SR Implementation Results --\x3e\r\n                <div class="form-group">\r\n                    <label class="control-label">\r\n                        <span data-bind="localize: ImplementationResults"></span>\r\n                    </label>\r\n                    <div class="form-control form-control-picker input-sm"\r\n                         data-role="Resolution"\r\n                         data-url="/api/V3/Enum/GetList"\r\n                         data-combourl="/api/V3/Enum/GetFlatList/"\r\n                         data-disabled="false"\r\n                         data-bind="ciresonDropDownTree: resolutionResultEnumId, value: newResultId, options: { showPath: showPath,  mustSelectLeafNode: leafNodeOnly }"></div>\r\n\r\n                </div>\r\n                \x3c!-- SR Implementation Notes --\x3e\r\n                <div class="form-group">\r\n                    <label class="control-label">\r\n                        <span data-bind="localize: Implementationnotes"></span> (<span data-bind="localize: Required"></span>)\r\n                    </label>\r\n                    <textarea class="k-textbox form-control input-sm" rows="5"\r\n                              data-bind="value: resultNote" maxlength="4000"></textarea>\r\n                </div>\r\n            </div>\r\n            \x3c!-- comment for SR in \'Cancelled\' status --\x3e\r\n            <div class="form-group" data-bind="visible: srStatusCancelled">\r\n                <label class="control-label" data-bind="localize: Comment">\r\n                </label>\r\n                <textarea class="k-textbox form-control input-sm" rows="5"\r\n                          data-bind="value: resultComment" maxlength="4000"></textarea>\r\n            </div>\r\n        </div>\r\n        <div class="cireson-window--footer window-buttons">\r\n            <div id="changeStatusErrorWin" class="error"></div>\r\n            <button data-role="button" class="btn btn-primary"\r\n                    data-bind="enabled: okEnabled,\r\n                           events: { click: okClick }">\r\n                <%= localization.OK %>\r\n            </button>\r\n            <button data-role="button" class="btn btn-default"\r\n                    data-bind="events: { click: cancelClick }">\r\n                <%= localization.Cancel %>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>'}),define("text!forms/fields/longstring/view.html",[],function(){return'<div class="form-group <%= visible %>" style="">\r\n\r\n    <label class="control-label" for="<%= PropertyName %>" data-localize="<%= PropertyDisplayName %>">\r\n        <span><% if ( Required ){ %> <%= \'(\' + localization.Required + \')\' %><% } %></span>\r\n    </label>\r\n    <textarea name="<%= PropertyName %>"\r\n              class="k-textbox form-control input-sm"\r\n              rows="<%= Rows %>"\r\n              data-bind="value: <%= PropertyName %><% if ( LimitLength ){ %>, events : { blur: view.longStringController.CheckLength }<% } %>"\r\n        <% if ( LimitLength ){ %>\r\n        maxlength="<%= MaxLength %>"\r\n        <% } %>\r\n\r\n        <% if ( Disabled ){ %>\r\n        disabled\r\n        <% } %>\r\n\r\n        <% if ( Required ){ %>\r\n        required\r\n        <% } %>\r\n\r\n        >\r\n    </textarea>\r\n    <% if ( LimitLength ){ %>\r\n    <p class="help-block validation-summary-errors" style="display: none;"><%= localization.MaxLengthError.replace("{0}", MaxLength) %></p>\r\n    <% } %>\r\n</div>\r\n<script>\r\n    $(\'textarea[name=ResolutionDescription]\').removeClass(\'form-control\');\r\n<\/script>\r\n'}),define("forms/fields/longstring/controller",["require","text!forms/fields/longstring/view.html"],function(e){var t=e("text!forms/fields/longstring/view.html");return{template:t,build:function(e,a,n){var i=a.vm,r=new kendo.View;_.isUndefined(i.view)&&(i.view=[]),i.view.longStringController={CheckLength:function(e){setTimeout(function(){var t=$(e.currentTarget),a=t.next(),n=t.attr("maxlength");t.val().length>n?(t.attr("data-invalid",""),a.show()):(a.hide(),t.removeAttr("data-invalid"),t.data("prevent",!1))},100)}},i.view.buildLongStringView=function(){var e=_.template(t),o=!1;_.isUndefined(a.MinLength)&&_.isUndefined(a.MaxLength)||(o=!0);var s={Required:a.Required,Disabled:a.disabled,MinLength:a.MinLength,MaxLength:a.MaxLength,LimitLength:o,Rows:10,visible:_.isUndefined(a.IsVisible)||0!=a.IsVisible?"":"hidden"};$.extend(!0,s,a),r=new kendo.View(e(s),{wrap:!1,model:i}),n(r.render())},i.view.buildLongStringView()}}}),define("text!forms/fields/boolean/view.html",[],function(){return'<div class="form-group <%= visible %>">\r\n    <% if ( !Inline ){ %>\r\n    <label class="control-label" data-localize="<%= PropertyDisplayName %>"><span><% if ( Required ){ %> <%= \'(\' + localization.Required + \')\' %><% } %></span></label>\r\n    <% } %>\r\n\r\n    <div class="checkbox <% if ( Inline ){ %> checkbox-inline <% } else { %> checkbox-block <% } %>">\r\n        <input type="checkbox"\r\n               name="<%= PropertyName %>"\r\n               id="<%= PropertyName %>"\r\n               data-bind="checked: <%= PropertyName %>"<% if ( Disabled ){ %>\r\n        disabled\r\n        <% } %>\r\n\r\n        />\r\n\r\n\r\n        <label class="control-label" for="<%= PropertyName %>">\r\n            <% if ( Inline ){ %>\r\n            <span data-localize="<%= PropertyDisplayName %>"></span>\r\n            <% } %>\r\n        </label>\r\n\r\n    </div>\r\n</div>'}),define("forms/fields/boolean/controller",["require","text!forms/fields/boolean/view.html"],function(e){var t=e("text!forms/fields/boolean/view.html");return{template:t,build:function(e,a,n){var i=_.template(t),r={Disabled:a.disabled,Required:a.Required,Inline:a.Inline||!1,visible:_.isUndefined(a.IsVisible)||0!=a.IsVisible?"":"hidden"};$.extend(!0,r,a),n(i(r))}}}),define("forms/tasks/changeStatus/controller",["require","text!forms/tasks/anchor/view.html","text!forms/tasks/changeStatus/view.html","text!forms/tasks/changeStatus/view.drawer.html","forms/fields/enum/controller","forms/fields/longstring/controller","forms/fields/boolean/controller","text!forms/tasks/drawerTask/view.html"],function(e){var t=e("text!forms/tasks/anchor/view.html"),a=e("text!forms/tasks/changeStatus/view.html"),n=e("text!forms/tasks/changeStatus/view.drawer.html"),i=e("forms/fields/enum/controller"),r=e("forms/fields/longstring/controller"),o=e("forms/fields/boolean/controller"),s=e("text!forms/tasks/drawerTask/view.html");return{template:a,build:function(e,l,d){"Problem"==e.type&&_.isUndefined(e.viewModel.IsAutoResolve)&&e.viewModel.set("IsAutoResolve",e.viewModel.AutoResolve);var c;if("BulkEdit"!=e.type)var u={Status:_.clone(e.viewModel.Status),ResolutionCategory:_.isUndefined(e.viewModel.ResolutionCategory)?null:_.clone(e.viewModel.ResolutionCategory),ResolutionDescription:_.clone(e.viewModel.ResolutionDescription),ChildWorkItem:_.clone(e.viewModel.ChildWorkItem),Notes:_.clone(e.viewModel.Notes),ImplementationResults:_.isUndefined(e.viewModel.ImplementationResults)?null:_.clone(e.viewModel.ImplementationResults),RelatesToWorkItem:_.clone(e.viewModel.RelatesToWorkItem),Resolution:_.isUndefined(e.viewModel.Resolution)?null:_.clone(e.viewModel.Resolution),AutoResolve:!_.isUndefined(e.viewModel.AutoResolve)&&_.clone(e.viewModel.AutoResolve)};var p=app.constants.workItemStatuses,m=p.Incident.Resolved,f=p.Incident.Active,v=p.Incident.Closed,g=p.Incident.Pending,b=p.ServiceRequest.Cancelled,h=p.ServiceRequest.Completed,w=p.ServiceRequest.Submitted,y=p.ServiceRequest.InProgress,k=p.ServiceRequest.OnHold,I=p.ServiceRequest.Failed,S=p.ServiceRequest.Closed,C=p.ChangeRequest.Failed,T=p.ChangeRequest.Closed,x=p.ChangeRequest.InProgress,R=p.ChangeRequest.OnHold,D=p.ChangeRequest.Cancelled,M=p.ChangeRequest.Submitted,A=p.ChangeRequest.Completed,z=p.Problem.Resolved,q=p.Problem.Closed,P=p.ReleaseRecord.Closed,E=p.ReleaseRecord.Cancelled,L=p.ReleaseRecord.Completed,O=p.ReleaseRecord.Failed,N=p.ReleaseRecord.Editing,V=p.ReleaseRecord.OnHold,U=p.ReleaseRecord.InProgress,F=function(t){return kendo.observable({changeStatus:function(){var a=t.element.clone(),n=a.kendoCiresonWindow({title:localization.ChangeStatusTask,width:600,height:480,actions:[],activate:function(){var t=i.type,a=e.viewModel.Status.Id;G(t,a,o,r,i.enumId)}}).data("kendoWindow"),i=kendo.observable({enumId:l.Configs.statusEnumId,resolutionCategoryEnumId:l.Configs.resolutionCategoryEnumId,type:l.Configs.type,resolveChildSettings:null,letAnalystDecide:!1,workItemModel:e.viewModel,okEnabled:!1,requireResolution:!1,resolveChildIncident:!0,okClick:function(){var t=app.controls.getWorkItemLogType(e.viewModel);if(_.isString(e.viewModel.Status.Name)&&e.viewModel.Status.Name.length<1)e.viewModel.set("Status",{Id:u.Status.Id,Name:u.Status.Name});else if(this.requireResolution&&!_.isUndefined(e.viewModel.ResolutionCategory)&&_.isNull(e.viewModel.ResolutionCategory.Id))a.find("#changeStatusErrorWin").html(localization.RequestCategoryRequiredError);else if(this.requireResolution&&_.isNull(e.viewModel.Notes)&&"ServiceRequest"==e.type)a.find("#changeStatusErrorWin").html(localization.ImplementationNotesRequiredError);else if(e.viewModel.Status.Id===m){e.viewModel.set("ResolvedDate",(new Date).toISOString());var i=$("input[name='ResolvedDate']");"datePicker"==i.attr("data-control")?i.val(kendo.toString(new Date,"d")):"dateTimePicker"==i.attr("data-control")&&i.val(kendo.toString(new Date,"g")),t&&e.viewModel[t].unshift(new app.dataModels.AppliesToTroubleTicket.recordResolved(e.viewModel.ResolutionDescription)),e.viewModel.RelatesToTroubleTicket={BaseId:session.user.Id},e.viewModel.IsParent&&(this.resolveChildSettings.ResolveChildIncident||this.resolveChildSettings.ResolvedLetAnalystDecide&&this.resolveChildIncident)&&ie(this.resolveChildSettings),a.find("#changeStatusErrorWin").html(""),n.close()}else if(e.viewModel.Status.Id===v||e.viewModel.Status.Id===S||e.viewModel.Status.Id===q){e.viewModel.set("ClosedDate",(new Date).toISOString());var r=$("input[name='ClosedDate']");switch("datePicker"==r.attr("data-control")?r.val(kendo.toString(new Date,"d")):"dateTimePicker"==r.attr("data-control")&&r.val(kendo.toString(new Date,"g")),e.viewModel.Status.Id){case q:
e.viewModel.RelatesToTroubleTicket_={BaseId:session.user.Id};break;case v:e.viewModel.RelatesToTroubleTicket_={BaseId:session.user.Id},e.viewModel[t].unshift(new app.dataModels.AppliesToTroubleTicket.recordClosed);break;case S:e.viewModel.ClosedByUser={BaseId:session.user.Id}}a.find("#changeStatusErrorWin").html(""),n.close()}else if(e.viewModel.Status.Id===f){e.viewModel.RelatesToTroubleTicket={BaseId:null},e.viewModel.ResolutionCategory.set("Id",null),e.viewModel.ResolutionCategory.set("Name",""),e.viewModel.set("ResolutionDescription",null),e.viewModel.set("ResolvedDate",null);var t=app.controls.getWorkItemLogType(e.viewModel);t&&e.viewModel[t].unshift(new app.dataModels.AppliesToTroubleTicket.recordActivated),a.find("#changeStatusErrorWin").html(""),n.close()}else if(e.viewModel.Status.Id===h){e.viewModel.set("CompletedDate",(new Date).toISOString());var o=$("input[name='CompletedDate']");"datePicker"==o.attr("data-control")?o.val(kendo.toString(new Date,"d")):"dateTimePicker"==o.attr("data-control")&&o.val(kendo.toString(new Date,"g")),a.find("#changeStatusErrorWin").html(""),n.close()}else if(e.viewModel.Status.Id===z){e.viewModel.set("ResolvedDate",(new Date).toISOString());var o=$("input[name='ResolvedDate']");"datePicker"==o.attr("data-control")?o.val(kendo.toString(new Date,"d")):"dateTimePicker"==o.attr("data-control")&&o.val(kendo.toString(new Date,"g")),e.viewModel.RelatesToTroubleTicket={BaseId:session.user.Id},e.viewModel.IsAutoResolve&&re(),e.viewModel.set("AutoResolve",e.viewModel.IsAutoResolve),a.find("#changeStatusErrorWin").html(""),n.close()}else a.find("#changeStatusErrorWin").html(""),n.close()},cancelClick:function(){e.viewModel.set("Status",{Id:u.Status.Id,Name:u.Status.Name}),"Incident"===l.Configs.type&&(e.viewModel.set("ResolutionCategory",{Id:u.ResolutionCategory.Id,Name:u.ResolutionCategory.Name}),e.viewModel.set("ResolutionDescription",u.ResolutionDescription),e.viewModel.set("ChildWorkItem",u.ChildWorkItem)),"ServiceRequest"===l.Configs.type&&(e.viewModel.set("ImplementationResults",{Id:u.ImplementationResults.Id,Name:u.ImplementationResults.Name}),e.viewModel.set("Notes",u.Notes)),"Problem"===l.Configs.type&&(e.viewModel.set("Resolution",{Id:u.Resolution.Id,Name:u.Resolution.Name}),e.viewModel.set("ResolutionDescription",u.ResolutionDescription),e.viewModel.set("RelatedWorkItems",u.RelatesToWorkItem),e.viewModel.set("AutoResolve",u.AutoResolve),e.viewModel.set("IsAutoResolve",u.AutoResolve)),n.close()},showComment:e.viewModel.Status.Id==b,showResolution:e.viewModel.Status.Id==m||e.viewModel.Status.Id==h||e.viewModel.Status.Id==z,showAutoResolve:e.viewModel.Status.Id==z});kendo.bind(a,i),Q(i,a);var r=a.find('div[data-role="Status"]').data().handler._dropdown,o=a.find('div[data-role="Status"]').data().handler._treeview;r.bind("change",function(t){e.viewModel.set("okEnabled",!1),ne(e.viewModel.Status.Id,i)}),o.bind("change",function(t){e.viewModel.set("okEnabled",!1),ne(e.viewModel.Status.Id,i)}),"Incident"===i.type&&K(i,a),"ServiceRequest"===i.type&&j(i,a),"Problem"===i.type&&H(i,a),a.removeClass("hide"),a.show(),n.open()}})},W=function(e){var t=kendo.observable({currentSelection:[],currentSelectionOfParents:[],containsParents:!1,selectedWorkItem:{type:"",trimmedType:"",projectionId:"",currentStatusId:"",currentStatusName:"",statusTypeId:"",resolutionResultEnumId:""},openModal:function(){function t(){var e=r.get("newStatusObj");e&&ae(e.Id,a.selectedWorkItem.currentStatusId,r)}if(this.isEnabled){var a=this,n=e.element.clone(),i=n.kendoCiresonWindow({title:localization.ChangeStatusTask,actions:[],activate:function(){var e=a.selectedWorkItem.trimmedType,t=a.selectedWorkItem.currentStatusId;G(e,t,s,o,a.selectedWorkItem.statusTypeId)}}).data("kendoWindow"),r=kendo.observable({selectedWorkItems:a.currentSelection,selectedParents:a.currentSelectionOfParents,resolveChildSettings:null,resolveChildIncident:!0,newStatusObj:"",newResolutionId:"",resolutionDescription:"",newResultId:"",resultNote:"",resultComment:"",showPath:!1,leafNodeOnly:!1,wiStatusTypeId:a.selectedWorkItem.statusTypeId,resolutionResultEnumId:a.selectedWorkItem.resolutionResultEnumId,irStatusResolved:!1,srStatusCompleted:!1,srStatusCancelled:!1,irCategoryRequired:!1,srNotesRequired:!1,irResolveChildOption:!1,okEnabled:!1,okClick:function(){var e=this;if(se(e,n))if(e.irStatusResolved&&(c.ResolveChildIncident||e.irResolveChildOption&&e.resolveChildIncident)&&a.containsParents)le(a,e,i);else{var t={ProjectionId:a.selectedWorkItem.projectionId,UpdateServiceManagement:!0,ItemIds:_.pluck(e.selectedWorkItems,"BaseId"),EditedFields:ee(e)};de(t,a,i)}},cancelClick:function(){i.close()}});kendo.bind(n,r);var o=n.find('div[data-role="Status"]').data().handler._dropdown,s=n.find('div[data-role="Status"]').data().handler._treeview;o.bind("change",function(e){t()}),s.bind("change",function(e){t()}),"Incident"===a.selectedWorkItem.trimmedType&&a.selectedWorkItem.currentStatusId===app.constants.workItemStatuses.Incident.Resolved&&(r.set("irStatusResolved",!0),r.set("irCategoryRequired",!0)),"ServiceRequest"===a.selectedWorkItem.trimmedType&&(a.selectedWorkItem.currentStatusId===app.constants.workItemStatuses.ServiceRequest.Completed?(r.set("srStatusCompleted",!0),r.set("srStatusCancelled",!1)):a.selectedWorkItem.currentStatusId===app.constants.workItemStatuses.ServiceRequest.Cancelled&&(r.set("srStatusCancelled",!0),r.set("srStatusCompleted",!1))),n.removeClass("hide"),n.show(),i.open()}},isEnabled:!1,showTooltip:!0,setEnabled:function(e){this.set("isEnabled",e),this.set("showTooltip",!e)},targetControlId:"",onTargetControlChange:function(e){t.set("currentSelectionOfParents",[]),t.set("containsParents",!1);var a=[];if(a=app.isMobile()?e:e.select().map(function(t,a){return e.dataItem($(a))}).toArray(),a.length>10&&this.onExceedSelectionCount(),t.set("currentSelection",a),a.length<=0||a.length>10)t.setEnabled(!1);else{var n=_.pluck(a,"WorkItemType"),i=_.pluck(a,"StatusId"),r=_.pluck(a,"Status"),o=_.reduce(n,function(e,t){return e===t&&e});t.set("selectedWorkItem.type",o);var s=_.reduce(i,function(e,t){return e===t&&e}),l=_.reduce(r,function(e,t){return e===t&&e});if(t.set("selectedWorkItem.currentStatusId",s),t.set("selectedWorkItem.currentStatusName",l),s&&o)switch(o){case"System.WorkItem.ServiceRequest":t.setTrimmedWiType(),t.set("selectedWorkItem.projectionId",app.constants.projectionIds.SystemWorkItemServiceRequestViewModel),t.set("selectedWorkItem.statusTypeId",app.constants.workItemStatuses.ServiceRequest.Id),t.set("selectedWorkItem.resolutionResultEnumId",app.constants.enumPickerIds.ServiceRequestImplementationResults),"Closed"===l?t.setEnabled(!1):t.setEnabled(!0);break;case"System.WorkItem.Incident":var d=[];_.each(a,function(e){e.IsParent&&(t.set("containsParents",!0),d.push(e))}),t.set("currentSelectionOfParents",d),t.setTrimmedWiType(),t.set("selectedWorkItem.projectionId",app.constants.projectionIds.SystemWorkItemIncidentViewModel),t.set("selectedWorkItem.statusTypeId",app.constants.workItemStatuses.Incident.Id),t.set("selectedWorkItem.resolutionResultEnumId",app.constants.enumPickerIds.IncidentResolution),t.setEnabled(!0);break;default:t.set("selectedWorkItem.projectionId",""),t.set("selectedWorkItem.statusTypeId",""),t.set("selectedWorkItem.resolutionResultEnumId",""),t.setEnabled(!1)}else t.setEnabled(!1)}},setTrimmedWiType:function(){this.set("selectedWorkItem.trimmedType",this.selectedWorkItem.type.split(/[\s.]+/).pop())},onExceedSelectionCount:function(){kendo.ui.ExtAlertDialog.show({title:localizationHelper.localize("Warning"),message:localizationHelper.localize("BulkEditExceedMessage")})}});return t},G=function(e,t,a,n,i){var r=oe(),o=r[e][t];"Incident"==e&&_.isUndefined(o)&&(o={field:"Id",operator:"neq",value:app.constants.workItemStatuses.Incident.Closed}),a.dataSource.options.serverFiltering=!1,a.dataSource.filter(o),$.get("/api/V3/Enum/GetFlatList/",{id:i,itemFilter:""},function(e){var t=new kendo.data.DataSource;t.data(e),t.filter(o),t.view().length>0&&n.setDataSource(t.view())}),c=te()},B={windowEle:function(e){var t=_.template(e),a=new kendo.View(t(),{wrap:!1});return d(a.render()),a},taskListItem:function(e,t,a){$.extend(!0,e,l);var n=_.template(a),i=new kendo.View(n(e),{wrap:!1,model:t});return d(i.render()),i}},H=function(t,a){var n={PropertyName:"Resolution",PropertyDisplayName:"Resolution",Required:!1,EnumId:t.resolutionCategoryEnumId};J(a.find("#resolutionPicker"),n,e.viewModel);var i={PropertyName:"ResolutionDescription",PropertyDisplayName:"ResolutionDescription",Required:!1,MaxLength:4e3,Rows:5,vm:e};Y(a.find("#resolutionDescription"),i,e.viewModel);var r={PropertyName:"IsAutoResolve",PropertyDisplayName:"ProblemAutoResolveIncident",Inline:!0,Disabled:!1};X(a.find("#autoResolve"),r,e.viewModel)},j=function(t,a){var n={PropertyName:"ImplementationResults",PropertyDisplayName:"ImplementationResults",Required:!1,EnumId:t.resolutionCategoryEnumId};J(a.find("#resolutionPicker"),n,e.viewModel);var i={PropertyName:"Notes",PropertyDisplayName:"Implementationnotes",Required:!0,MaxLength:4e3,Rows:5,vm:e};Y(a.find("#resolutionDescription"),i,e.viewModel);var r={PropertyName:"Notes",PropertyDisplayName:"Comment",Required:!1,MaxLength:4e3,Rows:5,vm:e};Y(a.find("#comment"),r,e.viewModel)},K=function(t,a){var n={PropertyName:"ResolutionCategory",PropertyDisplayName:"ResolutionCategory",Required:!0,EnumId:t.resolutionCategoryEnumId};J(a.find("#resolutionPicker"),n,e.viewModel);var i={PropertyName:"ResolutionDescription",PropertyDisplayName:"ResolutionDescription",Required:!1,MaxLength:4e3,Rows:5,vm:e};Y(a.find("#resolutionDescription"),i,e.viewModel);var r={PropertyName:"resolveChildIncident",PropertyDisplayName:"ResolveChildIncidentMessage",Inline:!0,Disabled:!1};X(a.find("#letAnalystDecide"),r,e.viewModel)},Q=function(t,a){var n={PropertyName:"Status",PropertyDisplayName:"Status",EnumId:t.enumId};J(a.find("#statusPicker"),n,e.viewModel)},J=function(e,t,a){i.build(a,t,function(t){e.html(t),app.controls.apply(e,{localize:!0,vm:a,bind:!0})})},Y=function(e,t,a){r.build(a,t,function(t){e.html(t),app.controls.apply(e,{localize:!0,vm:a,bind:!0})})},X=function(e,t,a){o.build(a,t,function(t){e.html(t),app.controls.apply(e,{localize:!0,vm:a,bind:!0})})},Z=function(e,t){return[{PropertyName:"Status",PropertyType:"enum",EditedValue:e.get("newStatusObj").Id},{PropertyName:"ResolutionCategory",PropertyType:"enum",EditedValue:t},{PropertyName:"ResolutionDescription",PropertyType:"string",EditedValue:e.get("resolutionDescription")},{PropertyName:"ResolvedDate",PropertyType:"date",EditedValue:(new Date).toISOString()},{PropertyName:"RelatesToTroubleTicket",PropertyType:"singlecardinalityobject",PropertyRelationshipId:"f7d9b385-a84d-3884-7cde-e2c926d931a5",EditedValue:session.user.Id},{PropertyName:"AppliesToTroubleTicket",PropertyType:"multiplecardinalityobject",propertyRelationshipId:"a860c62e-e675-b121-f614-e52fcbd9ef2c",EditedValue:{ActionType:{Id:"5ca2cfee-6740-1576-540B-ce17222840b8",Name:"Record Resolved"},Description:e.get("resolutionDescription"),DescriptionDisplay:e.get("resolutionDescription"),EnteredBy:session.user.Name,EnteredDate:(new Date).toISOString(),LastModified:(new Date).toISOString(),Title:localization.RecordResolved,Image:app.config.iconPath+app.config.icons["Record Resolved"]}}]},ee=function(e){var t=[{PropertyName:"Status",PropertyType:"enum",EditedValue:e.get("newStatusObj").Id}];switch(e.get("newStatusObj").Id){case app.constants.workItemStatuses.Incident.Closed:t.push({PropertyName:"ClosedDate",PropertyType:"date",EditedValue:(new Date).toISOString()},{PropertyName:"RelatesToTroubleTicket_",PropertyType:"singlecardinalityobject",PropertyRelationshipId:"76bc6c3b-a77b-2468-0a63-169d23dfcdf0",EditedValue:session.user.Id});break;case app.constants.workItemStatuses.ServiceRequest.Closed:t.push({PropertyName:"ClosedDate",PropertyType:"date",EditedValue:(new Date).toISOString()},{PropertyName:"ClosedByUser",PropertyType:"singlecardinalityobject",PropertyRelationshipId:"ba8180d3-5bf9-1bbd-ae87-145dd8fc520f",EditedValue:session.user.Id});break;case app.constants.workItemStatuses.Incident.Resolved:t.push({PropertyName:"ResolutionCategory",PropertyType:"enum",EditedValue:e.get("newResolutionId").Id},{PropertyName:"ResolutionDescription",PropertyType:"string",EditedValue:e.get("resolutionDescription")},{PropertyName:"ResolvedDate",PropertyType:"date",EditedValue:(new Date).toISOString()},{PropertyName:"RelatesToTroubleTicket",PropertyType:"singlecardinalityobject",PropertyRelationshipId:"f7d9b385-a84d-3884-7cde-e2c926d931a5",EditedValue:session.user.Id},{PropertyName:"AppliesToTroubleTicket",PropertyType:"multiplecardinalityobject",propertyRelationshipId:"a860c62e-e675-b121-f614-e52fcbd9ef2c",EditedValue:{ActionType:{Id:"5ca2cfee-6740-1576-540B-ce17222840b8",Name:"Record Resolved"},Description:e.get("resolutionDescription"),DescriptionDisplay:e.get("resolutionDescription"),EnteredBy:session.user.Name,EnteredDate:(new Date).toISOString(),LastModified:(new Date).toISOString(),Title:localization.RecordResolved,Image:app.config.iconPath+app.config.icons["Record Resolved"]}});break;case app.constants.workItemStatuses.ServiceRequest.Completed:t.push({PropertyName:"Notes",PropertyType:"string",EditedValue:e.get("resultNote")},{PropertyName:"CompletedDate",PropertyType:"date",EditedValue:(new Date).toISOString()}),_.isUndefined(e.get("newResultId").Id)||t.push({PropertyName:"ImplementationResults",PropertyType:"enum",EditedValue:e.get("newResultId").Id});break;case app.constants.workItemStatuses.ServiceRequest.Cancelled:t.push({PropertyName:"Notes",PropertyType:"string",EditedValue:e.get("resultComment")})}return t},te=function(){$.get("/api/V3/Projection/GetParentWorkItemSettings",{},function(e){c=e})},ae=function(e,t,a){switch(e){case m:a.set("irStatusResolved",!0),a.set("irCategoryRequired",!0),a.set("irResolveChildOption",a.selectedParents.length>0&&c.ResolvedLetAnalystDecide);break;case b:a.set("srStatusCancelled",!0),a.set("srStatusCompleted",!1);break;case h:a.set("srStatusCompleted",!0),a.set("srNotesRequired",!0),a.set("srStatusCancelled",!1);break;default:a.set("irStatusResolved",!1),a.set("irCategoryRequired",!1),a.set("srStatusCancelled",!1),a.set("srStatusCompleted",!1),a.set("srNotesRequired",!1)}a.set("okEnabled",!0)},ne=function(t,a){switch(t){case m:a.set("resolveChildSettings",c),a.set("letAnalystDecide",c.ResolvedLetAnalystDecide&&e.viewModel.IsParent),a.set("requireResolution",!0),a.set("showResolution",!0);break;case b:a.set("showComment",!0);break;case h:a.set("showResolution",!0),a.set("requireResolution",!0);break;case z:a.set("showResolution",!0),a.set("requireResolution",!0),a.set("showAutoResolve",!0);break;default:a.set("showComment",!1),a.set("showResolution",!1),a.set("requireResolution",!1),a.set("showAutoResolve",!1),a.set("letAnalystDecide",!1)}_.isString(e.viewModel.Status.Name)&&e.viewModel.Status.Name.length>0?a.set("okEnabled",!0):a.set("okEnabled",!1)},ie=function(t){var a=t.ChildIncidentResolutionCategorySameAsParent?e.viewModel.ResolutionCategory.Id:t.ChildIncidentResolutionCategory.Id;$.each(e.viewModel.ChildWorkItem,function(t,n){n.set("Status",{Id:e.viewModel.Status.Id,Name:e.viewModel.Status.Name}),n.set("ResolutionCategory",{Id:a}),n.set("ResolutionDescription",e.viewModel.ResolutionDescription),n.set("ResolvedDate",e.viewModel.ResolvedDate)})},re=function(){$.each(e.viewModel.RelatesToWorkItem,function(t,a){a.set("Status",{Id:e.viewModel.Status.Id,Name:e.viewModel.Status.Name}),a.set("ResolutionDescription",e.viewModel.ResolutionDescription),a.set("ResolvedDate",e.viewModel.ResolvedDate)})},oe=function(){var e=new Array;return e.ServiceRequest=new Array,e.ServiceRequest[w]={logic:"or",filters:[{field:"Id",operator:"eq",value:h},{field:"Id",operator:"eq",value:w}]},e.ServiceRequest[y]={logic:"or",filters:[{field:"Id",operator:"eq",value:b},{field:"Id",operator:"eq",value:y},{field:"Id",operator:"eq",value:k}]},e.ServiceRequest[k]={logic:"or",filters:[{field:"Id",operator:"eq",value:k},{field:"Id",operator:"eq",value:b},{field:"Id",operator:"eq",value:y}]},e.ServiceRequest[I]={logic:"or",filters:[{field:"Id",operator:"eq",value:I},{field:"Id",operator:"eq",value:S}]},e.ServiceRequest[b]={logic:"or",filters:[{field:"Id",operator:"eq",value:b},{field:"Id",operator:"eq",value:S}]},e.ServiceRequest[h]={logic:"or",filters:[{field:"Id",operator:"eq",value:h},{field:"Id",operator:"eq",value:S}]},e.ReleaseRecord=new Array,e.ReleaseRecord[U]={logic:"or",filters:[{field:"Id",operator:"eq",value:E},{field:"Id",operator:"eq",value:N},{field:"Id",operator:"eq",value:U},{field:"Id",operator:"eq",value:V}]},e.ReleaseRecord[N]={logic:"or",filters:[{field:"Id",operator:"eq",value:E},{field:"Id",operator:"eq",value:N}]},e.ReleaseRecord[V]={logic:"or",filters:[{field:"Id",operator:"eq",value:E},{field:"Id",operator:"eq",value:N},{field:"Id",operator:"eq",value:U},{field:"Id",operator:"eq",value:V}]},e.ReleaseRecord[O]={logic:"or",filters:[{field:"Id",operator:"eq",value:N},{field:"Id",operator:"eq",value:O},{field:"Id",operator:"eq",value:P}]},e.ReleaseRecord[E]={logic:"or",filters:[{field:"Id",operator:"eq",value:N},{field:"Id",operator:"eq",value:E},{field:"Id",operator:"eq",value:P}]},e.ReleaseRecord[L]={logic:"or",filters:[{field:"Id",operator:"eq",value:N},{field:"Id",operator:"eq",value:P},{field:"Id",operator:"eq",value:L}]},e.ChangeRequest=new Array,e.ChangeRequest[M]={logic:"or",filters:[{field:"Id",operator:"eq",value:A},{field:"Id",operator:"eq",value:M}]},e.ChangeRequest[x]={logic:"or",filters:[{field:"Id",operator:"eq",value:D},{field:"Id",operator:"eq",value:x},{field:"Id",operator:"eq",value:R}]},e.ChangeRequest[R]={logic:"or",filters:[{field:"Id",operator:"eq",value:R},{field:"Id",operator:"eq",value:D},{field:"Id",operator:"eq",value:x}]},e.ChangeRequest[C]={logic:"or",filters:[{field:"Id",operator:"eq",value:C},{field:"Id",operator:"eq",value:T}]},e.ChangeRequest[D]={logic:"or",filters:[{field:"Id",operator:"eq",value:D},{field:"Id",operator:"eq",value:T}]},e.ChangeRequest[A]={logic:"or",filters:[{field:"Id",operator:"eq",value:A},{field:"Id",operator:"eq",value:T}]},e.Incident=new Array,e.Incident[f]={field:"Id",operator:"neq",value:v},e.Incident[g]={field:"Id",operator:"neq",value:v},e.Incident[m]={logic:"or",filters:[{field:"Id",operator:"eq",value:f},{field:"Id",operator:"eq",value:v}]},e.Problem=new Array,e},se=function(e,t){return e.irCategoryRequired&&(_.isUndefined(e.newResolutionId.Id)||e.newResolutionId.Id.length<=0)?(t.find("#changeStatusErrorWin").html(localization.RequestCategoryRequiredError),!1):!(e.srNotesRequired&&e.resultNote.length<=0)||(t.find("#changeStatusErrorWin").html(localization.ImplementationNotesRequiredError),!1)},le=function(e,t,a){var n=_.pluck(e.currentSelectionOfParents,"BaseId");$.ajax({url:"/api/v3/workitem/GetChildWorkItems/",data:JSON.stringify(n),dataType:"json",contentType:"application/json",type:"POST",success:function(n){if(c.ChildIncidentResolutionCategorySameAsParent){var i=_.pluck(t.selectedWorkItems,"BaseId");_.each(n,function(e){i.push(e)});var r=_.uniq(i),o={ProjectionId:e.selectedWorkItem.projectionId,UpdateServiceManagement:!0,ItemIds:r,EditedFields:ee(t)};de(o,e,a)}else{var s=c.ChildIncidentResolutionCategory.Id,l={ProjectionId:e.selectedWorkItem.projectionId,UpdateServiceManagement:!0,ItemIds:n,EditedFields:Z(t,s)},d={ProjectionId:e.selectedWorkItem.projectionId,UpdateServiceManagement:!0,ItemIds:_.pluck(t.selectedWorkItems,"BaseId"),EditedFields:ee(t)};de(d,e,a,function(t){t&&de(l,e,a)})}}})},de=function(e,t,a,n){a.close(),app.lib.mask.apply(),$.ajax({url:"/api/v3/workitem/BulkEditWorkItems/",data:JSON.stringify(e),dataType:"json",contentType:"application/json",type:"POST",success:function(){_.isUndefined(n)?ce(t):n(!0)},error:function(){_.isUndefined(n)?ue():n(!1)}})},ce=function(e){if(app.isMobile()){$("[data-control-id='"+e.targetControlId+"']").data("kendoListView").dataSource.query()}else{var t=$("#"+e.targetControlId).data("kendoGrid"),a=app.gridUtils.savedState.getCurrentState(e.targetControlId);app.lib.recheckGridState(a,t),t.dataSource.query(a)}app.lib.message.add(localizationHelper.localize("SaveSuccessMessage"),"success"),app.lib.mask.remove(),app.lib.message.show()},ue=function(){app.lib.message.add(localizationHelper.localize("SaveErrorMessage"),"danger"),app.lib.mask.remove(),app.lib.message.show()};"BulkEdit"==e.type?function(){var e=B.windowEle(n),t=W(e),a={onClick:"openModal",titleKey:l.titleKey,toolTipMessage:localizationHelper.localize("MustSelectSameTypeStatus")};B.taskListItem(a,t,s),app.isMobile()?(app.events.subscribe("mobileWiListSelectionChange",function(e,a){_.isUndefined(a)||(t.onTargetControlChange(a.selectedCards),t.targetControlId=a.controlId)}),app.events.subscribe("mobileWiListInit",function(e,a){_.isUndefined(a)||(t.onTargetControlChange(a.selectedCards),t.targetControlId=a.controlId)})):(app.events.subscribe("gridChange",function(e,a){t.onTargetControlChange(a),t.targetControlId=$(a.wrapper).attr("id")}),app.events.subscribe("gridBound",function(e,a){t.onTargetControlChange(a),t.targetControlId=$(a.wrapper).attr("id")}))}():function(){var e=B.windowEle(a),n=F(e),i={Target:"changeStatus"};B.taskListItem(i,n,t)}()}}}),define("forms/tasks/amChangeStatus/controller",["require","text!forms/tasks/anchor/view.html","text!forms/tasks/changeStatus/view.html","forms/fields/enum/controller","forms/fields/longstring/controller","forms/fields/boolean/controller"],function(e){var t=e("text!forms/tasks/anchor/view.html"),a=e("text!forms/tasks/changeStatus/view.html"),n=e("forms/fields/enum/controller");e("forms/fields/longstring/controller"),e("forms/fields/boolean/controller");return{template:a,build:function(e,i,r){var o=localization.ChangeHardwareAssetStatus;"HardwareAsset"==i.Configs.type?"HardwareAssetStatus"==i.Configs.enumName||"HardwareAssetType"==i.Configs.enumName&&(o=localization.ChangeHardwareAssetType):"SoftwareAsset"==i.Configs.type&&("SoftwareAssetStatus"==i.Configs.enumName?o=localization.ChangeSoftwareAssetStatus:"SoftwareAssetType"==i.Configs.enumName&&(o=localization.ChangeSoftwareAssetType));var s={Id:e.viewModel[i.Configs.enumName].Id,Name:e.viewModel[i.Configs.enumName].Name},l=_.template(a),d=new kendo.View(l(p),{wrap:!1});r(d.render());var c=kendo.observable({changeStatus:function(){var t=d.element.clone();win=t.kendoCiresonWindow({title:o,width:600,height:375,actions:[]}).data("kendoWindow");var a=new kendo.observable({enumId:i.Configs.statusEnumId,type:i.Configs.type,workItemModel:e.viewModel,okClick:function(){win.close()},cancelClick:function(){e.viewModel.set(i.Configs.enumName,s),win.close()}});kendo.bind(t,a);var n={PropertyName:i.Configs.enumName,PropertyDisplayName:"Status",EnumId:a.enumId};m(t.find("#statusPicker"),n,e.viewModel),e.viewModel[i.Configs.enumName].bind("change",function(e){e.sender.Id,a.set("okEnabled",!0)}),t.removeClass("hide"),t.show(),win.open()}}),u=_.template(t),p={Target:"changeStatus"};$.extend(!0,p,i),r(new kendo.View(u(p),{wrap:!1,model:c,init:function(e){}}).render());var m=function(e,t,a){n.build(a,t,function(t){e.html(t),app.controls.apply(e,{localize:!0,vm:a,bind:!0})})}}}}),define("text!forms/tasks/acknowledge/view.html",[],function(){return'<div id="AcknowledgeIncidentWindow" class="hide task-window cireson-window defined-form">\r\n    <div class="cireson-window--wrapper">\r\n        <div class="cireson-window--body">\r\n            <div class="inline-spacing">\r\n                <label><%= localization.AcknowledgementTime %> : <span data-bind="html:dateTimeNow"></span></label>\r\n                \r\n            </div>\r\n            <div class="inline-spacing">\r\n                <label><%= localization.AcknowledgementComment %></label>\r\n                <textarea data-bind="value: actionLogComment, events: {keyup:textCounter}"\r\n                          data-value-update="keyup"\r\n                          class="k-textbox" rows=5></textarea>\r\n            </div>\r\n            <div class="inline-spacing">\r\n                <span data-bind="html:charactersRemaining"></span>\r\n                <span><%= localization.CharactersRemaining %></span>\r\n            </div>\r\n            <div class="inline-spacing checkbox checkbox-inline">\r\n                <input id="IsPrivate" type="checkbox" data-bind="checked: isPrivate" />\r\n                <label for="IsPrivate" class="checkbox-label"><%= localization.IsPrivate %></label>\r\n            </div>\r\n\r\n        </div>\r\n        <div class="window-buttons cireson-window--footer">\r\n            <button class="btn btn-primary"\r\n                    data-role="button"\r\n                    data-bind="enabled: okEnabled, events: { click: okClick }">\r\n                <%= localization.OK %>\r\n            </button>\r\n            <button class="btn btn-default"\r\n                    data-role="button"\r\n                    data-bind="events: { click: cancelClick }">\r\n                <%= localization.Cancel %>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>'}),define("forms/tasks/acknowledge/controller",["require","text!forms/tasks/anchor/view.html","text!forms/tasks/acknowledge/view.html"],function(e){var t=e("text!forms/tasks/anchor/view.html"),a=e("text!forms/tasks/acknowledge/view.html");return{template:a,build:function(e,n,i){var r=_.template(a),o=new kendo.View(r(d),{wrap:!1});i(o.render());var s=kendo.observable({acknowledge:function(){var t=o.element;win=t.kendoCiresonWindow({title:localization.Acknowledge,actions:[]}).data("kendoWindow");var a=new kendo.observable({dateTimeNow:kendo.toString(new Date,"g"),dateTimeNowUTC:(new Date).toISOString(),actionLogComment:"",isPrivate:!1,charactersRemaining:"4000",textCounter:function(){var e=this.actionLogComment.length;e>4e3?this.actionLogComment.substring(0,4e3):this.set("charactersRemaining",4e3-e)},okClick:function(){if(null==e.viewModel.FirstResponseDate){e.viewModel.FirstResponseDate=this.dateTimeNowUTC;var t=$("input[name='FirstResponseDate']");"datePicker"==t.attr("data-control")?t.val(kendo.toString(new Date,"d")):"dateTimePicker"==t.attr("data-control")&&t.val(kendo.toString(new Date,"g"))}if(this.actionLogComment.length){var a={EnteredBy:session.user.Name,Title:localization.Analyst+" "+localization.Comment,IsPrivate:this.isPrivate,EnteredDate:(new Date).toISOString(),LastModified:(new Date).toISOString(),Description:this.actionLogComment,DescriptionDisplay:this.actionLogComment,Image:this.isPrivate?app.config.iconPath+app.config.icons.privateComment:app.config.iconPath+app.config.icons.comment,ActionType:"AnalystComment"};e.viewModel.ActionLog||(e.viewModel.ActionLog=[]);var n=app.controls.getWorkItemLogType(pageForm.viewModel);n&&pageForm.viewModel[n].push(a)}win.close()},cancelClick:function(){win.close()}});kendo.bind(t,a),t.removeClass("hide"),t.show(),win.open()}}),l=_.template(t),d={Target:"acknowledge"};$.extend(!0,d,n),i(new kendo.View(l(d),{wrap:!1,model:s,init:function(e){}}).render())}}}),define("forms/tasks/convertToParent/controller",["require","text!forms/tasks/anchor/view.html"],function(e){var t=e("text!forms/tasks/anchor/view.html");return{build:function(e,a,n){var i=_.template(t),r={Target:"convertToParent"};$.extend(!0,r,a);var o=kendo.observable({isParent:a.Configs.isParent,confirmTitle:a.Configs.confirmTitle,confirmMessage:a.Configs.confirmMessage,convertToParent:function(){$.when(kendo.ui.ExtYesNoDialog.show({title:this.confirmTitle,message:this.confirmMessage})).done(function(t){"yes"===t.button&&(e.viewModel.IsParent=a.Configs.isParent,e.viewModel.IsParent||null!=e.viewModel.ChildWorkItem&&delete e.viewModel.ChildWorkItem,e.save(function(t){switch(app.lib.message.add(localization.ChangesApplied,"success"),pageForm.type){case"ReleaseRecord":location.href="/ReleaseRecord/Edit/"+e.viewModel.Id+"/";break;default:location.href="/Incident/Edit/"+e.viewModel.Id+"/"}},s))})}});n(new kendo.View(i(r),{wrap:!1,model:o}).render());var s=function(e){e==localization.RequiredFieldsErrorMessage?app.lib.message.add(e,"danger"):app.lib.message.add(localization.PleaseCorrectErrors,"danger"),app.lib.message.show()}}}}),define("text!forms/tasks/linkToParent/view.html",[],function(){return'<div id="AssignParentWindow" class="cireson-window defined-form task-window hide">\r\n    <div class="cireson-window--wrapper">\r\n        <div class="cireson-window--body">\r\n            <div class="margin-b20">\r\n                <label><%= localization.SearchText %></label>\r\n                <span class="k-textbox k-space-right">\r\n                    <input type="text" data-bind="value: searchText" />\r\n                    <a data-bind="click: searchClick" href="javascript:void(0)" class="">\r\n                        <i class="fa fa-search"></i>\r\n                    </a>\r\n                </span>\r\n            </div>\r\n            <label><%= localization.SelectParent %></label>\r\n            <div data-role="grid"\r\n                 data-bind="source: dataSource, events: { change: gridChange }"\r\n                 data-selectable="true"\r\n                 data-sortable="true"\r\n                 data-filterable="true"\r\n                 data-scrollable="false"\r\n                 data-column-menu="true"\r\n                 data-pageable="true"\r\n                 data-columns=\'[\r\n                    { field: "Id", title: " <%= localization.Id %>", width: "50px", attributes: {"class": "grid-highlight-column"} },\r\n                    { field: "Title", title: " <%= localization.Title %>", width: "300px", attributes: {"class": "grid-highlight-column"} },\r\n                    { field: "Status", title: " <%= localization.Status %>", width: "100px" }\r\n                    ]\'>\r\n            </div>\r\n        </div>\r\n        <div class="window-buttons cireson-window--footer">\r\n            <button data-role="button"\r\n                    class="btn btn-primary"\r\n                    data-bind="enabled: okEnabled, events: { click: okClick }">\r\n                <%= localization.OK %>\r\n            </button>\r\n            <button data-role="button"\r\n                    class="btn btn-default"\r\n                    data-bind="events: { click: cancelClick }">\r\n                <%= localization.Cancel %>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>'}),define("text!forms/header/relationships/view.html",[],function(){return'<div class="parent-header-link" >\r\n    <label data-bind="text: view.controller.parentIncident"></label> :\r\n    <a data-bind="attr: { href: view.controller.editHref}, text: view.controller.editLink" target="_blank"></a>\r\n    <span class="fa fa-trash-o fa-lg cursor-pointer" data-bind="click: view.controller.unlinkParent"></span>\r\n</div>'}),define("forms/tasks/linkToParent/controller",["require","text!forms/tasks/anchor/view.html","text!forms/tasks/linkToParent/view.html","text!forms/header/relationships/view.html"],function(e){var t=e("text!forms/tasks/anchor/view.html"),a=e("text!forms/tasks/linkToParent/view.html");e("text!forms/header/relationships/view.html");return{template:a,build:function(e,n,i){var r=_.template(a),o=new kendo.View(r(d),{wrap:!1});i(o.render());var s=kendo.observable({linkToParent:function(){var t=o.element;win=t.kendoCiresonWindow({title:"d02dc3b6-d709-46f8-cb72-452fa5e082b8"==e.viewModel.ClassId?localization.LinktoNewParentIncident:localization.LinkToNewParentRecord,actions:[],activate:function(){a.refreshDataSource(),u()}}).data("kendoWindow");var a=new kendo.observable({searchText:"",searchClick:function(){var e=this.get("searchText");this.refreshDataSource(),this.dataSource.filter({logic:"or",filters:[{field:"Id",operator:"contains",value:e},{field:"Title",operator:"contains",value:e},{field:"Status.Name",operator:"contains",value:e}]})},okEnabled:!1,okClick:function(){this.selectedRow&&(null==e.viewModel.ParentWorkItem&&(e.viewModel.ParentWorkItem={}),
e.viewModel.ParentWorkItem.BaseId=this.selectedRow.BaseId,e.viewModel.ParentWorkItem.Id=this.selectedRow.Id,e.viewModel.ParentWorkItem.Title=this.selectedRow.Title,_.isUndefined(c.ActiveChildIncidentLinkStatus.Id)||e.viewModel.set("Status",{Id:c.ActiveChildIncidentLinkStatus.Id,Name:c.ActiveChildIncidentLinkStatus.Name}),e.view.buildParentHeaderView(function(t){parentView=new kendo.View(t,{wrapper:!1,model:e}),$("#parent-header-space").html(parentView.render()).show()}),this.dataSource.filter([]),win.close())},cancelClick:function(){this.dataSource.filter([]),win.close()},dataSource:new kendo.data.DataSource({transport:{read:{type:"GET",dataType:"json",url:"/Search/GetParentWorkItems",data:{workItemType:e.type},cache:!1}},schema:{model:{fields:{Id:{type:"string"},Title:{type:"string"},Status:{type:"string"},BaseId:{type:"string"}}}},pageSize:5}),selectedRow:null,gridChange:function(e){this.set("okEnabled",!0),this.set("selectedRow",e.sender.dataItem(e.sender.select()))},refreshDataSource:function(){this.dataSource.read()}});kendo.bind(t,a),t.removeClass("hide"),t.show(),win.open()}}),l=_.template(t),d={Target:"linkToParent"};$.extend(!0,d,n),i(new kendo.View(l(d),{wrap:!1,model:s,init:function(e){}}).render());var c,u=function(){$.get("/api/V3/Projection/GetParentWorkItemSettings",{},function(e){c=e})}}}}),define("text!forms/tasks/newStatus/view.html",[],function(){return'<div class="cireson-window defined-form hide">\r\n    <div class="cireson-window--wrapper">\r\n        <div class="cireson-window--body">\r\n            <div class="col-group">\r\n                <span data-bind="html: commentMessage"></span>\r\n            </div>\r\n            <div class="col-group">\r\n                <div class="editor-label">\r\n                    <label><%= localization.Comment %></label>\r\n                </div>\r\n                <div class="editor-field">\r\n                    <textarea data-bind="value: comment, events: {keyup:textCounter}"\r\n                              data-value-update="keyup"\r\n                              class="k-textbox"\r\n                              rows="6" />\r\n                    <div class="inline-spacing">\r\n                        <span data-bind="html:charactersRemaining"></span>\r\n                        <span><%= localization.CharactersRemaining %></span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="cireson-window--footer window-buttons">\r\n            <div id="changeStatusErrorWin" class="error"></div>\r\n            <button data-role="button"\r\n                    class="btn btn-primary"\r\n                    data-bind="enabled: okEnabled, events: { click: okClick }">\r\n                <%= localization.OK %>\r\n            </button>\r\n            <button data-role="button"\r\n                    class="btn btn-default"\r\n                    data-bind="events: { click: cancelClick }">\r\n                <%= localization.Cancel %>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("forms/tasks/newStatus/controller",["require","text!forms/tasks/anchor/view.html","text!forms/tasks/newStatus/view.html"],function(e){var t=e("text!forms/tasks/anchor/view.html"),a=e("text!forms/tasks/newStatus/view.html");return{template:a,build:function(e,n,i){var r=_.template(a),o=new kendo.View(r(l),{wrap:!1});i(o.render());var s=_.template(t),l={Target:"setNewStatus"};if($.extend(!0,l,n),_.isUndefined(n.Configs.otherBoundChanges))var d={};else var d=n.Configs.otherBoundChanges;var c=kendo.observable({setNewStatus:function(){"674e87e4-a58e-eab0-9a05-b48881de784c"===n.Configs.newStatusId||"1840bfdc-3589-88a5-cea9-67536fd95a3b"===n.Configs.newStatusId?v(o.element,n.Configs):$.when(kendo.ui.ExtYesNoDialog.show({title:n.Configs.confirmTitle,message:n.Configs.confirmMessage})).done(function(t){if("yes"===t.button){var a=app.controls.getWorkItemLogType(e.viewModel);if(e.viewModel.set("Status",{Id:n.Configs.newStatusId,Name:n.Configs.newStatusName}),e.viewModel.Status.Id==app.constants.workItemStatuses.Incident.Active&&(e.viewModel.set("ResolutionCategory",{Name:null,Id:null}),e.viewModel.set("ResolutionDescription",null),e.viewModel.set("ResolvedDate",null),a&&e.viewModel[a].unshift(new app.dataModels.AppliesToTroubleTicket.recordActivated)),$.each(d,function(t,a){e.viewModel.set(t,a)}),n.Configs.newStatusId==app.constants.workItemStatuses.Incident.Closed||n.Configs.newStatusId==app.constants.workItemStatuses.ServiceRequest.Closed)switch(e.viewModel.set("ClosedDate",(new Date).toISOString()),n.Configs.newStatusId){case app.constants.workItemStatuses.Incident.Closed:e.viewModel.RelatesToTroubleTicket_={BaseId:session.user.Id},e.viewModel[a].unshift(new app.dataModels.AppliesToTroubleTicket.recordClosed);break;case app.constants.workItemStatuses.ServiceRequest.Closed:e.viewModel.ClosedByUser={BaseId:session.user.Id}}"Incident"===e.type&&e.viewModel.IsParent&&"5e2d3932-ca6d-1515-7310-6f58584df73e"==e.viewModel.Status.Id?f():u()}else e.viewModel.set("Status",{Id:e.viewModel.Status.Id,Name:e.viewModel.Status.Name})})}});i(new kendo.View(s(l),{wrap:!1,model:c}).render());var u=function(){e.save(function(t){switch(app.lib.message.add(localization.ChangesApplied,"success"),e.type){case"ChangeRequest":location.href="/ChangeRequest/Edit/"+e.viewModel.Id+"/";break;case"ServiceRequest":location.href="/ServiceRequest/Edit/"+e.viewModel.Id+"/";break;case"Incident":location.href="/Incident/Edit/"+e.viewModel.Id+"/";break;case"ReleaseRecord":location.href="/ReleaseRecord/Edit/"+e.viewModel.Id+"/";break;case"Problem":location.href="/Problem/Edit/"+e.viewModel.Id+"/";break;default:location.href="/WorkItems/MyItems/"}},p)},p=function(e){e==localization.RequiredFieldsErrorMessage?app.lib.message.add(e,"danger"):app.lib.message.add(localization.PleaseCorrectErrors,"danger"),app.lib.message.show()},m=function(){$.each(e.viewModel.ChildWorkItem,function(e,t){t.set("Status",{Name:childIncidentSettings.ChildIncidentReactivatedStatus.Name,Id:childIncidentSettings.ChildIncidentReactivatedStatus.Id}),t.set("ResolutionCategory",{Name:null,Id:null}),t.set("ResolutionDescription",null),t.set("ResolvedDate",null)}),u()},f=function(){var e;$.get("/api/V3/Projection/GetParentWorkItemSettings",{},function(t){e=$.parseJSON(t),e.ReactivateLetAnalystDecide?$.when(kendo.ui.ExtYesNoDialog.show({title:localization.ReactivateChildIncidentTitle,message:localization.ReactivateChildIncidentMessage})).done(function(e){"yes"===e.button?m():u()}):e.ReactivateChildIncident?m():u()})},v=function(t,a){win=t.kendoCiresonWindow({title:localization.Comment,width:500,height:300,actions:[]}).data("kendoWindow");var n=new kendo.observable({comment:"",okEnabled:!1,charactersRemaining:"4000",textCounter:function(){var e=this.comment.length;e>4e3?this.comment.substring(0,4e3):this.set("charactersRemaining",4e3-e),e>0?this.set("okEnabled",!0):this.set("okEnabled",!1)},okClick:function(){e.viewModel.set("Status",{Id:a.newStatusId,Name:a.newStatusName});var t=_.isNull(e.viewModel.Notes)?this.comment:e.viewModel.Notes+"\r\n"+this.comment;e.viewModel.set("Notes",t),win.close(),u()},cancelClick:function(){win.close()},commentMessage:_.isUndefined(a.commentMessage)?localization.CancelledStatusCommentMessage:a.commentMessage});kendo.bind(t,n),t.removeClass("hide"),t.show(),win.open()}}}}),define("text!forms/tasks/sendEmail/mobile_view.html",[],function(){return'<div id="EmailNotificationWindow" class="cireson-window defined-form task-window hide">\n    <div class="cireson-window--wrapper">\n        <div class="cireson-window--body">\n            <div class="col-md-6 pad10">\n                <div class="editor-label">\n                    <label><%= localization.SendEmailTo %></label>\n                </div>\n                <div class="editor-field">\n                    <div class="k-autocomplete">\r\n                        <select id="userPickerTo"></select>\r\n                        <button id="toField" class="searchIcon btn-primary" data-bind="events:{click: openPopup}"><i class="fa fa-search"></i></button>\r\n                    </div>\n                </div>\n            </div>\n            <div class="col-md-6 pad10">\n                <div class="editor-label">\n                    <label><%= localization.SendEmailCC %></label>\n                </div>\n                <div class="editor-field">\n                    <div class="k-autocomplete">\r\n                        <select id="userPickerCc"></select>\r\n                        <button id="ccField" class="searchIcon btn-primary" data-bind="events:{click: openPopup}"><i class="fa fa-search"></i></button>\r\n                    </div>\n                </div>\n            </div>\n            <div class="col-md-12 pad10">\n                <div class="editor-label">\n                    <label><%= localization.Subject %></label>\n                </div>\n                <div class="editor-field">\n                    <input data-bind="value: emailSubject" class=" k-textbox" type="text">\n                </div>\n            </div>\n            \n            <div class="col-md-12 pad10">\n                <div class="editor-label">\n                    <label><%= localization.SendEmailTemplate %></label>\n                </div>\n                <div class="editor-field" id="templateDiv">\n                    <input data-role="combobox"\n                           data-placeholder="<%= localization.ChooseOne %>"\n                           data-value-primitive="true"\n                           data-text-field="Name"\n                           data-value-field="Id"\n                           data-filter="contains"\n                           data-bind="value: emailTemplateValue, source: emailTemplateDataSource, events:{change:emailTemplateChange }"/>\n                </div>\n            </div>\n\n            <div class="col-md-12 pad10">\r\n                <div id="mobileStatusPicker" />\r\n            </div>\n            <div class="col-md-12 pad10">\r\n                <div class="col-md-6 pad0">\r\n                    <label><%= localization.Message %></label>\r\n                </div>\r\n                <div class="col-md-6 pad0">\r\n                    <a href="#" data-bind="events: { click: resizeEditor }" role="button" title="Expand Editor" class="pull-right"><i class="fa fa-expand"></i></a>\r\n                </div>\r\n                <hr>\r\n                <div class="editor-field">\r\n                    <textarea id="messageEditor" class="form-editor hidden" data-bind="value: emailHTMLMessage" />\r\n                </div>\r\n            </div>\n            <div class="col-md-6 pad10">\n                <div id="statusPicker" />\n                <div class="checkbox">\n                    <input id="IsAddToLog" type="checkbox" data-bind="checked: addToLog, enabled: enableAddToLog" />\r\n                    <label for="IsAddToLog" class="control-label ">\n                        <%= localization.SendEmailAddToLog %>\n                    </label>\n                </div>\n                <div class="checkbox col-md-12 margin-l30" data-bind="visible: addToLog">\n                    <input id="setAsPrivate" type="checkbox" data-bind="checked: setAsPrivate" />\n                    <label for="setAsPrivate" class="control-label col-md-10">\n                        <%= localization.SetAsPrivate %>\n                        <i class="fa fa-info-circle info-icon text-primary" data-toggle="tooltip" title="<%= localization.SaveMessageAsPrivateTooltip %>"></i>\n                    </label>\n                </div>\n                <div data-bind="visible: showChangeStatus" class="checkbox">\n                    <input id="SetFirstResponseDate" type="checkbox" data-bind="checked: setFirstResponseDate, enabled:enableFirstResponseDate" />\n                    <label for="SetFirstResponseDate" class="control-label"><%= localization.SetFirstResponseDate %></label>\n                </div>\n            </div>\n            <div class="col-md-6 pad10">\n                <label><%= localization.SendEmailAttachment %></label>\n                <div class="form-group">\r\n                    <div class="drop-zone-element">\r\n                        <div class="text-wrapper">\r\n                            <span class="drag-image-text">\n                                <a class="browse-file"><b><%= localization.Browse %></b></a>\n                                <span data-bind="visible: filesCount > 0"><span class="lowercase"> <%= localization.Or %> </span><a data-bind="events: { click: viewWorkItemFiles }"><b><%= localization.BrowseWorkItemFiles %></b></a></span>\r\n                            </span>\r\n                            <div style="display:none"><input name="files" id="email-attachment" type="file" /></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\n                <div>\r\n                    <div class="fileattachment-list"></div>\r\n                    <div class="fileattachment-img-modal"></div>\r\n                    <script type="text/x-kendo-template" id="fileTemplate">\r\n                        <div class="thumbnail-file">\r\n                            <div class="cursor-pointer thumbnail-img">\r\n                                # if (DisplayName.toLowerCase().match(/\\.(jpg|jpeg|png|gif)$/)) { #\r\n                                <img src="data:image/png;base64,#= Content.data #" onerror="this.onerror = null; this.src = \'/Content/Images/Icons/FileUpload/document.svg\';" alt="#: DisplayName # image" />\r\n                                # } else{ #\r\n                                <img class="default-icon" src="/Content/Images/Icons/FileUpload/document.svg" onerror="this.onerror = null; this.src = \'/Content/Images/Icons/FileUpload/document.svg\'">\r\n                                # } #\r\n                            </div>\r\n                            <div class="thumbnail-caption">\r\n                                <span>#: DisplayName #</span>\r\n                                \x3c!--<div class="overlay transparent">\r\n                                    <span class="pull-right">\r\n                                        <a class="k-delete-button" href="\\\\#" title="<%= localization.Remove %>"><i class="fa fa-trash"></i></a>\r\n                                    </span>\r\n                                </div>--\x3e\r\n                                <div class="overlay">\r\n                                    # if (DisplayName.match(/\\.(jpg|jpeg|png|gif)$/)) { #\r\n                                    <span class="label">\r\n                                        <a class="icon custom-click view" view-image title="View Image">\r\n                                            <i class="fa fa-eye"></i>\r\n                                        </a>\r\n                                    </span>\r\n                                    <span class="label">\r\n                                        <a class="icon custom-click opennewtab" title="Open in New Tab">\r\n                                            <i class="fa fa-external-link"></i>\r\n                                        </a>\r\n                                    </span>\r\n                                    # } #\r\n                                    # if (BaseId!=null) { #\r\n                                    <span class="label">\r\n                                        <a class="icon custom-click download" title="Download">\r\n                                            <i class="fa fa-download"></i>\r\n                                        </a>\r\n                                    </span>\r\n                                    # } #\r\n                                    <span class="label">\r\n                                        <a class="k-delete-button icon" href="\\\\#" title="<%= localization.Remove %>"><i class="fa fa-trash"></i></a>\r\n                                    </span>\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                    <\/script>\r\n                </div>\n                \x3c!--<input data-bind="value: emailAttachment" class="k-textbox" type="text" readonly="readonly">\n                <span data-bind="text: attachmentErrorMessage" class="send-email-attachment-error"></span>\n                <div>\n                    <input type="file" name="files" id="fileUploader" />\n                    <div class="k-widget k-upload">\n                        <input type="button" value="<%= localization.Remove %>" class="k-button" />\n                    </div>\n                </div>--\x3e\n            </div>\n        </div>\n        <div class="window-buttons cireson-window--footer">\n            <button id="emailOk" data-role="button"\n                    class="btn btn-primary"\n                    data-bind="enabled: okEnabled, events: { click: okClick }">\n                <%= localization.OK %>\n            </button>\n            <button data-role="button"\n                    class="btn btn-default"\n                    data-bind="events: { click: cancelClick }">\n                <%= localization.Cancel %>\n            </button>\n        </div>\n    </div>\n</div>'}),define("text!forms/tasks/sendEmail/view.html",[],function(){return'<div id="EmailNotificationWindow" tabindex="-1" role="dialog" class="modal right fade">\n    <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n            <div class="modal-header">\n                 <h4 class="modal-title"><%= localization.SendEmail %></h4>\n            </div> \n            <div class="modal-body">\n                <div class="row">\n                    <div class="col-md-6 pad10">\n                        <div class="editor-label">\n                            <label><%= localization.SendEmailTo %></label>\n                        </div>\n                        <div class="editor-field">\n                            <div class="k-autocomplete">\r\n                                <select id="userPickerTo"></select>\r\n                                <button id="toField" class="searchIcon btn-primary" data-bind="events:{click: openPopup}"><i class="fa fa-search"></i></button>\r\n                            </div>\n                        </div>\n                    </div>\n                    <div class="col-md-6 pad10">\r\n                        <div class="editor-label">\n                            <label><%= localization.SendEmailCC %></label>\n                        </div>\n                        <div class="editor-field">\n                            <div class="k-autocomplete">\n                                <select id="userPickerCc"></select>\n                                <button id="ccField" class="searchIcon btn-primary" data-bind="events:{click: openPopup}"><i class="fa fa-search"></i></button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <div class="row">\r\n                    <div class="col-md-6 pad10">\r\n                        <div class="editor-label">\r\n                            <label><%= localization.Subject %></label>\r\n                        </div>\r\n                        <div class="editor-field">\r\n                            <input data-bind="value: emailSubject" class="k-textbox" type="text">\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-md-6 pad10">\r\n                        <div class="editor-label">\r\n                            <label><%= localization.SendEmailTemplate %></label>\r\n                        </div>\r\n                        <div class="editor-field" id="templateDiv">\r\n                            <input data-role="combobox"\r\n                                   data-placeholder="<%= localization.ChooseOne %>"\r\n                                   data-value-primitive="true"\r\n                                   data-text-field="Name"\r\n                                   data-value-field="Id"\r\n                                   data-filter="contains"\r\n                                   data-bind="value: emailTemplateValue, source: emailTemplateDataSource, events:{change:emailTemplateChange }" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="row">\r\n                    <div class="col-md-12 pad10">\r\n                        <div class="col-md-6 pad0">\r\n                            <label><%= localization.Message %></label>\r\n                        </div>\r\n                        <div class="col-md-6 pad0">\r\n                            <a href="#" data-bind="events: { click: resizeEditor }" role="button" title="Expand Editor" class="pull-right"><i class="fa fa-expand"></i></a>\r\n                        </div>\r\n                        <hr>\r\n                        <div class="editor-field">\r\n                            <textarea id="messageEditor" class="form-editor hidden" data-bind="value: emailHTMLMessage" />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="row">\r\n                    <div class="col-md-6 pad10">\r\n                        <div id="statusPicker" />\r\n                        <div class="checkbox">\r\n                            <input id="IsAddToLog" type="checkbox" data-bind="checked: addToLog, enabled: enableAddToLog" />\r\n                            <label for="IsAddToLog" class="control-label ">\r\n                                <%= localization.SendEmailAddToLog %>\r\n                            </label>\r\n                        </div>\r\n                        <div class="checkbox col-md-12 margin-l30" data-bind="visible: addToLog">\r\n                            <input id="setAsPrivate" type="checkbox" data-bind="checked: setAsPrivate" />\r\n                            <label for="setAsPrivate" class="control-label col-md-10">\r\n                                <%= localization.SetAsPrivate %>\r\n                                <i class="fa fa-info-circle info-icon text-primary" data-toggle="tooltip" title="<%= localization.SaveMessageAsPrivateTooltip %>"></i>\r\n                            </label>\r\n                        </div>\r\n                        <div data-bind="visible: showChangeStatus" class="checkbox ">\r\n                            <input id="SetFirstResponseDate" type="checkbox" data-bind="checked: setFirstResponseDate, enabled:enableFirstResponseDate" />\r\n                            <label for="SetFirstResponseDate" class="control-label"><%= localization.SetFirstResponseDate %></label>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="col-md-6 pad10">\r\n                        <label><%= localization.SendEmailAttachment %></label>\r\n                        <div class="form-group">\r\n                            <div class="drop-zone-element">\r\n                                <div class="text-wrapper">\r\n                                    <span class="drag-image-text">\r\n                                        <img src="/Content/Images/Icons/FileUpload/upload_to_cloud.svg" />\r\n                                        <b><%= localization.DragAndDrop %> </b> <%= localization.YourFilesOr %>\r\n                                        <a class="browse-file"><b><%= localization.Browse %></b></a>\r\n                                        <span data-bind="visible: filesCount > 0">\r\n                                            <span class="lowercase">  <%= localization.Or %>  </span>\r\n                                            <a data-bind="events: { click: viewWorkItemFiles }"><b><%= localization.BrowseWorkItemFiles %></b></a>\r\n                                        </span>\r\n                                    </span>\r\n                                    <div style="display:none"><input name="files" id="email-attachment" type="file" /></div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div>\r\n                            <div class="fileattachment-list"></div>\r\n                            <div class="fileattachment-img-modal"></div>\r\n                        </div>\r\n                        <script type="text/x-kendo-template" id="fileTemplate">\r\n                            <div class="thumbnail-file">\r\n                                <div class="cursor-pointer thumbnail-img">\r\n                                    # if (DisplayName.toLowerCase().match(/\\.(jpg|jpeg|png|gif)$/)) { #\r\n                                    <img src="data:image/png;base64,#= Content.data #" onerror="this.onerror = null; this.src = \'/Content/Images/Icons/FileUpload/document.svg\';" alt="#: DisplayName # image" />\r\n                                    # } else{ #\r\n                                    <img class="default-icon" src="/Content/Images/Icons/FileUpload/document.svg" onerror="this.onerror = null; this.src = \'/Content/Images/Icons/FileUpload/document.svg\'">\r\n                                    # } #\r\n                                </div>\r\n\r\n                                <div class="thumbnail-caption">\r\n                                    <span>#: DisplayName #</span>\r\n                                    \x3c!--<div class="overlay transparent">\r\n                            <span class="pull-right">\r\n                                <a class="k-delete-button" href="\\\\#" title="<%= localization.Remove %>"><i class="fa fa-trash"></i></a>\r\n                            </span>\r\n                        </div>--\x3e\r\n                                    <div class="overlay">\r\n                                        # if (DisplayName.toLowerCase().match(/\\.(jpg|jpeg|png|gif)$/)) { #\r\n                                        <span class="label">\r\n                                            <a class="icon custom-click view" view-image title="View Image">\r\n                                                <i class="fa fa-eye"></i>\r\n                                            </a>\r\n                                        </span>\r\n                                        <span class="label">\r\n                                            <a class="icon custom-click opennewtab" title="Open in New Tab">\r\n                                                <i class="fa fa-external-link"></i>\r\n                                            </a>\r\n                                        </span>\r\n                                        # } #\r\n                                        # if (BaseId!=null) { #\r\n                                        <span class="label">\r\n                                            <a class="icon custom-click download" title="Download">\r\n                                                <i class="fa fa-download"></i>\r\n                                            </a>\r\n                                        </span>\r\n                                        # } #\r\n                                        <span class="label">\r\n                                            <a class="k-delete-button icon" href="\\\\#" title="<%= localization.Remove %>"><i class="fa fa-trash"></i></a>\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </div>\r\n                        <\/script>\r\n                    </div>\r\n                </div> \n            </div>\n\n            <div class="modal-footer">\r\n            <button id="emailOk" data-role="button"\n                    class="btn btn-primary"\n                    data-bind="enabled: okEnabled, events: { click: okClick }">\n                <%= localization.OK %>\n            </button>\n            <button data-role="button"\n                    class="btn btn-default"\n                    data-bind="events: { click: cancelClick }">\n                <%= localization.Cancel %>\n            </button>\n        </div>\n    </div>\n</div>\r\n\r\n\r\n    \r\n</div>'}),define("text!forms/popups/userPickerPopup/view.html",[],function(){return'<div id="UserPickerPopupWindow" class="cireson-window defined-form task-window">\r\n    <div class="cireson-window--wrapper">\r\n        <div class="cireson-window--body">\r\n            <div class="row">\r\n                <div class="col-md-6">\r\n                    <div class="form-group popup-search-box">\r\n                        <input type="text" data-value-update="keyup" placeholder="<%= localization.SearchText %>" data-bind="value: searchValue, events: { keypress: searchOnEnter }" class="search-input">\r\n                        <span data-bind="events:{click: search}" class="search-icon">\r\n                            <i class="fa fa-search"></i>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div data-bind="visible: isDesktopView">\r\n                <div data-control-grid="userPickerGrid"></div>\r\n\r\n            </div>\r\n\r\n            <div class="row" data-bind="visible: isMobileView">\r\n                <div class="col-md-4">\r\n                    <div data-role="listview"\r\n                         data-bind="source: userDataSource, events:{change: onListViewChanged}"\r\n                         data-template="user-grid-mobile-template"\r\n                         data-selectable="true"\r\n                         class="user-listBox"></div>\r\n                    <div data-role="pager"\r\n                         data-bind="source: userDataSource"\r\n                         data-numeric="false"></div>\r\n                    <script type="text/x-kendo-template" id="user-grid-mobile-template">\r\n                        <div class="user-info">\r\n                            <dl>\r\n                                <dt>#: FirstName # #: LastName #</dt>\r\n                                <dd>#: UserName # &middot; #: Title #</dd>\r\n                                <dd>#: Domain # &middot; #: Company #</dd>\r\n                            </dl>\r\n                        </div>\r\n\r\n                    <\/script>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="cireson-window--footer window-buttons objectPicker-single-grid">\r\n            <button data-role="button"\r\n                    class="btn btn-primary"\r\n                    data-bind="events: { click: save }">\r\n                <%= localization.OK %>\r\n            </button>\r\n            <button data-role="button"\r\n                    class="btn btn-default"\r\n                    data-bind="events: { click: cancel }">\r\n                <%= localization.Cancel %>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n\r\n'});var __userPickerPopupSingleton;define("forms/popups/userPickerPopup/controller",["require","text!forms/popups/userPickerPopup/view.html"],function(e){var t=e("text!forms/popups/userPickerPopup/view.html"),a=function(e,t){var a=this;this.serverNameProp=e,this.serverIdProp=t;var n={};n[a.serverNameProp],n[a.serverIdProp],this.set={name:function(e){n[a.serverNameProp]=e},id:function(e){n[a.serverIdProp]=e}},this.setObj=function(e,t){a.set.name(e),a.set.id(t)},this.setFromObj=function(e){a.setObj(e[a.serverNameProp],e[a.serverIdProp])},this.get={name:function(){return n[a.serverNameProp]},id:function(){return n[a.serverIdProp]}},this.getFromObj=function(e){return a.setFromObj(e),n},this.getObj=function(e,t){return void 0!==e&&void 0!==t&&a.setObj(e,t),n},
this.getGenericFromObj=function(e){return this.setFromObj(e),{name:a.get.name(),id:a.get.id()}}},n=function(e,t){var n,i,r,o=this,s=e,l=e.find("[data-control-grid]"),d=t?"/User/GetUserSearchResults?groupsOnly=true":"/User/GetUserSearchResults",c=new a("Name","Id");this.setSaveCallback=function(e){$(o).unbind("save").bind("save",function(t,a){e(a)})},this.setCancelCallback=function(e){$(o).unbind("cancel").bind("cancel",function(t,a){e(a)})};var u=function(){},p=function(){n.search(r.searchValue)},m=function(e){if(app.isMobileDevice()){if(!_.isNull(r.selectedUser)){var t=c.getGenericFromObj(r.selectedUser);$(o).trigger("save",t),g()}}else{var a=n.kendoGrid.select();if(a){var i=c.getGenericFromObj(n.kendoGrid.dataItem(a));$(o).trigger("save",i),g()}}},f=function(){$(o).trigger("cancel"),g()},v=function(){o.vm.set("searchValue",""),n.kendoDataSource.data([]),i.kendoWindow.open()},g=function(){i.kendoWindow.close()},b=function(){i=new w(t)},h=function(){n=new y({html:l,url:d})},w=function(e){var t,a=this,n=function(){t=s.kendoCiresonWindow({title:e?localization.SelectGroup:localization.SelectUser,content:null,width:680,height:420,actions:["Close"]}).data("kendoWindow")};!function(){n(),a.kendoWindow=t}()},y=function(e){var t,a,n,i=this,o=e.html,s=e.url,l=function(){t.bind("dataBound",function(e){t.pager.element.show()}),t.element.on("dblclick","tbody>tr",d)},d=function(){t.select($(this)),m()},c=function(e){n=e,a.read(),a.page(1),r.set("userDataSource",a)},u=function(){a=new kendo.data.DataSource({transport:{prefix:"",read:{url:s,data:function(){return{userFilter:function(){return n},filterByAnalyst:r.filterByAnalyst}},type:"GET"}},pageSize:app.isMobileDevice?3:15,serverPaging:!0,serverSorting:!0,serverFiltering:!0,serverGrouping:!0,total:0,type:"aspnetmvc-ajax",schema:{data:"Data",total:"Total",errors:"Errors",model:{fields:{Id:{type:"string"},Name:{type:"string"},PrincipalName:{type:"string"},UserName:{type:"string"},Domain:{type:"string"},Company:{type:"string"},Title:{type:"string"},FirstName:{type:"string"},LastName:{type:"string"},EmployeeId:{type:"string"},Analyst:{type:"number"}}}}})},p=function(){t=o.kendoGrid({height:200,dataSource:a,selectable:"Single,Row",sortable:{mode:"multiple"},pageable:!0,filterable:{extra:!1,operators:{string:{startswith:localization.Startswith,contains:localization.Contains,eq:localization.Isequalto,neq:localization.Isnotequalto}}},autoBind:!1,columns:[{title:localization.id,hidden:!0,field:"Id",filterable:{},encoded:!0},{title:localization.FirstName,attributes:{class:"grid-highlight-column"},width:"110px",field:"FirstName",filterable:{},encoded:!0},{title:localization.LastName,attributes:{class:"grid-highlight-column"},width:"110px",field:"LastName",filterable:{},encoded:!0},{title:localization.Title,field:"Title",filterable:{},encoded:!0},{title:localization.UserName,field:"UserName",filterable:{},encoded:!0},{title:localization.Domain,field:"Domain",filterable:{},encoded:!0},{title:localization.Company,field:"Company",filterable:{},encoded:!0}]}).data("kendoGrid")};!function(){u(),p(),t.pager.element.hide(),l(),i.kendoGrid=t,i.kendoDataSource=a,i.search=c}()};!function(){r=kendo.observable({searchText:localization.SearchText,selectUserText:t?localization.SelectGroup:localization.SelectUser,searchValue:"",search:p,searchOnEnter:function(e){13==e.which&&(e.preventDefault(),p())},save:m,cancel:f,userDataSource:new kendo.data.DataSource,onListViewChanged:function(e){var t=e.sender.select().index(),a=e.sender.dataSource.view()[t];this.set("selectedUser",a)},selectedUser:null,isDesktopView:!app.isMobileDevice(),isMobileView:app.isMobileDevice()}),kendo.bind(s,r),b(),h(),u(),o.open=v,o.close=g,o.vm=r}()};return{template:t,getPopup:function(e){if(__userPickerPopupSingleton)return __userPickerPopupSingleton;var a=_.template(t),i=$(a());return $("body").append(i),__userPickerPopupSingleton=new n(i,e)}}}),define("text!forms/flyout/fileAttachmentsFlyout/mobile_view.html",[],function(){return'<div class="cireson-window defined-form task-window hide">\r\n    <div class="cireson-window--wrapper">\r\n        <div class="cireson-window--body">\r\n            <div>\r\n                <div class="fileattachment-list"></div>\r\n                <div class="fileattachment-img-modal"></div>\r\n            </div>\r\n\r\n            <script type="text/x-kendo-template" id="filesTemplate">\r\n                <div class="thumbnail-file">\r\n                    <div class="cursor-pointer thumbnail-img">\r\n                        # if (DisplayName.toLowerCase().match(/\\.(jpg|jpeg|png|gif)$/)) { #\r\n                        <img src="data:image/png;base64,#= Content.data #" onerror="this.onerror = null; this.src = \'/Content/Images/Icons/FileUpload/document.svg\';" alt="#: DisplayName # image" />\r\n                        # } else{ #\r\n                        <img class="default-icon" src="/Content/Images/Icons/FileUpload/document.svg" onerror="this.onerror = null; this.src = \'/Content/Images/Icons/FileUpload/document.svg\'">\r\n                        # } #\r\n                    </div>\r\n                    <div class="thumbnail-caption">\r\n                        <span>#: DisplayName #</span>\r\n                        <div class="overlay">\r\n                            # if (DisplayName.toLowerCase().match(/\\.(jpg|jpeg|png|gif)$/)) { #\r\n                            <span class="label">\r\n                                <a class="icon custom-click" title="View Image" action="view">\r\n                                    <i class="fa fa-eye"></i>\r\n                                </a>\r\n                            </span>\r\n                            <span class="label">\r\n                                <a class="icon custom-click" title="Open in New Tab" action="opennewtab">\r\n                                    <i class="fa fa-external-link"></i>\r\n                                </a>\r\n                            </span>\r\n                            # } #\r\n                            <span class="label">\r\n                                <a class="icon custom-click" title="Download" action="download">\r\n                                    <i class="fa fa-download"></i>\r\n                                </a>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            <\/script>\r\n            <script>\r\n                function selectFile(el, action) {\r\n                    //var listView = $(".fileattachment-list").data("kendoListView");\r\n                    //var item = $(el).closest("[role=\'option\']");\r\n                    //var dataItem = listView.dataSource.getByUid(item.data("uid"));\r\n\r\n                    //if (action === "download") {\r\n                    //    var downloadUrl = app.config.rootURL + "FileAttachment/ViewFile/";\r\n                    //    location.href = downloadUrl + dataItem.BaseId;\r\n                    //} else if (action === "opennewtab") {\r\n                    //    var win = window.open(\'about:blank\');\r\n                    //    setTimeout(function () { //FireFox seems to require a setTimeout for this to work.\r\n                    //        win.document.body.appendChild(win.document.createElement(\'img\')).src = el.closest(".thumbnail-file").find(".thumbnail-img img")[0].src;\r\n                    //        win.href = el.closest(".thumbnail-file").find(".thumbnail-img img")[0].src;\r\n                    //        win.focus();\r\n                    //    }, 0);\r\n\r\n\r\n                    //} else {\r\n                    //    var dialog = $(\'.fileattachment-img-modal\');\r\n                    //    dialog.kendoDialog({\r\n                    //        modal: true,\r\n                    //        title: dataItem.DisplayName,\r\n                    //        content: "<div class=\'file-img-container\'><img src=\\"data:image/png;base64," + dataItem.Content.data + "\\" onerror=\\"this.onerror = null; this.src = \'/Content/Images/Icons/FileUpload/document.svg\';\\" alt=\\"" + dataItem.DisplayName + "\\" /></div>",\r\n                    //        animation: {\r\n                    //            open: {\r\n                    //                effects: "fade:in"\r\n                    //            }\r\n                    //        }\r\n                    //    });\r\n                    //    $(\'.k-window.k-widget\').addClass(\'acivity-popup-window\');\r\n                    //    dialog.data("kendoDialog").open();\r\n                    //}\r\n                }\r\n\r\n            <\/script>\r\n        </div>\r\n        <div class="window-buttons cireson-window--footer">\r\n            <button data-role="button"\r\n                    class="btn btn-primary"\r\n                    data-bind="events: { click: save }, visible: saveCancelBtn">\r\n                <%= localization.OK %>\r\n            </button>\r\n            <button data-role="button"\r\n                    class="btn btn-default"\r\n                    data-bind="events: { click: cancel }, visible: saveCancelBtn">\r\n                <%= localization.Cancel %>\r\n            </button>\r\n            <button data-role="button"\r\n                    class="btn btn-default"\r\n                    data-bind="events: { click: cancel}, visible: closeBtn ">\r\n                <%= localization.Close %>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>'}),define("text!forms/flyout/fileAttachmentsFlyout/view.html",[],function(){return'<div tabindex="-1" role="dialog" class="modal right fade">\r\n    <div class="modal-dialog">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h4 class="modal-title"><%= localization.FileAttachments %></h4>\r\n            </div>\r\n            <div class="modal-body">\r\n                <div>\r\n                    <div class="fileattachment-list"></div>\r\n                    <div class="fileattachment-img-modal"></div>\r\n                </div>\r\n\r\n                <script type="text/x-kendo-template" id="filesTemplate">\r\n                    <div class="thumbnail-file">\r\n                        <div class="cursor-pointer thumbnail-img">\r\n                            # if (DisplayName.toLowerCase().match(/\\.(jpg|jpeg|png|gif)$/)) { #\r\n                            <img src="data:image/png;base64,#= Content.data #" onerror="this.onerror = null; this.src = \'/Content/Images/Icons/FileUpload/document.svg\';" alt="#: DisplayName # image" />\r\n                            # } else{ #\r\n                            <img class="default-icon" src="/Content/Images/Icons/FileUpload/document.svg" action="download" onerror="    this.onerror = null; this.src = \'/Content/Images/Icons/FileUpload/document.svg\'">\r\n                            # } #\r\n                        </div>\r\n                        <div class="thumbnail-caption">\r\n                            <span>#: DisplayName #</span>\r\n                            <div class="overlay">\r\n                                # if (DisplayName.toLowerCase().match(/\\.(jpg|jpeg|png|gif)$/)) { #\r\n                                <span class="label">\r\n                                    <a class="icon custom-click" view-image action="view" title="View Image">\r\n                                        <i class="fa fa-eye"></i>\r\n                                    </a>\r\n                                </span>\r\n                                <span class="label">\r\n                                    <a class="icon custom-click" title="Open in New Tab" action="opennewtab">\r\n                                        <i class="fa fa-external-link"></i>\r\n                                    </a>\r\n                                </span>\r\n                                # } #\r\n                                # if (BaseId!=null) { #\r\n                                <span class="label">\r\n                                    <a class="icon custom-click" title="Download" action="download">\r\n                                        <i class="fa fa-download"></i>\r\n                                    </a>\r\n                                </span>\r\n                                # } #\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                <\/script>\r\n                \r\n            </div>\r\n            <div class="modal-footer">\r\n                <button data-role="button"\r\n                        class="btn btn-primary"\r\n                        data-bind="events: { click: save }, visible: saveCancelBtn">\r\n                    <%= localization.OK %>\r\n                </button>\r\n                <button data-role="button"\r\n                        class="btn btn-default"\r\n                        data-bind="events: { click: cancel }, visible: saveCancelBtn">\r\n                    <%= localization.Cancel %>\r\n                </button>\r\n                <button data-role="button"\r\n                        class="btn btn-default"\r\n                        data-bind="events: { click: cancel}, visible: closeBtn ">\r\n                    <%= localization.Close %>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n\r\n</div>'});var __fileAttachmentsPopupSingleton;define("forms/flyout/fileAttachmentsFlyout/controller",["require","text!forms/flyout/fileAttachmentsFlyout/mobile_view.html","text!forms/flyout/fileAttachmentsFlyout/view.html"],function(e){var t=e(app.isMobile()?"text!forms/flyout/fileAttachmentsFlyout/mobile_view.html":"text!forms/flyout/fileAttachmentsFlyout/view.html"),a=function(e,t,a){var n,i,r=this,o=t;this.setSaveCallback=function(e){$(r).unbind("save").bind("save",function(t,a){e(a)})},this.setCancelCallback=function(e){$(r).unbind("cancel").bind("cancel",function(t,a){e(a)})};!function(){app.isMobile()&&(i=o.kendoCiresonWindow({title:localization.FileAttachments,width:650,height:740,actions:[]}).data("kendoWindow")),n=kendo.observable({save:function(){$(r).trigger("save",{selectedFiles:n.selectedFiles}),n.closeModal()},cancel:function(){$(r).trigger("cancel"),n.closeModal()},isDesktopView:!app.isMobileDevice(),isMobileView:app.isMobileDevice(),selectedFiles:[],onOpenFile:function(e){var t=this.dataSource.view();n.selectedFiles=$.map(this.select(),function(e){return t[$(e).index()]})},saveCancelBtn:a,closeBtn:!a,openModal:function(){app.isMobile()?(o.removeClass("hide"),o.show(),i.open()):o.modal("show")},closeModal:function(){app.isMobile()?i.close():o.modal("hide")},selectFile:function(e,t){var n=o.find(".fileattachment-list").data("kendoListView"),i=e.closest("[role='option']"),r=n.dataSource.getByUid(i.data("uid"));if(!t||"sendEmail"!=a)if(action=e.attr("action"),"download"===action){var s=app.config.rootURL+"FileAttachment/ViewFile/";location.href=s+r.BaseId}else if("opennewtab"===action){var l=window.open("about:blank");setTimeout(function(){l.document.body.appendChild(l.document.createElement("img")).src=e.closest(".thumbnail-file").find(".thumbnail-img img")[0].src,l.href=e.closest(".thumbnail-file").find(".thumbnail-img img")[0].src,l.focus()},0)}else{var d=$(".fileattachment-img-modal");if(d.length>1)for(var c=1;c<d.length;c++)$(d[c]).data("kendoDialog")&&$(d[c]).data("kendoDialog").destroy(),d.eq(c).remove();if(r){var u=$(".acivity-popup-window");if(u.length>1)for(var c=1;c<u.length;c++)u.eq(c).remove();d.kendoDialog({modal:!0,title:r.DisplayName,content:"<div class='file-img-container'><img src=\"data:image/png;base64,"+r.Content.data+'" onerror="this.onerror = null; this.src = \'/Content/Images/Icons/FileUpload/document.svg\';" alt="'+r.DisplayName+'" /></div>',animation:{open:{effects:"fade:in"}}}),$(".k-window.k-widget").addClass("acivity-popup-window"),d.data("kendoDialog").open(),$(".k-overlay").on("click",function(){d.data("kendoDialog").close()})}}}}),kendo.bind(o,n),app.isMobile()||(o.on("shown.bs.modal",function(){$(".modal-backdrop").each(function(e,t){o.before(t)}),$(document).off("focusin.modal")}),o.on("hidden.bs.modal",function(){$(".modal-backdrop").remove()})),r.open=n.openModal,r.close=n.closeModal,r.vm=n,o.find(".fileattachment-list").kendoListView({dataSource:e.viewModel.FileAttachment,template:kendo.template($("#filesTemplate").html()),selectable:a?"multiple":"single",change:n.onOpenFile,dataBound:function(){void 0==a&&"sendEmail"!=a&&o.find("a[view-image]").parent().hide(),o.find(".custom-click").on("click",function(){n.selectFile($(this),!1)}),app.isMobile()||o.find(".thumbnail-img img").on("click",function(){n.selectFile($(this),!0)})}})}()};return{template:t,getPopup:function(e,n){var i=_.template(t),r=$(i());return $("body").append(r),__fileAttachmentsPopupSingleton=new a(e,r,n)}}}),define("forms/tasks/sendEmail/controller",["require","text!forms/tasks/anchor/view.html","text!forms/tasks/sendEmail/mobile_view.html","text!forms/tasks/sendEmail/view.html","forms/popups/userPickerPopup/controller","forms/flyout/fileAttachmentsFlyout/controller","forms/fields/enum/controller"],function(e){var t=e("text!forms/tasks/anchor/view.html"),a=e(app.isMobile()?"text!forms/tasks/sendEmail/mobile_view.html":"text!forms/tasks/sendEmail/view.html"),n=e("forms/popups/userPickerPopup/controller"),i=e("forms/flyout/fileAttachmentsFlyout/controller"),r=e("forms/fields/enum/controller");return{template:a,build:function(e,o,s){var l=_.template(a),d=new kendo.View(l(m),{wrap:!1}),c={};_.isUndefined(e.viewModel.FileAttachment)&&e.viewModel.set("FileAttachment",[]),s(d.render()),d.destroy();var u=kendo.observable({sendEmail:function(){var t=d.element;app.isMobile()&&(win=t.kendoCiresonWindow({title:localization.SendEmail,width:650,height:740,actions:[],activate:function(){b(a),h(a)}}).data("kendoWindow"));var a=new kendo.observable({emailTo:"",emailCC:"",emailSubject:"["+e.viewModel.Id+"] "+e.viewModel.Title,emailHTMLMessage:session.emailBodyTemplate.length>0?$("<div/>").html(session.emailBodyTemplate).text():"",emailTextMessage:"",emailAttachment:"",emailTemplateDataSource:f,emailTemplateValue:"",attachmentErrorMessage:"",addToLog:"true"===session.addToActionLogDefault||"true"===session.forceAddToActionLog,enableAddToLog:"true"!==session.forceAddToActionLog,okEnabled:!0,setAsPrivate:"true"===session.saveMessageAsPrivate,okClick:function(e){var n=_.without(a.recipientToList,_.findWhere(a.recipientToList,{Email:""}));n=_.pluck(n,"Email"),a.set("emailTo",n.join(";"));var i=_.without(a.recipientCCList,_.findWhere(a.recipientCCList,{Email:""}));i=_.pluck(i,"Email"),a.set("emailCC",i.join(";"));var r=_.union(n,i);if(n.length<=0)return void kendo.ui.ExtAlertDialog.show({title:localization.InvalidEmailAddress,message:localization.PleaseProvideEmailAddress});var o=w(r);if(null!=o)return void kendo.ui.ExtAlertDialog.show({title:localization.InvalidEmailAddress,message:localization.InvalidEmailAddressMessage.replace("{0}",o)});if(this.addToLog){var s=t.find("#messageEditor").data("kendoEditor");this.set("emailTextMessage",s.body.innerText||s.body.textContent);if((this.emailTextMessage&&_.isString(this.emailTextMessage)?this.emailTextMessage.trim():"").length<=0)return void kendo.ui.ExtAlertDialog.show({title:localization.MessageRequired,message:localization.MessageRequiredWhenAddingLogEntry})}kendo.ui.progress(t,!0),I(this,t)},cancelClick:function(e){app.isMobile()?win.close():$.when(kendo.ui.ExtOkCancelDialog.show({title:localization.Warning,message:localization.UnsavedDataMessage,icon:"fa fa-exclamation"})).done(function(e){"ok"===e.button&&(shown=!1,t.modal("hide"))})},emailTemplateChange:function(a){var n={field:"Id",operator:"eq",value:a.sender._old};f.filter(n);var i=f.view(),r=i.length>0?"["+e.viewModel.Id+"] "+i[0].Subject:"["+e.viewModel.Id+"] "+e.viewModel.Title,o=i.length>0?i[0].Content:"";o=t.find("#messageEditor").html(o).text(),o.match(/<(\w+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/)||(o=t.find("#messageEditor").html(o).text().replace(/\r\n|\r|\n/g,"<br />")),this.set("emailSubject",r),this.set("emailHTMLMessage",o),f.filter({})},resizeEditor:function(e){e.preventDefault();var t=$(e.currentTarget);t.children("i").hasClass("fa-expand")?(t.children("i").removeClass("fa-expand"),t.children("i").addClass("fa-compress")):t.children("i").hasClass("fa-compress")&&(t.children("i").removeClass("fa-compress"),t.children("i").addClass("fa-expand")),$("#EmailNotificationWindow").find("table.k-editor").toggleClass("editor-expanded")},showChangeStatus:"Incident"===e.type,changeStatus:!1,sendEmailAttachments:[],fromWorkItemAttachementsId:[],setFirstResponseDate:!!_.isNull(e.viewModel.FirstResponseDate),enableFirstResponseDate:!!_.isNull(e.viewModel.FirstResponseDate),openPopup:function(e){var i=n.getPopup();i.setSaveCallback(function(n){var i="toField"===e.currentTarget.id?"recipientToList":"recipientCCList",r="toField"===e.currentTarget.id?t.find("#userPickerTo").data("kendoMultiSelect"):t.find("#userPickerCc").data("kendoMultiSelect"),o=_.find(a.users,function(e){return e.guid===n.id}),s=_.isUndefined(o)?{Id:n.id,Name:n.name,Email:""}:{Id:n.id,Name:n.name,Email:o.email};if(!r.dataSource.data().find(function(e){return e.Id===s.Id})){var l=i.toLowerCase().indexOf("to")>-1?"TO":"CC";c[l]=s.Name,r.dataSource.add(s)}a[i].push(s),r.value(_.pluck(a[i],"Id"))}),i.vm.filterByAnalyst=!1,i.open()},viewWorkItemFiles:function(){var t=i.getPopup(e,"sendEmail");t.setSaveCallback(function(e){for(var t=e.selectedFiles||[],n=0;n<t.length;n++)a.sendEmailAttachments.push(t[n])}),t.open()},filesCount:e.viewModel.FileAttachment.length||0,users:[],recipientToList:[],recipientCCList:[],Status:{Id:"",Name:""},changeStatusSetting:{statusTypeId:"",defaultStatusId:"",rootStatusEnumId:"",enableChangeStatus:!0}});kendo.bind(t,a),app.isMobile()?(k(t.find("#userPickerTo"),a,"recipientToList"),k(t.find("#userPickerCc"),a,"recipientCCList"),y(t,a),C(t.find("#statusPicker"),a),S(t.find("#messageEditor"),a),$('[data-toggle="tooltip"]').tooltip(),t.removeClass("hide"),t.show(),win.open()):(t.on("shown.bs.modal",function(){$(this).off("shown.bs.modal"),$("body").addClass("modal-open"),shown=!0,$(".modal-backdrop").each(function(e,a){t.before(a)}),$(document).off("focusin.modal"),$('[data-toggle="tooltip"]').tooltip(),b(a),R(a),h(a),S(t.find("#messageEditor"),a),y(t,a),k(t.find("#userPickerTo"),a,"recipientToList"),k(t.find("#userPickerCc"),a,"recipientCCList"),C(t.find("#statusPicker"),a),_.isNull(a.changeStatusSetting.rootStatusEnumId)&&x(t,e,a)}),t.on("hidden.bs.modal",function(){$("body").removeClass("modal-open"),$(".modal-backdrop").remove();var e=t.find("#userPickerTo").data("kendoMultiSelect"),a=t.find("#userPickerCc").data("kendoMultiSelect");e.value(""),a.value("")}),t.on("hide.bs.modal",function(e){if(shown&&$("#extOkCancelDialog").length<=1)return a.cancelClick(e),e.preventDefault(),e.stopImmediatePropagation(),!1}),t.modal("show"))}}),p=_.template(t),m={Target:"sendEmail"};$.extend(!0,m,o),s(new kendo.View(p(m),{wrap:!1,model:u,init:function(e){}}).render());var f=new kendo.data.DataSource({transport:{read:"/EmailNotification/GetNotificationTemplates",dataType:"json"},schema:{model:{fields:{Id:{type:"string"},Name:{type:"string"}}}}}),v=function(t,a){var n={EnteredBy:session.user.Name,Title:localization.EMailSent,IsPrivate:a,EnteredDate:(new Date).toISOString(),LastModified:(new Date).toISOString(),Description:t,DescriptionDisplay:t,Image:app.config.iconPath+app.config.icons["E-Mail Sent"],ActionType:{Id:"15e86d4a-1b55-01be-C9fa-660a3cb3fc26",Name:"Email Sent"}};e.viewModel.ActionLog||(e.viewModel.ActionLog=[]);var i=app.controls.getWorkItemLogType(e.viewModel);i&&e.viewModel[i].push(n)},g=function(e){e==localization.RequiredFieldsErrorMessage?app.lib.message.add(e,"danger"):app.lib.message.add(localization.PleaseCorrectErrors,"danger"),app.lib.message.show()},b=function(t){u.RequestedWorkItem&&null!=u.RequestedWorkItem.DisplayName&&(c.TO=e.viewModel.RequestedWorkItem.DisplayName);var a=e.viewModel.RequestedWorkItem?e.viewModel.RequestedWorkItem.BaseId:"";$.ajax({url:"/EmailNotification/GetffectedUserEmail",type:"GET",data:{baseId:a},success:function(a,n,i){if(!_.isUndefined(a)&&""!=a){var r={Id:e.viewModel.RequestedWorkItem.BaseId,Name:e.viewModel.RequestedWorkItem.DisplayName,Email:a},o=$("#userPickerTo").data("kendoMultiSelect");o.dataSource.data().find(function(e){return e.Id===r.Id})||o.dataSource.add(r),t.recipientToList.push(r),o.value(r.Id)}}})},h=function(t){var a=t.changeStatusSetting.defaultStatusId;null==a?(t.Status.set("Id",e.viewModel.Status.Id),t.Status.set("Name",e.viewModel.Status.Name)):$.ajax({url:"/api/V3/Enum/GetEnumDisplayName",type:"GET",data:{id:a},async:!1,success:function(e,n,i){t.Status.set("Id",a),t.Status.set("Name",e)}})},w=function(e){var t=null;for(var a in e){var n=e[a].trim();if(""!=n&&0==app.validateEmail(n)){t=n;break}}return t},y=function(t,a){a.set("sendEmailAttachments",[]),a.set("filesCount",0);var n=function(e){if(e.hasClass("opennewtab")){var a=window.open("about:blank");setTimeout(function(){a.document.body.appendChild(a.document.createElement("img")).src=e.closest(".thumbnail-file").find(".thumbnail-img img")[0].src,a.href=e.closest(".thumbnail-file").find(".thumbnail-img img")[0].src,a.focus()},0)}else{var n=$(".fileattachment-img-modal"),i=app.config.rootURL+"FileAttachment/ViewFile/",r=t.find(".fileattachment-list").data("kendoListView"),o=e.closest("[role='option']"),s=r.dataSource.getByUid(o.data("uid"));if(s.DisplayName.toLowerCase().match(/\.(jpg|jpeg|png|gif)$/)&&!e.hasClass("download"))n.kendoDialog({modal:!0,title:s.DisplayName,content:"<div class='file-img-container'><img src=\"data:image/png;base64,"+s.Content.data+'" onerror="this.onerror = null; this.src = \'/Content/Images/Icons/FileUpload/document.svg\';" alt="'+s.DisplayName+'" /></div>',animation:{open:{effects:"fade:in"}}}),$(".k-window.k-widget").addClass("acivity-popup-window"),n.data("kendoDialog").open();else if(s.Content.data&&!s.DisplayName.toLowerCase().match(/\.(jpg|jpeg|png|gif)$/)){var l=new Blob([s.Content.data]),d=window.URL.createObjectURL(l),c=s.DisplayName;if(navigator.msSaveOrOpenBlob)return void navigator.msSaveOrOpenBlob(l,c);if(window.navigator.msSaveBlob)return void window.navigator.msSaveBlob(l,c);var u=document.createElement("a");document.body.appendChild(u),u.style="display: none",u.href=d,u.download=c,u.click(),window.URL.revokeObjectURL(d),document.body.removeChild(u)}else s.BaseId&&null!=s.BaseId&&(location.href=i+s.BaseId)}};t.find(".fileattachment-list").kendoListView({dataSource:a.sendEmailAttachments,template:kendo.template(t.find("#fileTemplate").html()),selectable:"single",dataBound:function(e){t.find(".custom-click").on("click",function(){n($(this))}),app.isMobile()||(t.find("a[view-image]").parent().hide(),t.find(".thumbnail-img img").on("click",function(){n($(this))}))},remove:function(e){}});t.find("#email-attachment").kendoUpload({async:{saveUrl:"/FileAttachment/UploadAttachment/"+e.viewModel.BaseId+"?className="+e.viewModel.ClassName+"&count="+e.viewModel.FileAttachment.length,autoUpload:!0},success:function(e){kendo.ui.progress(t.find(".fileattachment-list"),!0);var n=e.response;if("upload"==e.operation)for(var i=0;i<e.files.length;i++){var r=e.files[i].rawFile;r&&(_.isUndefined(n.FileAttachment)?_.isUndefined(n.success)||0!=n.success||(a.set("okEnabled",!1),kendo.ui.ExtAlertDialog.show({title:localization.ErrorDescription,message:n.message,icon:"fa fa-exclamation"})):(a.sendEmailAttachments.push(n.FileAttachment),a.set("attachmentErrorMessage",""),a.set("okEnabled",!0)))}kendo.ui.progress(t.find(".fileattachment-list"),!1)},error:function(e){$.parseJSON(e.XMLHttpRequest.responseText);$.map(e.files,function(e){console.warn("Could not upload "+e.name)})},showFileList:!1,dropZone:".drop-zone-element"}).data("kendoUpload");t.find(".browse-file").click(function(e){$("#email-attachment").trigger("click")})},k=function(e,t,a){if(_.isUndefined(e.data("kendoMultiSelect"))){var n=e[0].id.toLowerCase().indexOf("to")>-1?"TO":"CC",i=e.kendoMultiSelect({placeholder:localization.Search,dataTextField:"Name",dataValueField:"Id",autoBind:!1,filter:"contains",dataSource:new kendo.data.DataSource({transport:{read:{url:"/api/V3/User/GetUserListWithEmail",data:{filterByAnalyst:!1,maxNumberOfResults:1e3,userFilter:function(){return c[n]?c[n]:""}}}},serverFiltering:!0,filter:[{field:"Email",operator:"neq",value:""}]}),filtering:function(e){if(void 0!=e.filter){var t=e.sender.element[0].id.toLowerCase().indexOf("to")>-1?"TO":"CC";c[t]=e.filter.value}},open:function(){this.dataSource.filter()},tagTemplate:"<span title='#: data.Email #'>#: data.Name #;</span>",select:function(e){var n=t.get(a);n.push(e.dataItem),t.set(a,n)},deselect:function(e){var n=t.get(a);e.dataItem.Id&&(n=_.filter(n,function(t){return t.Id!==e.dataItem.Id})),t.set(a,n)},clearButton:!1}).data("kendoMultiSelect");i.input.on("keydown",function(e){if(9===e.keyCode){var e=jQuery.Event("keydown");e.which=13,e.keyCode=13,i.input.trigger(e)}})}},I=function(t,a){var n=t.changeStatus,i=t.addToLog,r=!1,o=t.sendEmailAttachments.length>0,s=t.sendEmailAttachments.length>0?_.pluck(t.sendEmailAttachments,"DisplayName").join(","):"",l=encodeURIComponent(t.emailHTMLMessage),d=t.emailTextMessage,c=t.fromWorkItemAttachementsId.length>0?t.fromWorkItemAttachementsId.join(","):"";l=session.emailFooterTemplate.length>0?l+"\r\n"+encodeURIComponent($("<div/>").html(session.emailFooterTemplate).text()):l;var u={To:t.emailTo,Cc:t.emailCC,Subject:t.emailSubject.replace(/</g,"%3C").replace(/>/g,"%3E"),Message:l,AttachedFileNames:s,WorkItemId:e.viewModel.BaseId,workItemFileIds:c},p=t.sendEmailAttachments,m=t.setFirstResponseDate;$.ajax({url:"/EmailNotification/SendEmailNotification",type:"POST",data:u,success:function(s,l,c){var u="true"==s.toLowerCase();kendo.ui.progress(a,!1),u?$.when(kendo.ui.ExtAlertDialog.show({title:localization.SendEmail,message:localization.SendEmailSuccessMessage})).done(function(a){null!=t.Status&&""!=t.Status.Id&&(e.viewModel.Status.set("Id",t.Status.Id),n=!0),o&&(_.isUndefined(e.viewModel.FileAttachment)||_.each(p,function(t){e.viewModel.FileAttachment.push(t);var a=app.controls.getWorkItemLogType(e.viewModel);a&&e.viewModel[a].unshift(new app.dataModels[a].fileAdded(t.DisplayName))})),i&&(d=_.isUndefined(d)?"":d.substring(0,4e3),d.length>0?v(d.replace(/</g,"&lt;").replace(/>/g,"&gt;"),t.setAsPrivate):(i=!1,r=!0)),m&&e.viewModel.set("FirstResponseDate",(new Date).toISOString());var s=function(){(i||o||n||m)&&e.save(function(){switch(app.lib.message.add(localization.ChangesApplied,"success"),e.type){case"ChangeRequest":location.href="/ChangeRequest/Edit/"+e.viewModel.Id+"/";break;case"ServiceRequest":location.href="/ServiceRequest/Edit/"+e.viewModel.Id+"/";break;case"Incident":location.href="/Incident/Edit/"+e.viewModel.Id+"/";break;case"Problem":location.href="/Problem/Edit/"+e.viewModel.Id+"/";break;case"ReleaseRecord":location.href="/ReleaseRecord/Edit/"+e.viewModel.Id+"/";break;default:location.href="/View/cca5abda-6803-4833-accd-d59a43e2d2cf/"}},g)};r?$.when(kendo.ui.ExtAlertDialog.show({title:localization.SkippedAddingLogEntryTitle,message:localization.ErrorAddingLogEntryMessage,icon:"fa fa-warning"})).done(function(){s()}):s()}):($.when(kendo.ui.ExtAlertDialog.show({title:localization.SendEmail,message:localization.SendEmailFailedMessage})),kendo.ui.progress(a,!1))},error:function(e,t,a){console.log(e,t,a)}})},S=function(t,a){function n(t,a){var n=new Date,i=n.getTime(),r=new FormData;r.append("files",t,"screenshot_"+i+".png"),$.ajax({url:"/FileAttachment/UploadAttachment/"+e.viewModel.BaseId+"?className="+e.viewModel.ClassName+"&count="+e.viewModel.FileAttachment.length,data:r,type:"POST",async:!0,contentType:!1,processData:!1,dataType:"json",success:function(e){_.isUndefined(e.FileAttachment)?(a.set("attachmentErrorMessage",e.message),
a.set("okEnabled",!1),a.set("emailAttachment","")):(a.sendEmailAttachments.push(e.FileAttachment),a.set("attachmentErrorMessage",""),a.set("okEnabled",!0))},error:function(e){console.warn(e)}})}function i(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0),t.toDataURL("image/png")}function r(e){for(var t=atob(e.split(",")[1]),a=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),i=new Uint8Array(n),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return new Blob([n],{type:a})}var o=["bold","italic","underline","formatting","foreColor","backColor","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","indent","outdent","createLink","unlink","insertImage","viewHtml","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn",{name:"insertLineBreak",shift:!0},{name:"insertParagraph",shift:!0}],s=["formatting","createLink","unlink","insertImage","viewHtml","bold","italic","underline","insertUnorderedList","insertOrderedList","indent","outdent","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn",{name:"insertLineBreak",shift:!0},{name:"insertParagraph",shift:!0}],l=t.data("kendoEditor");_.isUndefined(l)&&(l=t.kendoEditor({change:function(e){var t=e.sender.body.innerText||e.sender.body.textContent;a.set("emailTextMessage",t)},tools:app.isMobileDevice()?s:o,stylesheets:["/Content/Styles/cireson.mentions-in-keditor.min.css"],encoded:!0,paste:function(e){},pasteCleanup:{custom:function(e){try{if("IMG"===$(e)[0].tagName){var t,o=$(e).attr("src");if(null===o.match(/^data:image\/(png|jpg);base64,/)){var s=new Image;s.setAttribute("crossOrigin","anonymous"),s.src=o,$(s).one("load",function(){setTimeout(function(){o=i(s),t=r(o),n(t,a)},0)}).each(function(){this.complete&&$(this).load()})}else t=r(o),n(t,a)}}catch(e){}return e}}}),$.get("/api/V3/User/GetUserList",{fetchAll:!0},function(e){var t=$.map(e,function(e,t){return{id:t,name:e.Name,guid:e.Id,email:e.Email}});a.users=t;var n={at:"@",data:t,headerTpl:'<div class="atwho-header">Search Users</div>',insertTpl:"${atwho-at}${name}",displayTpl:"<li id='${guid}'> ${name} <br><span>${email}</span> </li>",limit:5,startWithSpace:!1,editableAtwhoQueryAttrs:{}},i=l.prev()[0],r=i.contentDocument||i.contentWindow.document;$inputor=$(r).find("body").atwho(n),$inputor.caret("pos",47),$inputor.atwho("run"),$inputor.on("inserted.atwho",function(t,n){var i=$("#userPickerTo").data("kendoMultiSelect"),r=$(n)[0].id,o=_.filter(e,function(e){return e.Id===r});a.recipientToList.push(o[0]),i.value(_.pluck(a.recipientToList,"Id"))}),$(document).on("removed.atwho",function(e){var t=$("#userPickerTo").data("kendoMultiSelect");if($(i).is($(e.target.activeElement))){var n=e.removedAtWhoId,r=_.without(a.recipientToList,_.findWhere(a.recipientToList,{Id:n}));a.set("recipientToList",r),t.value(_.pluck(a.recipientToList,"Id"))}})}))},C=function(e,t){var a="",n=t.changeStatusSetting.rootStatusEnumId;null!=n&&(a=n.toLowerCase()==t.Status.Id.toLowerCase()?n:n+","+t.Status.Id);var i=(t.changeStatusSetting.statusTypeId,{PropertyName:"Status",PropertyDisplayName:"ChangeStatus",EnumId:t.changeStatusSetting.statusTypeId,FilterIds:a,Disabled:!t.changeStatusSetting.enableChangeStatus});T(e,i,t)},T=function(e,t,a){r.build(a,t,function(t){e.html(t),app.controls.apply(e,{localize:!0,vm:a,bind:!0})})},x=function(e,t,a){var n=t.type,i=t.viewModel.Status.Id,r=a.changeStatusSetting.statusTypeId,o=a.changeStatusSetting.rootStatusEnumId,s=e.find('div[data-role="Status"]').data().handler._dropdown,l=e.find('div[data-role="Status"]').data().handler._treeview,d=app.lib.getChangeStatusRules(),c=d[n][i];"Incident"==n&&_.isUndefined(c)&&(c={field:"Id",operator:"neq",value:app.constants.workItemStatuses.Incident.Closed}),_.isNull(o)||(c={field:"Id",operator:"eq",value:o}),l.dataSource.options.serverFiltering=!1,l.dataSource.filter(c),$.get("/api/V3/Enum/GetFlatList/",{id:r,itemFilter:""},function(e){var t=new kendo.data.DataSource;t.data(e),t.filter(c),t.view().length>0&&s.setDataSource(t.view())})},R=function(t){switch(e.type){case"ServiceRequest":t.changeStatusSetting.statusTypeId=app.constants.workItemStatuses.ServiceRequest.Id,t.changeStatusSetting.rootStatusEnumId=session.consoleSetting.SendEmailServiceRootStatusEnum,t.changeStatusSetting.defaultStatusId=session.consoleSetting.SendEmailServiceDefaultStatusEnum,t.changeStatusSetting.enableChangeStatus=session.consoleSetting.SendEmailServiceAllowAnalystToChangeStatus;break;case"ChangeRequest":t.changeStatusSetting.statusTypeId=app.constants.workItemStatuses.ChangeRequest.Id,t.changeStatusSetting.rootStatusEnumId=session.consoleSetting.SendEmailChangeRootStatusEnum,t.changeStatusSetting.defaultStatusId=session.consoleSetting.SendEmailChangeDefaultStatusEnum,t.changeStatusSetting.enableChangeStatus=session.consoleSetting.SendEmailChangeAllowAnalystToChangeStatus;break;case"Problem":t.changeStatusSetting.statusTypeId=app.constants.workItemStatuses.Problem.Id,t.changeStatusSetting.rootStatusEnumId=session.consoleSetting.SendEmailProblemRootStatusEnum,t.changeStatusSetting.defaultStatusId=session.consoleSetting.SendEmailProblemDefaultStatusEnum,t.changeStatusSetting.enableChangeStatus=session.consoleSetting.SendEmailProblemAllowAnalystToChangeStatus;break;case"ReleaseRecord":t.changeStatusSetting.statusTypeId=app.constants.workItemStatuses.ReleaseRecord.Id,t.changeStatusSetting.rootStatusEnumId=session.consoleSetting.SendEmailReleaseRootStatusEnum,t.changeStatusSetting.defaultStatusId=session.consoleSetting.SendEmailReleaseDefaultStatusEnum,t.changeStatusSetting.enableChangeStatus=session.consoleSetting.SendEmailReleaseAllowAnalystToChangeStatus;break;case"Incident":default:t.changeStatusSetting.statusTypeId=app.constants.workItemStatuses.Incident.Id,t.changeStatusSetting.rootStatusEnumId=session.consoleSetting.SendEmailIncidentRootStatusEnum,t.changeStatusSetting.defaultStatusId=session.consoleSetting.SendEmailIncidentDefaultStatusEnum,t.changeStatusSetting.enableChangeStatus=session.consoleSetting.SendEmailIncidentAllowAnalystToChangeStatus}}}}}),define("forms/tasks/custom/controller",["require","text!forms/tasks/anchor/view.html"],function(e){var t=e("text!forms/tasks/anchor/view.html");return{build:function(e,a,n){if(_.isNull(a.Label))a.Configs.func(e,e.viewModel);else{var i=_.template(t),r={Target:"customFunc"};$.extend(!0,r,a);var o=kendo.observable({customFunc:function(){a.Configs.func(e,e.viewModel)}});n(new kendo.View(i(r),{wrap:!1,model:o}).render())}}}}),define("text!forms/tasks/spacer/view.html",[],function(){return'<div class="form-group">\r\n\r\n</div>'}),define("forms/tasks/spacer/controller",["require","text!forms/tasks/spacer/view.html"],function(e){var t=e("text!forms/tasks/spacer/view.html");return{template:t,build:function(e,a,n){var i=_.template(t),r={};$.extend(!0,r,a),n(new kendo.View(i(r),{wrap:!1}).render())}}}),define("forms/tasks/associateItem/controller",["require","text!forms/tasks/anchor/view.html"],function(e){var t=e("text!forms/tasks/anchor/view.html");return{build:function(e,a,n){var i=kendo.observable({changeStatus:function(){$("input[name='"+a.Configs.relationshipKey+"']").parent().find(".searchIcon").click()}}),r=_.template(t),o={Target:"changeStatus"};$.extend(!0,o,a),n(new kendo.View(r(o),{wrap:!1,model:i,init:function(e){}}).render())}}}),define("text!forms/tasks/setDate/view.html",[],function(){return'<div id="ChangeStatusWindow" class="cireson-window defined-form hide">\r\n    <div class="cireson-window--wrapper">\r\n        <div class="cireson-window--body">\r\n            <div id="datePicker"/>\r\n            <div id="disposalReference"/>\r\n            <div id="autoResolve" class="col-group" data-bind="visible:showAutoResolve"/>\r\n        </div>\r\n        <div class="cireson-window--footer window-buttons">\r\n            <div id="changeStatusErrorWin" class="error"></div>\r\n            <button data-role="button"\r\n                    class="btn btn-primary"\r\n                    data-bind="enabled: okEnabled, events: { click: okClick }">\r\n                <%= localization.OK %>\r\n            </button>\r\n            <button data-role="button"\r\n                    class="btn btn-default"\r\n                    data-bind="events: { click: cancelClick }">\r\n                <%= localization.Cancel %>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("text!forms/fields/date/view.html",[],function(){return'<div class="form-group"\r\n    <% if ( Required ){ %>\r\n    required\r\n    <% } %>\r\n    >\r\n    <label class="control-label" for="<%= PropertyName %>" data-localize="<%= PropertyDisplayName %>">\r\n        <span><% if ( Required ){ %> <%= \'(\' + localization.Required + \')\' %><% } %></span>\r\n    </label>\r\n    <input name="<%= PropertyName %>"\r\n           data-control="datePicker"\r\n           data-control-bind="<%= PropertyName %>"\r\n           data-control-from="<%= FromFilter %>"\r\n           data-control-to="<%= ToFilter %>"\r\n           data-control-from-relative="<%= FromRelative %>"\r\n           data-control-to-relative="<%= ToRelative %>"\r\n    <% if ( Disabled ){ %>\r\n    disabled\r\n    <% } %>\r\n\r\n     />\r\n</div>'}),define("forms/fields/date/controller",["require","text!forms/fields/date/view.html"],function(e){var t=e("text!forms/fields/date/view.html");return{template:t,build:function(e,a,n){var i=_.template(t),r={FromFilter:"",ToFilter:"",FromRelative:"",ToRelative:"",Disabled:a.disabled,Required:a.Required};void 0!=a.MinValue&&(-1!=a.MinValue.indexOf(":")?r.FromRelative=a.MinValue:"string"==typeof a.MinValue&&(r.FromFilter=a.MinValue)),void 0!=a.MaxValue&&(-1!=a.MaxValue.indexOf(":")?r.ToRelative=a.MaxValue:"string"==typeof a.MaxValue&&(r.ToFilter=a.MaxValue)),$.extend(!0,r,a),n(i(r))}}}),define("text!forms/fields/string/view.html",[],function(){return'<div class="form-group">\r\n    <label class="control-label" for="<%= PropertyName %>" data-localize="<%= PropertyDisplayName %>">\r\n        <span><% if ( Required ){ %> <%= \'(\' + localization.Required + \')\' %><% } %></span>\r\n    </label>\r\n    <input type="text"\r\n           name="<%= PropertyName %>"\r\n           class="k-textbox form-control input-sm"\r\n           data-bind="value: <%= PropertyName %><% if ( LimitLength ){ %>, events : { blur: view.stringController.CheckLength }<% } %>"\r\n\r\n\r\n    <% if ( LimitLength ){ %>\r\n    maxlength="<%= MaxLength %>"\r\n    <% } %>\r\n\r\n    <% if ( Disabled ){ %>\r\n    disabled\r\n    <% } %>\r\n\r\n    <% if ( Required ){ %>\r\n    required\r\n    <% } %>\r\n\r\n    />\r\n\r\n    <% if ( LimitLength ){ %>\r\n    <p class="help-block validation-summary-errors" style="display: none;"><%= localization.MaxLengthError.replace("{0}", MaxLength) %></p>\r\n    <% } %>\r\n\r\n</div>'}),define("forms/fields/string/controller",["require","text!forms/fields/string/view.html"],function(e){var t=e("text!forms/fields/string/view.html");return{template:t,build:function(e,a,n){var i=a.vm,r=new kendo.View;_.isUndefined(i.view)&&(i.view=[]),i.view.stringController={CheckLength:function(e){setTimeout(function(){var t=$(e.currentTarget),a=t.next(),n=t.attr("maxlength");t.val().length>n?(t.attr("data-invalid",""),a.show()):(a.hide(),t.removeAttr("data-invalid"),t.data("prevent",!1))},100)}},i.view.buildStringView=function(){var e=_.template(t),o=!1;_.isUndefined(a.MinLength)&&_.isUndefined(a.MaxLength)||(o=!0);var s={Required:a.Required,Disabled:a.disabled,MinLength:a.MinLength,MaxLength:a.MaxLength,LimitLength:o};$.extend(!0,s,a),r=new kendo.View(e(s),{wrap:!1,model:i}),n(r.render())},i.view.buildStringView()}}}),define("forms/tasks/setDate/controller",["require","text!forms/tasks/anchor/view.html","text!forms/tasks/setDate/view.html","forms/fields/date/controller","forms/fields/string/controller","forms/fields/longstring/controller","forms/fields/boolean/controller"],function(e){var t=e("text!forms/tasks/anchor/view.html"),a=e("text!forms/tasks/setDate/view.html"),n=e("forms/fields/date/controller"),i=e("forms/fields/string/controller"),r=(e("forms/fields/longstring/controller"),e("forms/fields/boolean/controller"));return{template:a,build:function(e,o,s){var l,d,c=o.Configs.Title,u=_.template(a),p=new kendo.View(u(v),{wrap:!1});s(p.render());var m=kendo.observable({openWindow:function(){var t=p.element.clone();win=t.kendoCiresonWindow({title:c,width:600,height:375,actions:[]}).data("kendoWindow");var a="",n=kendo.observable({type:o.Configs.type,workItemModel:e.viewModel,okClick:function(){switch(o.Configs.viewType){case"hdDisposal":e.viewModel.set("HardwareAssetStatus",{Id:"020822bd-7d3a-4c0f-1be4-325ef1aa52b4",Name:localization.Disposed});break;case"hdREcieveDate":case"MasterContractRenewedOn":e.viewModel.get(d.attr("name"))&&l.val("").blur()}win.close()},cancelClick:function(){var t="";_.isNull(i)||(t=kendo.toString(new Date(i),"g")),$('[name="'+r.PropertyName+'"]').val(t).blur(),"hdDisposal"==o.Configs.viewType?e.viewModel.set("DisposalReference",s):"hdREcieveDate"==o.Configs.viewType?e.viewModel.recieveCheckbox=m:"MasterContractRenewedOn"==o.Configs.viewType&&(e.viewModel.masterContractStartingDateCheckbox=m),win.close()}});"hdDisposal"==o.Configs.viewType?a=localization.DisposalDate:"hdREcieveDate"==o.Configs.viewType?a=localization.ReceiveDate:"MasterContractRenewedOn"==o.Configs.viewType&&(a=localization.StartDate),kendo.bind(t,n);var i=e.viewModel.get(o.Configs.propertyKey),r={PropertyName:o.Configs.propertyKey,PropertyDisplayName:a,vm:e.viewModel,disabled:!1};if(g(t.find("#datePicker"),r,e.viewModel),"hdDisposal"==o.Configs.viewType){var s=e.viewModel.get("DisposalReference"),u={PropertyName:"DisposalReference",PropertyDisplayName:localization.DisposalReference,vm:e.viewModel};b(t.find("#disposalReference"),u,e.viewModel)}else if("hdREcieveDate"==o.Configs.viewType){var m=e.viewModel.recieveCheckbox,f={PropertyName:"recieveCheckbox",PropertyDisplayName:localization.RemoveReceivedDate,Inline:!0};h(t.find("#disposalReference"),f,e.viewModel)}else if("MasterContractRenewedOn"==o.Configs.viewType){var m=e.viewModel.masterContractStartingDateCheckbox,f={PropertyName:"masterContractStartingDateCheckbox",PropertyDisplayName:localization.RemoveMasterLeaseWarrantyStarts,Inline:!0};h(t.find("#disposalReference"),f,e.viewModel)}t.removeClass("hide"),t.show(),win.open()}}),f=_.template(t),v={Target:"openWindow"};$.extend(!0,v,o),s(new kendo.View(f(v),{wrap:!1,model:m,init:function(e){}}).render());var g=function(e,t,a){_.isNull(a[t.PropertyName])||""==a[t.PropertyName]?a.set(t.PropertyName,kendo.toString(new Date,"g")):a.set(t.PropertyName,kendo.toString(new Date(a[t.PropertyName]),"g")),n.build(a,t,function(n){e.html(n),app.controls.apply(e,{localize:!0,vm:a,bind:!0}),l=e.find("input[name='"+t.PropertyName+"']"),l.focus(),l.blur()})},b=function(e,t,a){i.build(a,t,function(t){e.html(t),app.controls.apply(e,{localize:!0,vm:a,bind:!0})})},h=function(t,a,n){r.build(n,a,function(i){t.html(i),app.controls.apply(t,{localize:!0,vm:n,bind:!0}),d=t.find("input[name='"+a.PropertyName+"']"),e.viewModel.set(a.PropertyName,!1),d.click(function(){var e=l.data("kendoDatePicker");this.checked?e.enable(!1):e.enable(!0)})})}}}}),define("forms/tasks/updateAssetManagement/controller",["require","text!forms/tasks/anchor/view.html"],function(e){var t=e("text!forms/tasks/anchor/view.html");return{build:function(e,a,n){!function(){switch(a.Configs.type){case"WarrantyContract":case"SupportAndMaintenance":case"ContractLease":CommonContract.UpdateStatus(e.viewModel,!0)}}();var i=kendo.observable({changeStatus:function(){switch(a.Configs.type){case"License":pageForm.SetSeatsRemaining(pageForm.viewModel);break;case"SoftwareAsset":l(e.viewModel);break;case"Consumables":s(e.viewModel);break;default:CommonContract.SupersedesParent(e.viewModel)}}}),r=_.template(t),o={Target:"changeStatus"};$.extend(!0,o,a),n(new kendo.View(r(o),{wrap:!1,model:i,init:function(e){}}).render());var s=function(e){if(e.CountAssignedConsumableUsers||e.CountAssignedConsumableAssets){var t=0;!_.isNull(e.Target_ConsumableHasAssignedUsers)&&e.CountAssignedConsumableUsers&&(t+=e.Target_ConsumableHasAssignedUsers.length),!_.isNull(e.Target_ConsumableHasAssignedAssets)&&e.CountAssignedConsumableAssets&&(t+=e.Target_ConsumableHasAssignedAssets.length),e.set("AssignedCount",t)}},l=function(e){$.when(kendo.ui.ExtYesNoDialog.show({title:localization.CiresonAssetManagement,message:localization.SoftwareAssetUpdateConfirmationMsg})).done(function(t){"yes"===t.button&&e.save(function(t,a){1==t&&$.ajax({type:"POST",dataType:"json",url:"/AssetManagement/SoftwareAsset/UpdateSoftwareAsset/",data:"formJson="+a+"&id="+e.BaseId,success:function(t,a,n){1==t.Success?$.when(kendo.ui.ExtAlertDialog.show({title:localization.CiresonAssetManagement,message:localization.SoftwareAssetUpdated})).done(function(t){e.set("isDirty",!1),app.lib.message.add(localization.ChangesApplied,"success"),window.location.reload(!0)}):kendo.ui.ExtAlertDialog.show({title:localization.CiresonAssetManagement,message:localization.ErrorOccured})},error:function(e,t,a){failure(),console&&app.lib.log(localization.RequestFailed),app.lib.log(a);var n=e.responseText;app.lib.log(n);var i=localization.RequestFailed;n.exception&&n.exception.length>0&&(i=n.exception),kendo.ui.ExtAlertDialog.show({title:localization.ErrorDescription,message:i,icon:"fa fa-exclamation"})},processData:!1,async:!1})},e.saveFailure,!0)})}}}}),define("forms/tasks/updateSupersededHardware/controller",["require","text!forms/tasks/anchor/view.html"],function(e){var t=e("text!forms/tasks/anchor/view.html");return{build:function(e,a,n){var i=kendo.observable({changeStatus:function(){$.when(kendo.ui.ExtYesNoDialog.show({title:localization.CiresonAssetManagement,message:localization.UpdateSupersedesConfirmation})).done(function(e){"yes"===e.button&&$.post(a.Configs.url,{baseId:a.Configs.baseId},function(e){!0===e.success?kendo.ui.ExtAlertDialog.show({title:localization.UpdatingAssets,message:localization.TotalNumberofAssetsUpdated+": "+e.count}):kendo.ui.ExtAlertDialog.show({title:localization.ServerError,message:e.error})})})}}),r=_.template(t),o={Target:"changeStatus"};$.extend(!0,o,a),n(new kendo.View(r(o),{wrap:!1,model:i,init:function(e){}}).render())}}}),define("text!forms/tasks/copyLicenseAssignments/view.html",[],function(){return'<div id="CopyLicenseAssignmentsWindow" class="cireson-window defined-form hide">\r\n    <div id="windowContent" class="cireson-window--wrapper">\r\n        <div class="cireson-window--body">\r\n            <form>\r\n                <fieldset id="source">\r\n                    <legend><%= localization.RelatedLicenseAssignmentSource %></legend>\r\n                    <label class="control-label">\r\n                        <input class="control-label" type="radio" id="Computers" value="Computers" name="Source" data-bind="checked: selected" />\r\n                        <%= localization.Computers %>\r\n                    </label>\r\n                    <label class="control-label">\r\n                        <input type="radio" id="Users" value="Users" name="Source" data-bind="checked: selected" />\r\n                        <%= localization.Users %>\r\n                    </label>\r\n                    <label class="control-label">\r\n                        <input type="radio" id="Both" value="Both" name="Source" data-bind="checked: selected" />\r\n                        <%= localization.Both %>\r\n                    </label>\r\n                </fieldset>\r\n                <br />\r\n                <br />\r\n                <fieldset id="target">\r\n                    <legend><%= localization.SelectedSoftwareAssetTargetList %></legend>\r\n                    <label class="control-label">\r\n                        <input class="control-label" type="radio" id="AuthorizedList" value="AuthorizedList" name="Target" data-bind="checked: selected" />\r\n                        <%= localization.AuthorizedList %>\r\n                    </label>\r\n                    <label class="control-label">\r\n                        <input type="radio" id="AssignedList" value="AssignedList" name="Target" data-bind="checked: selected" />\r\n                        <%= localization.AssignedListNamedLicenses %>\r\n                    </label>\r\n                    <label class="control-label">\r\n                        <input type="radio" id="Both" value="Both" name="Target" data-bind="checked: selected" />\r\n                        <%= localization.Both %>\r\n                    </label>\r\n                </fieldset>\r\n            </form>\r\n            <div id="autoResolve" class="col-group" data-bind="visible:showAutoResolve" />    \r\n        </div>\r\n        <div class="cireson-window--footer window-buttons">\r\n            <div id="changeStatusErrorWin" class="error"></div>\r\n            <button data-role="button"\r\n                    class="btn btn-primary"\r\n                    data-bind="enabled: okEnabled, events: { click: okClick }">\r\n                <%= localization.OK %>\r\n            </button>\r\n            <button data-role="button"\r\n                    class="btn btn-default"\r\n                    data-bind="events: { click: cancelClick }">\r\n                <%= localization.Cancel %>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("forms/tasks/copyLicenseAssignments/controller",["require","text!forms/tasks/anchor/view.html","text!forms/tasks/copyLicenseAssignments/view.html"],function(e){var t=e("text!forms/tasks/anchor/view.html"),a=e("text!forms/tasks/copyLicenseAssignments/view.html");return{template:a,build:function(e,n,i){var r=_.template(a),o=new kendo.View(r(d),{wrap:!1});i(o.render());var s=kendo.observable({openWindow:function(){var t=o.element.clone();win=t.kendoCiresonWindow({title:localization.CopyLicenseAssignments,width:600,height:375,actions:[]}).data("kendoWindow");var a=new kendo.observable({type:n.Configs.type,okClick:function(){$.when(kendo.ui.ExtAlertDialog.show({title:localization.CiresonAssetManagement,message:localization.StartCopyLicenseAsssignements})).done(function(a){$.post("/AssetManagement/SoftwareAsset/CopyLicenseAssignments/",t.find("#windowContent form").serialize()+"&id="+e.viewModel.BaseId,function(t){if(1==t.success){var a=!1,n=!1,o=!1,l=s.selected,d=r.selected,c="AssignedList"==l,u=t.ComputerList,p=t.UserList;"AuthorizedList"==l&&(o=!0),"Users"==d&&(a=!0),"Computers"==d&&(n=!0),"Both"==d&&(a=!0,n=!0),"Both"==l&&(c=!0,o=!0),a&&c&&i(e.viewModel,p,"Target_SoftwareAssetHasAssignedUsers"),n&&c&&i(e.viewModel,u,"Target_SoftwareAssetHasAssignedComputers"),a&&o&&i(e.viewModel,p,"Target_SoftwareAssetHasAuthorisedUser"),n&&o&&i(e.viewModel,u,"Target_SoftwareAssetHasAuthorisedComputer"),kendo.ui.ExtAlertDialog.show({title:localization.CiresonAssetManagement,message:localization.UpdateSoftwareAssetMsg})}else kendo.ui.ExtAlertDialog.show({title:localization.CiresonAssetManagement,message:t.error})})}),win.close()},cancelClick:function(){win.close()}});kendo.bind(t,a);var i=function(e,t,a){var n=e[a],i=!1;for(var r in t){i=!1;for(var o in n)if(n[o].BaseId==t[r].BaseId){i=!0;break}i||n.addItem(t[r])}},r=kendo.observable({selected:"Computers"});kendo.bind(t.find("#source"),r);var s=kendo.observable({selected:"AuthorizedList"});kendo.bind(t.find("#target"),s),t.removeClass("hide"),t.show(),win.open()}}),l=_.template(t),d={Target:"openWindow"};$.extend(!0,d,n),i(new kendo.View(l(d),{wrap:!1,model:s,init:function(e){}}).render())}}}),define("text!CustomSpace/customtasks.tmpl.html",[],function(){return'<div>\r\n<div id="commentHTML" class="form-horiztontal">\r\n<div>\r\n<div class="col-group">\r\n<div class="inline-spacing">\r\n<label>What do you want to search?</label>\r\n</div>\r\n<div class="inline-spacing">\r\n<textarea data-bind="value: comment, events: {keyup:textCounter}"\r\ndata-value-update="keyup"\r\nclass="k-textbox"\r\nrows="7" ></textarea>\r\n<div class="inline-spacing">\r\n<span data-bind="html:charactersRemaining"></span>\r\n<span>characters remaining</span>\r\n</div>\r\n</div>\r\n<div class="window-buttons">\r\n<button data-role="button"\r\nclass="btn btn-primary"\r\ndata-bind="enabled: okEnabled, events: { click: okClick }">\r\nOK\r\n</button>\r\n<button data-role="button"\r\nclass="btn btn-primary"\r\ndata-bind="events: { click: cancelClick }">\r\nCancel\r\n</button>\r\n</div>\r\n</div>\r\n</div>\r\n</div>'}),define("forms/tasks/copyToNewWI/controller",["require","text!forms/tasks/anchor/view.html"],function(e){var t=e("text!forms/tasks/anchor/view.html");return{build:function(e,a,n){var i=_.template(t),r={Target:"copyToNewWI"};$.extend(!0,r,a);var o=(i(r),kendo.observable({copyToNewWI:function(){var t,a;a=$("<form>",{method:"post",target:"_blank"}),t=$("<input>",{type:"hidden",name:"vm"}),a.append(t),$("body").append(a),t.val(JSON.stringify(e.viewModel)),"Incident"==e.type&&a.attr("action","/Incident/New/"),"ServiceRequest"==e.type&&a.attr("action","/ServiceRequest/New/"),a.submit(),a.remove()}}));n(new kendo.View(i(r),{wrap:!1,model:o}).render())}}}),define("text!forms/tasks/increaseAvailableCount/view.html",[],function(){return'<div id="ChangeStatusWindow" class="cireson-window defined-form hide">\r\n    <div class="cireson-window--wrapper">\r\n        <div class="cireson-window--body">\r\n            <div id="increaseAvailableCount"/>\r\n            <div id="commentAvailableCount"/>\r\n            <div id="autoResolve" class="col-group" data-bind="visible:showAutoResolve"/>\r\n        </div>\r\n        <div class="cireson-window--footer window-buttons">\r\n            <div id="changeStatusErrorWin" class="error"></div>\r\n            <button data-role="button"\r\n                    class="btn btn-primary"\r\n                    data-bind="enabled: okEnabled, events: { click: okClick }">\r\n                <%= localization.OK %>\r\n            </button>\r\n            <button data-role="button"\r\n                    class="btn btn-default"\r\n                    data-bind="events: { click: cancelClick }">\r\n                <%= localization.Cancel %>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("forms/fields/longString/controller",["require","text!forms/fields/longstring/view.html"],function(e){var t=e("text!forms/fields/longstring/view.html");return{template:t,build:function(e,a,n){var i=a.vm,r=new kendo.View;_.isUndefined(i.view)&&(i.view=[]),i.view.longStringController={CheckLength:function(e){setTimeout(function(){var t=$(e.currentTarget),a=t.next(),n=t.attr("maxlength");t.val().length>n?(t.attr("data-invalid",""),a.show()):(a.hide(),t.removeAttr("data-invalid"),t.data("prevent",!1))},100)}},i.view.buildLongStringView=function(){var e=_.template(t),o=!1;_.isUndefined(a.MinLength)&&_.isUndefined(a.MaxLength)||(o=!0);var s={Required:a.Required,Disabled:a.disabled,MinLength:a.MinLength,MaxLength:a.MaxLength,LimitLength:o,Rows:10,visible:_.isUndefined(a.IsVisible)||0!=a.IsVisible?"":"hidden"};$.extend(!0,s,a),r=new kendo.View(e(s),{wrap:!1,model:i}),n(r.render())},i.view.buildLongStringView()}}}),define("text!forms/fields/numeric/view.html",[],function(){return'<div data-cid="NumericControl" data-cid-propname="<%= PropertyName %>" class="form-group">\r\n    <label class="control-label" for="<%= PropertyName %>" data-localize="<%= PropertyDisplayName %>">\r\n        <span><% if ( Required ){ %> <%= \'(\' + localization.Required + \')\' %><% } %></span>\r\n    </label>\r\n    <input type="number"\r\n           name="<%= PropertyName %>"\r\n           class="form-control form-control-picker input-sm"\r\n           data-control="numericTextBox"\r\n           data-bind="value: <%= PropertyName %>"\r\n           data-control-decimals="<%= DecimalPlaces %>"\r\n           data-control-min="<%= MinValue%>"\r\n           data-control-max="<%= MaxValue %>"\r\n           data-step="<%= StepIncrement %>"\r\n           data-format="<%= Format%>"\r\n\r\n            <% if ( Disabled ){ %>\r\n                disabled\r\n            <% } %>\r\n\r\n            <% if ( Required ){ %>\r\n            required\r\n            <% } %>\r\n\r\n    />\r\n</div>'}),define("forms/fields/numeric/controller",["require","text!forms/fields/numeric/view.html"],function(e){var t=e("text!forms/fields/numeric/view.html");return{template:t,build:function(e,a,n){var i=_.template(t),r={Required:a.Required,DecimalPlaces:2,MinValue:0,MaxValue:100,StepIncrement:1,Disabled:a.disabled,Format:""};$.extend(!0,r,a),n(i(r))}}}),define("forms/tasks/increaseAvailableCount/controller",["require","text!forms/tasks/anchor/view.html","text!forms/tasks/increaseAvailableCount/view.html","forms/fields/longString/controller","forms/fields/numeric/controller"],function(e){var t=e("text!forms/tasks/anchor/view.html"),a=e("text!forms/tasks/increaseAvailableCount/view.html"),n=e("forms/fields/longString/controller"),i=e("forms/fields/numeric/controller");return{template:a,build:function(e,r,o){var s=localization.EditConsumableAvailableCount,l=_.template(a),d=new kendo.View(l(m),{wrap:!1});o(d.render());var c,u=kendo.observable({openWindow:function(){var t=d.element.clone();win=t.kendoCiresonWindow({title:s,width:600,height:380,actions:[],activate:function(){c=new kendo.data.ObservableObject({ClassTypeId:"67ce5b07-835d-246d-478d-29cee397c66e",Comment:"",Target_LogHasCreator:{ClassTypeId:"eca3c52a-f273-5cdc-f165-3eb95a2b26cf",BaseId:session.user.Id},AllowCreatedDate:!0,Name:app.lib.newGUID(),Type:{Id:"884650a1-632a-0532-b0d4-8c6b1d990752",Name:localization.TaskRun}});var e={PropertyName:"zeroCount",PropertyDisplayName:"IncreaseConsumableAvailableCountBy",DecimalPlaces:0,Required:!0,vm:n};f(t.find("#increaseAvailableCount"),e,n);var a={PropertyName:"Comment",PropertyDisplayName:"Comment",Required:!0,vm:c,Rows:5};v(t.find("#commentAvailableCount"),a,c)}}).data("kendoWindow");var a=e.viewModel.get("Count"),n=new kendo.data.ObservableObject({zeroCount:0}),i=new kendo.observable({type:r.Configs.type,workItemModel:e.viewModel,okClick:function(){var t=parseInt(n.get("zeroCount"));if(0==t||""==c.get("Comment"))kendo.ui.ExtAlertDialog.show({title:localization.CiresonAssetManagement,message:localization.RequiredFieldsErrorMessage});else{var i=parseInt(a)+t;e.viewModel.set("Count",i),c.set("Title",localization.IncreasedAvailableCount.replace("{0}",a)+i),c.set("CreatedDate",new Date),e.viewModel.Target_ConsumableHasLogs.unshift(c),win.close()}},cancelClick:function(){win.close()}});kendo.bind(t,i),t.removeClass("hide"),t.show(),win.open()}}),p=_.template(t),m={Target:"openWindow"};$.extend(!0,m,r),o(new kendo.View(p(m),{wrap:!1,model:u,init:function(e){}}).render());var f=function(e,t,a){i.build(a,t,function(t){e.html(t),app.controls.apply(e,{localize:!0,vm:a,bind:!0})})},v=function(e,t,a){n.build(a,t,function(t){e.html(t),app.controls.apply(e,{localize:!0,vm:a,bind:!0})})}}}}),define("text!forms/tasks/decreaseAvailableCount/view.html",[],function(){
return'<div id="ChangeStatusWindow" class="cireson-window defined-form hide">\r\n    <div class="cireson-window--wrapper">\r\n        <div class="cireson-window--body">\r\n            <div id="decreaseCount"/>\r\n            <div id="decreaseAvailableCount"/>\r\n            <div id="commentAvailableCount"/>\r\n            <div id="autoResolve" class="col-group" data-bind="visible:showAutoResolve"/>\r\n        </div>\r\n        <div class="cireson-window--footer window-buttons">\r\n            <div id="changeStatusErrorWin" class="error"></div>\r\n            <button data-role="button"\r\n                    class="btn btn-primary"\r\n                    data-bind="enabled: okEnabled, events: { click: okClick }">\r\n                <%= localization.OK %>\r\n            </button>\r\n            <button data-role="button"\r\n                    class="btn btn-default"\r\n                    data-bind="events: { click: cancelClick }">\r\n                <%= localization.Cancel %>\r\n            </button>\r\n        </div>\r\n    </div>\r\n</div>\r\n'}),define("forms/tasks/decreaseAvailableCount/controller",["require","text!forms/tasks/anchor/view.html","text!forms/tasks/decreaseAvailableCount/view.html","forms/fields/longString/controller","forms/fields/numeric/controller"],function(e){var t=e("text!forms/tasks/anchor/view.html"),a=e("text!forms/tasks/decreaseAvailableCount/view.html"),n=e("forms/fields/longString/controller"),i=e("forms/fields/numeric/controller");return{template:a,build:function(e,r,o){var s=localization.EditConsumableAvailableCount,l=_.template(a),d=new kendo.View(l(m),{wrap:!1});o(d.render());var c,u=kendo.observable({openWindow:function(){var t=d.element.clone();win=t.kendoCiresonWindow({title:s,width:600,height:375,actions:[],activate:function(){c=new kendo.data.ObservableObject({ClassTypeId:"67ce5b07-835d-246d-478d-29cee397c66e",Comment:"",Target_LogHasCreator:{ClassTypeId:"eca3c52a-f273-5cdc-f165-3eb95a2b26cf",BaseId:session.user.Id},AllowCreatedDate:!0,Name:app.lib.newGUID(),Type:{Id:"884650a1-632a-0532-b0d4-8c6b1d990752",Name:localization.TaskRun}});var e={PropertyName:"zeroCount",PropertyDisplayName:"DecreaseConsumableCountBy",Required:!0,DecimalPlaces:0,MaxValue:a};f(t.find("#decreaseCount"),e,n);var e={PropertyName:"AvailableCount",PropertyDisplayName:"AvailableCount",DecimalPlaces:0,Disabled:!0,vm:{AvailableCount:a}};f(t.find("#decreaseAvailableCount"),e,e.vm);var i={PropertyName:"Comment",PropertyDisplayName:"Comment",Required:!0,vm:c,Rows:5};v(t.find("#commentAvailableCount"),i,c)}}).data("kendoWindow");var a=e.viewModel.get("Count"),n=new kendo.data.ObservableObject({zeroCount:0}),i=new kendo.observable({type:r.Configs.type,workItemModel:e.viewModel,okClick:function(){var t=parseInt(n.get("zeroCount"));if(0==t||""==c.get("Comment"))kendo.ui.ExtAlertDialog.show({title:localization.CiresonAssetManagement,message:localization.RequiredFieldsErrorMessage});else{var i=parseInt(a)-t;e.viewModel.set("Count",i),c.set("Title",localization.DecreasedAvailableCountBy.replace("{0}",a)+i),c.set("CreatedDate",new Date),e.viewModel.Target_ConsumableHasLogs.unshift(c),win.close()}},cancelClick:function(){win.close()}});kendo.bind(t,i),t.removeClass("hide"),t.show(),win.open()}}),p=_.template(t),m={Target:"openWindow"};$.extend(!0,m,r),o(new kendo.View(p(m),{wrap:!1,model:u,init:function(e){}}).render());var f=function(e,t,a){i.build(a,t,function(t){e.html(t),app.controls.apply(e,{localize:!0,vm:a,bind:!0})})},v=function(e,t,a){n.build(a,t,function(t){e.html(t),app.controls.apply(e,{localize:!0,vm:a,bind:!0})})}}}}),define("forms/tasks/print/controller",["require","text!forms/tasks/anchor/view.html"],function(e){var t=e("text!forms/tasks/anchor/view.html");return{build:function(e,a,n){var i=_.template(t),r={Target:"print"};$.extend(!0,r,a);var o=(i(r),kendo.observable({print:function(){window.print()}}));n(new kendo.View(i(r),{wrap:!1,model:o}).render())}}}),define("forms/tasks/addMeToWatchList/controller",["require","text!forms/tasks/anchor/view.html","text!forms/popups/notificationPopup/view.html"],function(e){var t=e("text!forms/tasks/anchor/view.html"),a=e("text!forms/popups/notificationPopup/view.html");return{notificationTemplate:a,build:function(e,n,i){var r=_.template(a),o=new kendo.View(r(d),{wrap:!1});i(o.render());var s=kendo.observable({addMeToWatchList:function(e){if(!_.isUndefined(n.Configs.isAddWatchlist))switch(n.Configs.isAddWatchlist){case!1:this.removeFromWatchList(),n.Configs.isAddWatchlist=!0,$(e.currentTarget).html(localization.AddMeToWatchList);break;case!0:default:this.addToWatchList(),n.Configs.isAddWatchlist=!1,$(e.currentTarget).html(localization.RemoveMeFromWatchList)}},addToWatchList:function(){session.user.BaseId=session.user.Id;var t=o.element,a=t.kendoNotification({height:"80px",templates:[{type:"info",template:"<div class='success k-ext-dialog-content'><div class='k-ext-dialog-icon fa fa-check'></div><div class='k-ext-dialog-message'>#= message #</div></div>"}]}).data("kendoNotification");!_.isUndefined(_.find(e.viewModel.WatchList,function(e){return e.Id==session.user.Id||e.BaseId==session.user.Id}))||(_.isUndefined(e.viewModel.WatchList)&&e.viewModel.set("WatchList",[]),e.viewModel.WatchList.push(session.user));var n=localizationHelper.localize(localization.AddMeToWatchListNotificationMessage,"{0} is added to the watchlist");a.show({message:n.replace("{0}",session.user.Name)},"info")},removeFromWatchList:function(){var t=o.element,a=t.kendoNotification({height:"80px",templates:[{type:"info",template:"<div class='success k-ext-dialog-content'><div class='k-ext-dialog-icon fa fa-check'></div><div class='k-ext-dialog-message'>#= message #</div></div>"}]}).data("kendoNotification"),n=-1;_.find(e.viewModel.WatchList,function(e,t){if(e.Id==session.user.Id||e.BaseId==session.user.Id)return n=t,e}),-1!==n&&e.viewModel.WatchList.splice(n,1);var i=localizationHelper.localize(localization.RemoveMeFromWatchListNotificationMessage,"{0} is removed from the watchlist");a.show({message:i.replace("{0}",session.user.Name)},"info")}}),l=_.template(t),d={Target:"addMeToWatchList"};$.extend(!0,d,n),i(new kendo.View(l(d),{wrap:!1,model:s,init:function(e){}}).render())}}}),define("forms/taskBuilder",["forms/tasks/anchor/controller","forms/tasks/analystByGroup/controller","forms/tasks/assignToMe/controller","forms/tasks/changeStatus/controller","forms/tasks/amChangeStatus/controller","forms/tasks/acknowledge/controller","forms/tasks/convertToParent/controller","forms/tasks/linkToParent/controller","forms/tasks/newStatus/controller","forms/tasks/sendEmail/controller","forms/tasks/custom/controller","forms/tasks/spacer/controller","forms/tasks/associateItem/controller","forms/tasks/setDate/controller","forms/tasks/updateAssetManagement/controller","forms/tasks/updateSupersededHardware/controller","forms/tasks/copyLicenseAssignments/controller","text!CustomSpace/customtasks.tmpl.html","forms/tasks/copyToNewWI/controller","forms/tasks/increaseAvailableCount/controller","forms/tasks/decreaseAvailableCount/controller","forms/tasks/print/controller","forms/tasks/addMeToWatchList/controller"],function(anchor,analystByGroup,assignToMe,changeStatus,amChangeStatus,acknowledge,convertToParent,linkToParent,newStatus,sendEmail,custom,spacer,associateItem,setDate,updateAssetManagement,updateSupersededHardware,copyLicenseAssignments,customTmpl,copyToNewWI,increaseAvailableCount,decreaseAvailableCount,print,addMeToWatchList){var definition={build:function(vm,callback){var ulElement=$("<ul/>");vm.fromDrawerBuilder?(vm.taskTemplate={tasks:vm.tasks},ulElement.addClass("drawer-task-menu dropdown-menu"),ulElement.attr("role","menu")):ulElement.addClass("taskmenu");var taskCallback=function(e){ulElement.append(e)};if(_.each(vm.taskTemplate.tasks,function(task){if(_.isString(task.Access)&&(task.Access=eval(task.Access)),task.Access){if(eval("var _obj = "+task.Task+";"),!_obj)throw Exception(task.Task+" is not part of the templating system");_obj.build(vm,task,function(e){taskCallback(e)})}}),callback(ulElement),!vm.fromDrawerBuilder){var tmpl=$("<div/>").addClass("hide");tmpl.append(customTmpl),callback(tmpl)}}};return definition}),define("drawerBuilder",["structure/drawer/gridTask/multiEditController","forms/taskBuilder"],function(e,t){return{build:function(e,t){var a=this,n=e.view.drawer;if(!_.isUndefined(n)){var i=n.buttons,r=n.taskList;_.isUndefined(i)||(drawermenu&&drawermenu.addButton?a.initializers.initButtons(e,i):app.events.subscribe("drawerCreated",function(){a.initializers.initButtons(e,i)})),_.isUndefined(r)||(drawermenu&&drawermenu.addDropUpButton?a.initializers.initTaskList(e,r):app.events.subscribe("drawerCreated",function(){a.initializers.initTaskList(e,r)}))}t()},initializers:{initButtons:function(t,a){_.each(a,function(a){switch(a.type){case"MultiEditGrid":session.user.Analyst&&e.build(t,a)}})},initTaskList:function(e,a){if(!session.user.Analyst){var n=0;if(_.each(a.tasks,function(e){0==e.Access&&n++}),0==n)return}var i=kendo.observable({element:{}}),r=drawermenu.addDropUpButton(localizationHelper.localize(a.titleKey),"fa "+a.icon);i.set("element",r[0]);var o={fromDrawerBuilder:!0,type:"BulkEdit",tasks:a.tasks};t.build(o,function(e){$(i.element).append(e)})}}}}),require.config({waitSeconds:0,urlArgs:"v="+session.staticFileVersion,baseUrl:"/Scripts/",paths:{text:"require/text",angular:"libs/angular/angular",angularAMD:"libs/angular/angularAMD","angular-ui-router":"libs/angular/angular-ui-router","angular-sanitize":"libs/angular/angular-sanitize","angular-resource":"libs/angular/angular-resource"},shim:{angular:{exports:"angular"},"angular-ui-router":["angular"],"angular-sanitize":["angular"],"angular-resource":["angular"]}}),require(["viewBuilder","drawerBuilder"],function(e,t){function a(){app.lib.getNavNodeDefinition(function(a){$(".page_content").hide(),e.build(a,function(){$(function(){app.isMobile()||n(a),t.build(a,function(){app.events.publish("drawerExtensionsReady")}),app.lib.handleMessages(),$(".page_content").show(),app.events.publish("dynamicPageReady"),$("body").tooltip({selector:"[rel=dynamictooltip]",placement:"top",container:".drawer-task-menu"})})})})}function n(e){_.each(e.view.gridModels,function(e){var t=app.gridUtils.savedState.getCurrentState(e.containerId);t.columns&&t.columns.length>0&&(e.config.columns=t.columns);var a=$("#"+e.containerId).kendoGrid(e.config),n=a.data("kendoGrid");if(_.isUndefined(e.refreshInterval)&&(e.refreshInterval=app.config.defaultGridRefreshInterval),e.config.noRefresh&&(e.refreshInterval=0),0!=e.refreshInterval&&""!=e.refreshInterval){t?(app.lib.recheckGridState(t,n),n.dataSource.query(t)):n.dataSource.read();var i=null;i=setInterval(function(){if(app.sessionTimeout.isSessionExpired)clearInterval(i);else{var t=app.gridUtils.savedState.getCurrentState(e.containerId);_.isUndefined(t.page)&&(t.page=n.dataSource.options.page),_.isUndefined(t.pageSize)&&(t.page=n.dataSource.options.pageSize),n.dataSource.query(t)}},e.refreshInterval)}else t?(app.lib.recheckGridState(t,n),n.dataSource.query(t)):n.dataSource.read();e.config.columns.length<5&&_.each(e.config.columns,function(t){!_.isUndefined(t.hidden)&&t.hidden&&$("#"+e.containerId+" table").css("table-layout","inherit")})})}app.isSessionStored()?a():app.events.subscribe("sessionStorageReady",function(){a()})}),define("viewMain",function(){});
//# sourceMappingURL=viewMain-built.min.js.map